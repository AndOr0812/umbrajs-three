<html>
    <head>
      <title>Simple Example</title>
        <style>
        body { margin: 0; }
        canvas { width: 100%; height: 100% }
        </style>
    </head>
    <body>
        <canvas id="c"></canvas>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/106/three.min.js"></script>
        <script src="js/OrbitControls.js"></script>
        <script src="../dist/umbrajs-three.js"></script>

        <script>
'use strict';

(async function() {
    // First create a three.js renderer
    const canvas = document.querySelector('#c')
    let renderer = new THREE.WebGLRenderer({canvas})

    // Initialize Umbra library with the given renderer
    let Umbra = await UmbraRuntime.initWithThreeJS(renderer)

    // Create a 3D model object
    let model = await Umbra.createModel({
        token: 'pubk-6f592e67-5aec-479a-ad9e-46ad4e4fe699',
        projectID: '745415655',
        modelID: '745415871'})

    // Set up a basic three.js scene
    let scene = new THREE.Scene()
    scene.background = new THREE.Color(0x222222)
    let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.01, 1000)
    let controls = new THREE.OrbitControls(camera, canvas)

    renderer.setSize(window.innerWidth, window.innerHeight)

    // Add the 3D model to the scene
    scene.add(model)

    // Position the model so it's visible
    model.position.set(0.5, 0.1, -0.1)
    model.scale.set(1.0, 1.0, -1.0)
    model.updateMatrix()

    // Point the camera at the model
    let target = new THREE.Vector3(-0.55, 0, -0.1)
    camera.position.set(-0.3878, 0.99, -1.033)
    controls.update()

    let animate = function () {
        // Find visible blocks and update streaming
        Umbra.update()

        // Regular three.js update
        controls.update()
        renderer.render(scene, camera)
        requestAnimationFrame(animate)
    }

    // Start the animation loop
    animate()
})()
        </script>
    </body>
</html>


