{"version":3,"file":"umbrajs-three.min.js","sources":["../node_modules/@umbra3d/umbrajs/dist/umbra.esm.js","../src/ThreeFormats.ts","../src/ShaderPatcher.ts","../src/ObjectPool.ts","../src/Scene.ts","../src/index.ts","../src/Loader.ts"],"sourcesContent":["function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar UmbraNativeAPI = function () {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n\n  return function (UmbraNativeAPI) {\n    UmbraNativeAPI = UmbraNativeAPI || {};\n    var c;\n    c || (c = typeof UmbraNativeAPI !== 'undefined' ? UmbraNativeAPI : {});\n    var aa = {},\n        m;\n\n    for (m in c) {\n      c.hasOwnProperty(m) && (aa[m] = c[m]);\n    }\n\n    c.arguments = [];\n    c.thisProgram = \"./this.program\";\n\n    c.quit = function (a, b) {\n      throw b;\n    };\n\n    c.preRun = [];\n    c.postRun = [];\n    var r = \"\";\n    document.currentScript && (r = document.currentScript.src);\n    _scriptDir && (r = _scriptDir);\n    0 !== r.indexOf(\"blob:\") ? r = r.substr(0, r.lastIndexOf(\"/\") + 1) : r = \"\";\n    var ba = c.print || (\"undefined\" !== typeof console ? console.log.bind(console) : \"undefined\" !== typeof print ? print : null),\n        v = c.printErr || (\"undefined\" !== typeof printErr ? printErr : \"undefined\" !== typeof console && console.warn.bind(console) || ba);\n\n    for (m in aa) {\n      aa.hasOwnProperty(m) && (c[m] = aa[m]);\n    }\n\n    aa = void 0;\n\n    function da(a) {\n      var b = w[ea >> 2];\n      a = b + a + 15 & -16;\n      a > fa() && y();\n      w[ea >> 2] = a;\n      return b;\n    }\n\n    function ha(a) {\n      ia || (ia = {});\n      ia[a] || (ia[a] = 1, v(a));\n    }\n\n    var ia,\n        ja = {\n      \"f64-rem\": function f64Rem(a, b) {\n        return a % b;\n      },\n      \"debugger\": function _debugger() {\n        debugger;\n      }\n    };\n    \"object\" !== (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) && v(\"no native wasm support detected\");\n    var z,\n        A = !1;\n\n    function B(a, b) {\n      a || y(\"Assertion failed: \" + b);\n    }\n\n    function ka(a) {\n      var b = c[\"_\" + a];\n      B(b, \"Cannot call unknown function \" + a + \", make sure it is exported\");\n      return b;\n    }\n\n    function la(a, b, d, e) {\n      var f = {\n        string: function string(a) {\n          var b = 0;\n\n          if (null !== a && void 0 !== a && 0 !== a) {\n            var d = (a.length << 2) + 1;\n            b = ma(d);\n            na(a, C, b, d);\n          }\n\n          return b;\n        },\n        array: function array(a) {\n          var b = ma(a.length);\n          D.set(a, b);\n          return b;\n        }\n      },\n          g = ka(a),\n          k = [];\n      a = 0;\n      if (e) for (var h = 0; h < e.length; h++) {\n        var l = f[d[h]];\n        l ? (0 === a && (a = oa()), k[h] = l(e[h])) : k[h] = e[h];\n      }\n      d = g.apply(null, k);\n\n      d = function (a) {\n        return \"string\" === b ? E(a) : \"boolean\" === b ? !!a : a;\n      }(d);\n\n      0 !== a && pa(a);\n      return d;\n    }\n\n    function qa(a) {\n      if (\"number\" === typeof a) {\n        var b = !0;\n        var d = a;\n      } else b = !1, d = a.length;\n\n      var e = F(Math.max(d, 1));\n\n      if (b) {\n        a = e;\n        B(0 == (e & 3));\n\n        for (b = e + (d & -4); a < b; a += 4) {\n          w[a >> 2] = 0;\n        }\n\n        for (b = e + d; a < b;) {\n          D[a++ >> 0] = 0;\n        }\n\n        return e;\n      }\n\n      a.subarray || a.slice ? C.set(a, e) : C.set(new Uint8Array(a), e);\n      return e;\n    }\n\n    var ra = \"undefined\" !== typeof TextDecoder ? new TextDecoder(\"utf8\") : void 0;\n\n    function sa(a, b, d) {\n      var e = b + d;\n\n      for (d = b; a[d] && !(d >= e);) {\n        ++d;\n      }\n\n      if (16 < d - b && a.subarray && ra) return ra.decode(a.subarray(b, d));\n\n      for (e = \"\"; b < d;) {\n        var f = a[b++];\n\n        if (f & 128) {\n          var g = a[b++] & 63;\n          if (192 == (f & 224)) e += String.fromCharCode((f & 31) << 6 | g);else {\n            var k = a[b++] & 63;\n            f = 224 == (f & 240) ? (f & 15) << 12 | g << 6 | k : (f & 7) << 18 | g << 12 | k << 6 | a[b++] & 63;\n            65536 > f ? e += String.fromCharCode(f) : (f -= 65536, e += String.fromCharCode(55296 | f >> 10, 56320 | f & 1023));\n          }\n        } else e += String.fromCharCode(f);\n      }\n\n      return e;\n    }\n\n    function E(a) {\n      return a ? sa(C, a, void 0) : \"\";\n    }\n\n    function na(a, b, d, e) {\n      if (0 < e) {\n        e = d + e - 1;\n\n        for (var f = 0; f < a.length; ++f) {\n          var g = a.charCodeAt(f);\n\n          if (55296 <= g && 57343 >= g) {\n            var k = a.charCodeAt(++f);\n            g = 65536 + ((g & 1023) << 10) | k & 1023;\n          }\n\n          if (127 >= g) {\n            if (d >= e) break;\n            b[d++] = g;\n          } else {\n            if (2047 >= g) {\n              if (d + 1 >= e) break;\n              b[d++] = 192 | g >> 6;\n            } else {\n              if (65535 >= g) {\n                if (d + 2 >= e) break;\n                b[d++] = 224 | g >> 12;\n              } else {\n                if (d + 3 >= e) break;\n                b[d++] = 240 | g >> 18;\n                b[d++] = 128 | g >> 12 & 63;\n              }\n\n              b[d++] = 128 | g >> 6 & 63;\n            }\n\n            b[d++] = 128 | g & 63;\n          }\n        }\n\n        b[d] = 0;\n      }\n    }\n\n    function ta(a) {\n      for (var b = 0, d = 0; d < a.length; ++d) {\n        var e = a.charCodeAt(d);\n        55296 <= e && 57343 >= e && (e = 65536 + ((e & 1023) << 10) | a.charCodeAt(++d) & 1023);\n        127 >= e ? ++b : b = 2047 >= e ? b + 2 : 65535 >= e ? b + 3 : b + 4;\n      }\n\n      return b;\n    }\n\n    \"undefined\" !== typeof TextDecoder && new TextDecoder(\"utf-16le\");\n\n    function ua(a) {\n      0 < a % 65536 && (a += 65536 - a % 65536);\n      return a;\n    }\n\n    var G, D, C, va, wa, w, _H, xa, ya;\n\n    function za() {\n      c.HEAP8 = D = new Int8Array(G);\n      c.HEAP16 = va = new Int16Array(G);\n      c.HEAP32 = w = new Int32Array(G);\n      c.HEAPU8 = C = new Uint8Array(G);\n      c.HEAPU16 = wa = new Uint16Array(G);\n      c.HEAPU32 = _H = new Uint32Array(G);\n      c.HEAPF32 = xa = new Float32Array(G);\n      c.HEAPF64 = ya = new Float64Array(G);\n    }\n\n    var ea = 16784,\n        Aa = c.TOTAL_MEMORY || 134217728;\n    5242880 > Aa && v(\"TOTAL_MEMORY should be larger than TOTAL_STACK, was \" + Aa + \"! (TOTAL_STACK=5242880)\");\n    c.wasmMemory ? z = c.wasmMemory : z = new WebAssembly.Memory({\n      initial: Aa / 65536\n    });\n    z && (G = z.buffer);\n    Aa = G.byteLength;\n    za();\n    w[ea >> 2] = 5259696;\n\n    function Ba(a) {\n      for (; 0 < a.length;) {\n        var b = a.shift();\n        if (\"function\" == typeof b) b();else {\n          var d = b.Nb;\n          \"number\" === typeof d ? void 0 === b.Kb ? c.dynCall_v(d) : c.dynCall_vi(d, b.Kb) : d(void 0 === b.Kb ? null : b.Kb);\n        }\n      }\n    }\n\n    var Ca = [],\n        Ea = [],\n        Fa = [],\n        Ga = [],\n        Ha = [],\n        Ia = !1;\n\n    function Ja() {\n      var a = c.preRun.shift();\n      Ca.unshift(a);\n    }\n\n    var I = 0,\n        Ka = null,\n        La = null;\n    c.preloadedImages = {};\n    c.preloadedAudios = {};\n\n    function Ma() {\n      var a = J;\n      return String.prototype.startsWith ? a.startsWith(\"data:application/octet-stream;base64,\") : 0 === a.indexOf(\"data:application/octet-stream;base64,\");\n    }\n\n    var J = \"umbra.wasm\";\n\n    if (!Ma()) {\n      var Na = J;\n      J = c.locateFile ? c.locateFile(Na, r) : r + Na;\n    }\n\n    function Oa() {\n      try {\n        if (c.wasmBinary) return new Uint8Array(c.wasmBinary);\n        throw \"both async and sync fetching of the wasm failed\";\n      } catch (a) {\n        y(a);\n      }\n    }\n\n    function Pa() {\n      return c.wasmBinary || \"function\" !== typeof fetch ? new Promise(function (a) {\n        a(Oa());\n      }) : fetch(J, {\n        credentials: \"same-origin\"\n      }).then(function (a) {\n        if (!a.ok) throw \"failed to load wasm binary file at '\" + J + \"'\";\n        return a.arrayBuffer();\n      })[\"catch\"](function () {\n        return Oa();\n      });\n    }\n\n    function Qa(a) {\n      function b(a) {\n        c.asm = a.exports;\n        I--;\n        c.monitorRunDependencies && c.monitorRunDependencies(I);\n        0 == I && (null !== Ka && (clearInterval(Ka), Ka = null), La && (a = La, La = null, a()));\n      }\n\n      function d(a) {\n        b(a.instance);\n      }\n\n      function e(a) {\n        return Pa().then(function (a) {\n          return WebAssembly.instantiate(a, f);\n        }).then(a, function (a) {\n          v(\"failed to asynchronously prepare wasm: \" + a);\n          y(a);\n        });\n      }\n\n      var f = {\n        env: a,\n        global: {\n          NaN: NaN,\n          Infinity: Infinity\n        },\n        \"global.Math\": Math,\n        asm2wasm: ja\n      };\n      I++;\n      c.monitorRunDependencies && c.monitorRunDependencies(I);\n      if (c.instantiateWasm) try {\n        return c.instantiateWasm(f, b);\n      } catch (g) {\n        return v(\"Module.instantiateWasm callback failed with error: \" + g), !1;\n      }\n\n      (function () {\n        if (c.wasmBinary || \"function\" !== typeof WebAssembly.instantiateStreaming || Ma() || \"function\" !== typeof fetch) return e(d);\n        fetch(J, {\n          credentials: \"same-origin\"\n        }).then(function (a) {\n          return WebAssembly.instantiateStreaming(a, f).then(d, function (a) {\n            v(\"wasm streaming compile failed: \" + a);\n            v(\"falling back to ArrayBuffer instantiation\");\n            e(d);\n          });\n        });\n      })();\n\n      return {};\n    }\n\n    c.asm = function (a, b) {\n      b.memory = z;\n      b.table = new WebAssembly.Table({\n        initial: 376,\n        maximum: 376,\n        element: \"anyfunc\"\n      });\n      b.__memory_base = 1024;\n      b.__table_base = 0;\n      return Qa(b);\n    };\n\n    var Sa = [function () {\n      alert(\"Invalid http method.\");\n    }, function (a, b, d, e, f, g, k, h, l, n, u) {\n      return Ra(a, b, d, e, f, g, k, h, l, n, u);\n    }, function () {\n      alert(\"Uploads are not supported.\");\n    }];\n    Ea.push({\n      Nb: function Nb() {\n        Ta();\n      }\n    });\n    var K = {};\n\n    function Ua(a) {\n      if (Ua.Tb) {\n        var b = w[a >> 2];\n        var d = w[b >> 2];\n      } else Ua.Tb = !0, K.USER = K.LOGNAME = \"web_user\", K.PATH = \"/\", K.PWD = \"/\", K.HOME = \"/home/web_user\", K.LANG = \"C.UTF-8\", K.LANG = (\"object\" === (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) && navigator.languages && navigator.languages[0] || \"C\").replace(\"-\", \"_\") + \".UTF-8\", K._ = c.thisProgram, d = Ia ? F(1024) : da(1024), b = Ia ? F(256) : da(256), w[b >> 2] = d, w[a >> 2] = b;\n\n      a = [];\n      var e = 0,\n          f;\n\n      for (f in K) {\n        if (\"string\" === typeof K[f]) {\n          var g = f + \"=\" + K[f];\n          a.push(g);\n          e += g.length;\n        }\n      }\n\n      if (1024 < e) throw Error(\"Environment size exceeded TOTAL_ENV_SIZE!\");\n\n      for (f = 0; f < a.length; f++) {\n        e = g = a[f];\n\n        for (var k = d, h = 0; h < e.length; ++h) {\n          D[k++ >> 0] = e.charCodeAt(h);\n        }\n\n        D[k >> 0] = 0;\n        w[b + 4 * f >> 2] = d;\n        d += g.length + 1;\n      }\n\n      w[b + 4 * a.length >> 2] = 0;\n    }\n\n    function Va(a, b) {\n      Ga.unshift({\n        Nb: a,\n        Kb: b\n      });\n    }\n\n    var Wa = [null, [], []];\n\n    function Xa(a, b) {\n      var d = Wa[a];\n      0 === b || 10 === b ? ((1 === a ? ba : v)(sa(d, 0)), d.length = 0) : d.push(b);\n    }\n\n    var _L = 0;\n\n    function _M() {\n      _L += 4;\n      return w[_L - 4 >> 2];\n    }\n\n    var Ya = {},\n        Za = {};\n\n    function $a(a) {\n      for (; a.length;) {\n        var b = a.pop();\n        a.pop()(b);\n      }\n    }\n\n    function ab(a) {\n      return this.fromWireType(_H[a >> 2]);\n    }\n\n    var N = {},\n        O = {},\n        bb = {};\n\n    function cb(a) {\n      if (void 0 === a) return \"_unknown\";\n      a = a.replace(/[^a-zA-Z0-9_]/g, \"$\");\n      var b = a.charCodeAt(0);\n      return 48 <= b && 57 >= b ? \"_\" + a : a;\n    }\n\n    function db(a, b) {\n      a = cb(a);\n      return new Function(\"body\", \"return function \" + a + '() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n')(b);\n    }\n\n    function eb(a) {\n      var b = Error,\n          d = db(a, function (b) {\n        this.name = a;\n        this.message = b;\n        b = Error(b).stack;\n        void 0 !== b && (this.stack = this.toString() + \"\\n\" + b.replace(/^Error(:[^\\n]*)?\\n/, \"\"));\n      });\n      d.prototype = Object.create(b.prototype);\n      d.prototype.constructor = d;\n\n      d.prototype.toString = function () {\n        return void 0 === this.message ? this.name : this.name + \": \" + this.message;\n      };\n\n      return d;\n    }\n\n    var fb = void 0;\n\n    function gb(a, b, d) {\n      function e(b) {\n        b = d(b);\n        if (b.length !== a.length) throw new fb(\"Mismatched type converter count\");\n\n        for (var e = 0; e < a.length; ++e) {\n          P(a[e], b[e]);\n        }\n      }\n\n      a.forEach(function (a) {\n        bb[a] = b;\n      });\n      var f = Array(b.length),\n          g = [],\n          k = 0;\n      b.forEach(function (a, b) {\n        O.hasOwnProperty(a) ? f[b] = O[a] : (g.push(a), N.hasOwnProperty(a) || (N[a] = []), N[a].push(function () {\n          f[b] = O[a];\n          ++k;\n          k === g.length && e(f);\n        }));\n      });\n      0 === g.length && e(f);\n    }\n\n    function hb(a) {\n      switch (a) {\n        case 1:\n          return 0;\n\n        case 2:\n          return 1;\n\n        case 4:\n          return 2;\n\n        case 8:\n          return 3;\n\n        default:\n          throw new TypeError(\"Unknown type size: \" + a);\n      }\n    }\n\n    var ib = void 0;\n\n    function Q(a) {\n      for (var b = \"\"; C[a];) {\n        b += ib[C[a++]];\n      }\n\n      return b;\n    }\n\n    var jb = void 0;\n\n    function R(a) {\n      throw new jb(a);\n    }\n\n    function P(a, b, d) {\n      d = d || {};\n      if (!(\"argPackAdvance\" in b)) throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");\n      var e = b.name;\n      a || R('type \"' + e + '\" must have a positive integer typeid pointer');\n\n      if (O.hasOwnProperty(a)) {\n        if (d.Zb) return;\n        R(\"Cannot register type '\" + e + \"' twice\");\n      }\n\n      O[a] = b;\n      delete bb[a];\n      N.hasOwnProperty(a) && (b = N[a], delete N[a], b.forEach(function (a) {\n        a();\n      }));\n    }\n\n    var kb = [],\n        S = [{}, {\n      value: void 0\n    }, {\n      value: null\n    }, {\n      value: !0\n    }, {\n      value: !1\n    }];\n\n    function lb(a) {\n      4 < a && 0 === --S[a].Ob && (S[a] = void 0, kb.push(a));\n    }\n\n    function T(a) {\n      switch (a) {\n        case void 0:\n          return 1;\n\n        case null:\n          return 2;\n\n        case !0:\n          return 3;\n\n        case !1:\n          return 4;\n\n        default:\n          var b = kb.length ? kb.pop() : S.length;\n          S[b] = {\n            Ob: 1,\n            value: a\n          };\n          return b;\n      }\n    }\n\n    function mb(a) {\n      if (null === a) return \"null\";\n\n      var b = _typeof(a);\n\n      return \"object\" === b || \"array\" === b || \"function\" === b ? a.toString() : \"\" + a;\n    }\n\n    function nb(a, b) {\n      switch (b) {\n        case 2:\n          return function (a) {\n            return this.fromWireType(xa[a >> 2]);\n          };\n\n        case 3:\n          return function (a) {\n            return this.fromWireType(ya[a >> 3]);\n          };\n\n        default:\n          throw new TypeError(\"Unknown float type: \" + a);\n      }\n    }\n\n    function ob(a) {\n      var b = Function;\n      if (!(b instanceof Function)) throw new TypeError(\"new_ called with constructor type \" + _typeof(b) + \" which is not a function\");\n      var d = db(b.name || \"unknownFunctionName\", function () {});\n      d.prototype = b.prototype;\n      d = new d();\n      a = b.apply(d, a);\n      return a instanceof Object ? a : d;\n    }\n\n    function pb(a, b) {\n      var d = c;\n\n      if (void 0 === d[a].Ib) {\n        var e = d[a];\n\n        d[a] = function () {\n          d[a].Ib.hasOwnProperty(arguments.length) || R(\"Function '\" + b + \"' called with an invalid number of arguments (\" + arguments.length + \") - expects one of (\" + d[a].Ib + \")!\");\n          return d[a].Ib[arguments.length].apply(this, arguments);\n        };\n\n        d[a].Ib = [];\n        d[a].Ib[e.Sb] = e;\n      }\n    }\n\n    function qb(a, b, d) {\n      c.hasOwnProperty(a) ? ((void 0 === d || void 0 !== c[a].Ib && void 0 !== c[a].Ib[d]) && R(\"Cannot register public name '\" + a + \"' twice\"), pb(a, a), c.hasOwnProperty(d) && R(\"Cannot register multiple overloads of a function with the same number of arguments (\" + d + \")!\"), c[a].Ib[d] = b) : (c[a] = b, void 0 !== d && (c[a].rc = d));\n    }\n\n    function rb(a, b) {\n      for (var d = [], e = 0; e < a; e++) {\n        d.push(w[(b >> 2) + e]);\n      }\n\n      return d;\n    }\n\n    function sb(a, b) {\n      a = Q(a);\n      if (void 0 !== c[\"FUNCTION_TABLE_\" + a]) var d = c[\"FUNCTION_TABLE_\" + a][b];else if (\"undefined\" !== typeof FUNCTION_TABLE) d = FUNCTION_TABLE[b];else {\n        d = c[\"dynCall_\" + a];\n        void 0 === d && (d = c[\"dynCall_\" + a.replace(/f/g, \"d\")], void 0 === d && R(\"No dynCall invoker for signature: \" + a));\n\n        for (var e = [], f = 1; f < a.length; ++f) {\n          e.push(\"a\" + f);\n        }\n\n        f = \"return function \" + (\"dynCall_\" + a + \"_\" + b) + \"(\" + e.join(\", \") + \") {\\n\";\n        f += \"    return dynCall(rawFunction\" + (e.length ? \", \" : \"\") + e.join(\", \") + \");\\n\";\n        d = new Function(\"dynCall\", \"rawFunction\", f + \"};\\n\")(d, b);\n      }\n      \"function\" !== typeof d && R(\"unknown function pointer with signature \" + a + \": \" + b);\n      return d;\n    }\n\n    var tb = void 0;\n\n    function ub(a) {\n      a = vb(a);\n      var b = Q(a);\n      V(a);\n      return b;\n    }\n\n    function wb(a, b) {\n      function d(a) {\n        f[a] || O[a] || (bb[a] ? bb[a].forEach(d) : (e.push(a), f[a] = !0));\n      }\n\n      var e = [],\n          f = {};\n      b.forEach(d);\n      throw new tb(a + \": \" + e.map(ub).join([\", \"]));\n    }\n\n    function xb(a, b, d) {\n      switch (b) {\n        case 0:\n          return d ? function (a) {\n            return D[a];\n          } : function (a) {\n            return C[a];\n          };\n\n        case 1:\n          return d ? function (a) {\n            return va[a >> 1];\n          } : function (a) {\n            return wa[a >> 1];\n          };\n\n        case 2:\n          return d ? function (a) {\n            return w[a >> 2];\n          } : function (a) {\n            return _H[a >> 2];\n          };\n\n        default:\n          throw new TypeError(\"Unknown integer type: \" + a);\n      }\n    }\n\n    function W(a) {\n      a || R(\"Cannot use deleted val. handle = \" + a);\n      return S[a].value;\n    }\n\n    function yb(a, b) {\n      var d = O[a];\n      void 0 === d && R(b + \" has unknown type \" + ub(a));\n      return d;\n    }\n\n    var zb = {};\n\n    function Ab(a) {\n      var b = zb[a];\n      return void 0 === b ? Q(a) : b;\n    }\n\n    var Bb = [];\n\n    function Cb(a) {\n      var b = Bb.length;\n      Bb.push(a);\n      return b;\n    }\n\n    function Db(a, b) {\n      for (var d = Array(a), e = 0; e < a; ++e) {\n        d[e] = yb(w[(b >> 2) + e], \"parameter \" + e);\n      }\n\n      return d;\n    }\n\n    function Eb(a, b) {\n      Fb = a;\n      Gb = b;\n      if (Hb) if (0 == a) X = function X() {\n        var a = Math.max(0, Ib + b - Y()) | 0;\n        setTimeout(_Jb, a);\n      }, Kb = \"timeout\";else if (1 == a) X = function X() {\n        Lb(_Jb);\n      }, Kb = \"rAF\";else if (2 == a) {\n        if (\"undefined\" === typeof setImmediate) {\n          var d = [];\n          addEventListener(\"message\", function (a) {\n            if (\"setimmediate\" === a.data || \"setimmediate\" === a.data.target) a.stopPropagation(), d.shift()();\n          }, !0);\n\n          setImmediate = function setImmediate(a) {\n            d.push(a);\n            postMessage(\"setimmediate\", \"*\");\n          };\n        }\n\n        X = function X() {\n          setImmediate(_Jb);\n        };\n\n        Kb = \"immediate\";\n      }\n    }\n\n    function Y() {\n      y();\n    }\n\n    function Mb(a) {\n      var b = Nb;\n      c.noExitRuntime = !0;\n      B(!Hb, \"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters.\");\n      Hb = a;\n      Nb = b;\n      var d = \"undefined\" !== typeof b ? function () {\n        c.dynCall_vi(a, b);\n      } : function () {\n        c.dynCall_v(a);\n      };\n      var e = Z;\n\n      _Jb = function Jb() {\n        if (!A) if (0 < Ob.length) {\n          var a = Date.now(),\n              b = Ob.shift();\n          b.Nb(b.Kb);\n\n          if (Pb) {\n            var k = Pb,\n                h = 0 == k % 1 ? k - 1 : Math.floor(k);\n            Pb = b.ic ? h : (8 * k + (h + .5)) / 9;\n          }\n\n          console.log('main loop blocker \"' + b.name + '\" took ' + (Date.now() - a) + \" ms\");\n          c.setStatus && (a = c.statusMessage || \"Please wait...\", b = Pb, k = Qb.mc, b ? b < k ? c.setStatus(a + \" (\" + (k - b) + \"/\" + k + \")\") : c.setStatus(a) : c.setStatus(\"\"));\n          e < Z || setTimeout(_Jb, 0);\n        } else if (!(e < Z)) if (Rb = Rb + 1 | 0, 1 == Fb && 1 < Gb && 0 != Rb % Gb) X();else {\n          0 == Fb && (Ib = Y());\n          \"timeout\" === Kb && c.Mb && (v(\"Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!\"), Kb = \"\");\n\n          a: if (!(A || c.preMainLoop && !1 === c.preMainLoop())) {\n            try {\n              d();\n            } catch (l) {\n              if (l instanceof Sb) break a;\n              l && \"object\" === _typeof(l) && l.stack && v(\"exception thrown: \" + [l, l.stack]);\n              throw l;\n            }\n\n            c.postMainLoop && c.postMainLoop();\n          }\n\n          e < Z || (\"object\" === (typeof SDL === \"undefined\" ? \"undefined\" : _typeof(SDL)) && SDL.audio && SDL.audio.ac && SDL.audio.ac(), X());\n        }\n      };\n    }\n\n    var X = null,\n        Kb = \"\",\n        Z = 0,\n        Hb = null,\n        Nb = 0,\n        Fb = 0,\n        Gb = 0,\n        Rb = 0,\n        Ob = [],\n        Qb = {},\n        Ib,\n        _Jb,\n        Pb,\n        Tb = !1,\n        Ub = !1,\n        Vb = [];\n\n    function Xb() {\n      function a() {\n        Ub = document.pointerLockElement === c.canvas || document.mozPointerLockElement === c.canvas || document.webkitPointerLockElement === c.canvas || document.msPointerLockElement === c.canvas;\n      }\n\n      c.preloadPlugins || (c.preloadPlugins = []);\n\n      if (!Yb) {\n        Yb = !0;\n\n        try {\n          Zb = !0;\n        } catch (d) {\n          Zb = !1, console.log(\"warning: no blob constructor, cannot create blobs with mimetypes\");\n        }\n\n        $b = \"undefined\" != typeof MozBlobBuilder ? MozBlobBuilder : \"undefined\" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : Zb ? null : console.log(\"warning: no BlobBuilder\");\n        ac = \"undefined\" != typeof window ? window.URL ? window.URL : window.webkitURL : void 0;\n        c.Rb || \"undefined\" !== typeof ac || (console.log(\"warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available.\"), c.Rb = !0);\n        c.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !c.Rb && /\\.(jpg|jpeg|png|bmp)$/i.test(a);\n          },\n          handle: function handle(a, b, f, g) {\n            var d = null;\n            if (Zb) try {\n              d = new Blob([a], {\n                type: bc(b)\n              }), d.size !== a.length && (d = new Blob([new Uint8Array(a).buffer], {\n                type: bc(b)\n              }));\n            } catch (n) {\n              ha(\"Blob constructor present but fails: \" + n + \"; falling back to blob builder\");\n            }\n            d || (d = new $b(), d.append(new Uint8Array(a).buffer), d = d.getBlob());\n            var e = ac.createObjectURL(d),\n                l = new Image();\n\n            l.onload = function () {\n              B(l.complete, \"Image \" + b + \" could not be decoded\");\n              var d = document.createElement(\"canvas\");\n              d.width = l.width;\n              d.height = l.height;\n              d.getContext(\"2d\").drawImage(l, 0, 0);\n              c.preloadedImages[b] = d;\n              ac.revokeObjectURL(e);\n              f && f(a);\n            };\n\n            l.onerror = function () {\n              console.log(\"Image \" + e + \" could not be decoded\");\n              g && g();\n            };\n\n            l.src = e;\n          }\n        });\n        c.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !c.qc && a.substr(-4) in {\n              \".ogg\": 1,\n              \".wav\": 1,\n              \".mp3\": 1\n            };\n          },\n          handle: function handle(a, b, f, g) {\n            function d(d) {\n              l || (l = !0, c.preloadedAudios[b] = d, f && f(a));\n            }\n\n            function e() {\n              l || (l = !0, c.preloadedAudios[b] = new Audio(), g && g());\n            }\n\n            var l = !1;\n\n            if (Zb) {\n              try {\n                var n = new Blob([a], {\n                  type: bc(b)\n                });\n              } catch (q) {\n                return e();\n              }\n\n              n = ac.createObjectURL(n);\n              var u = new Audio();\n              u.addEventListener(\"canplaythrough\", function () {\n                d(u);\n              }, !1);\n\n              u.onerror = function () {\n                if (!l) {\n                  console.log(\"warning: browser could not fully decode audio \" + b + \", trying slower base64 approach\");\n\n                  for (var e = \"\", f = 0, g = 0, h = 0; h < a.length; h++) {\n                    for (f = f << 8 | a[h], g += 8; 6 <= g;) {\n                      var k = f >> g - 6 & 63;\n                      g -= 6;\n                      e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[k];\n                    }\n                  }\n\n                  2 == g ? (e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 3) << 4], e += \"==\") : 4 == g && (e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 15) << 2], e += \"=\");\n                  u.src = \"data:audio/x-\" + b.substr(-3) + \";base64,\" + e;\n                  d(u);\n                }\n              };\n\n              u.src = n;\n              cc(function () {\n                d(u);\n              });\n            } else return e();\n          }\n        });\n        var b = c.canvas;\n        b && (b.requestPointerLock = b.requestPointerLock || b.mozRequestPointerLock || b.webkitRequestPointerLock || b.msRequestPointerLock || function () {}, b.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || document.msExitPointerLock || function () {}, b.exitPointerLock = b.exitPointerLock.bind(document), document.addEventListener(\"pointerlockchange\", a, !1), document.addEventListener(\"mozpointerlockchange\", a, !1), document.addEventListener(\"webkitpointerlockchange\", a, !1), document.addEventListener(\"mspointerlockchange\", a, !1), c.elementPointerLock && b.addEventListener(\"click\", function (a) {\n          !Ub && c.canvas.requestPointerLock && (c.canvas.requestPointerLock(), a.preventDefault());\n        }, !1));\n      }\n    }\n\n    function dc(a, b, d, e) {\n      if (b && c.Mb && a == c.canvas) return c.Mb;\n      var f;\n\n      if (b) {\n        var g = {\n          antialias: !1,\n          alpha: !1,\n          oc: 1\n        };\n        if (e) for (var k in e) {\n          g[k] = e[k];\n        }\n        if (\"undefined\" !== typeof GL && (f = GL.jc(a, g))) var h = GL.getContext(f).hc;\n      } else h = a.getContext(\"2d\");\n\n      if (!h) return null;\n      d && (b || B(\"undefined\" === typeof GLctx, \"cannot set in module if GLctx is used, but we are a non-GL context that would replace it\"), c.Mb = h, b && GL.pc(f), c.sc = b, Vb.forEach(function (a) {\n        a();\n      }), Xb());\n      return h;\n    }\n\n    var ec = !1,\n        fc = void 0,\n        gc = void 0;\n\n    function hc(a, b, d) {\n      function e() {\n        Tb = !1;\n        var a = f.parentNode;\n        (document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a ? (f.exitFullscreen = ic, fc && f.requestPointerLock(), Tb = !0, gc ? (\"undefined\" != typeof SDL && (w[SDL.screen >> 2] = _H[SDL.screen >> 2] | 8388608), jc(c.canvas), kc()) : jc(f)) : (a.parentNode.insertBefore(f, a), a.parentNode.removeChild(a), gc ? (\"undefined\" != typeof SDL && (w[SDL.screen >> 2] = _H[SDL.screen >> 2] & -8388609), jc(c.canvas), kc()) : jc(f));\n        if (c.onFullScreen) c.onFullScreen(Tb);\n        if (c.onFullscreen) c.onFullscreen(Tb);\n      }\n\n      fc = a;\n      gc = b;\n      \"undefined\" === typeof fc && (fc = !0);\n      \"undefined\" === typeof gc && (gc = !1);\n      var f = c.canvas;\n      ec || (ec = !0, document.addEventListener(\"fullscreenchange\", e, !1), document.addEventListener(\"mozfullscreenchange\", e, !1), document.addEventListener(\"webkitfullscreenchange\", e, !1), document.addEventListener(\"MSFullscreenChange\", e, !1));\n      var g = document.createElement(\"div\");\n      f.parentNode.insertBefore(g, f);\n      g.appendChild(f);\n      g.requestFullscreen = g.requestFullscreen || g.mozRequestFullScreen || g.msRequestFullscreen || (g.webkitRequestFullscreen ? function () {\n        g.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null) || (g.webkitRequestFullScreen ? function () {\n        g.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null);\n      d ? g.requestFullscreen({\n        tc: d\n      }) : g.requestFullscreen();\n    }\n\n    function mc(a, b, d) {\n      v(\"Browser.requestFullScreen() is deprecated. Please call Browser.requestFullscreen instead.\");\n\n      mc = function mc(a, b, d) {\n        hc(a, b, d);\n      };\n\n      hc(a, b, d);\n    }\n\n    function ic() {\n      if (!Tb) return !1;\n      (document.exitFullscreen || document.cancelFullScreen || document.mozCancelFullScreen || document.msExitFullscreen || document.webkitCancelFullScreen || function () {}).apply(document, []);\n      return !0;\n    }\n\n    var nc = 0;\n\n    function Lb(a) {\n      if (\"function\" === typeof requestAnimationFrame) requestAnimationFrame(a);else {\n        var b = Date.now();\n        if (0 === nc) nc = b + 1E3 / 60;else for (; b + 2 >= nc;) {\n          nc += 1E3 / 60;\n        }\n        setTimeout(a, Math.max(nc - b, 0));\n      }\n    }\n\n    function cc(a) {\n      c.noExitRuntime = !0;\n      setTimeout(function () {\n        A || a();\n      }, 1E4);\n    }\n\n    function bc(a) {\n      return {\n        jpg: \"image/jpeg\",\n        jpeg: \"image/jpeg\",\n        png: \"image/png\",\n        bmp: \"image/bmp\",\n        ogg: \"audio/ogg\",\n        wav: \"audio/wav\",\n        mp3: \"audio/mpeg\"\n      }[a.substr(a.lastIndexOf(\".\") + 1)];\n    }\n\n    var oc = [];\n\n    function kc() {\n      var a = c.canvas;\n      oc.forEach(function (b) {\n        b(a.width, a.height);\n      });\n    }\n\n    function jc(a, b, d) {\n      b && d ? (a.gc = b, a.Yb = d) : (b = a.gc, d = a.Yb);\n      var e = b,\n          f = d;\n      c.forcedAspectRatio && 0 < c.forcedAspectRatio && (e / f < c.forcedAspectRatio ? e = Math.round(f * c.forcedAspectRatio) : f = Math.round(e / c.forcedAspectRatio));\n\n      if ((document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a.parentNode && \"undefined\" != typeof screen) {\n        var g = Math.min(screen.width / e, screen.height / f);\n        e = Math.round(e * g);\n        f = Math.round(f * g);\n      }\n\n      gc ? (a.width != e && (a.width = e), a.height != f && (a.height = f), \"undefined\" != typeof a.style && (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))) : (a.width != b && (a.width = b), a.height != d && (a.height = d), \"undefined\" != typeof a.style && (e != b || f != d ? (a.style.setProperty(\"width\", e + \"px\", \"important\"), a.style.setProperty(\"height\", f + \"px\", \"important\")) : (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))));\n    }\n\n    var pc = {},\n        qc = 0;\n\n    function rc() {\n      var a = qc;\n      qc++;\n      return a;\n    }\n\n    var Yb, Zb, $b, ac;\n\n    function fa() {\n      return D.length;\n    }\n\n    function sc() {\n      if (\"undefined\" !== typeof indexedDB) return indexedDB;\n      var a = null;\n      \"object\" === (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) && (a = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB);\n      B(a, \"IDBStore used, but indexedDB not supported\");\n      return a;\n    }\n\n    var tc = {};\n\n    function uc(a, b) {\n      var d = tc[a];\n      if (d) b(null, d);else {\n        try {\n          var e = sc().open(a, 22);\n        } catch (f) {\n          b(f);\n          return;\n        }\n\n        e.onupgradeneeded = function (a) {\n          var b = a.target.result;\n          a = a.target.transaction;\n          b.objectStoreNames.contains(\"FILE_DATA\") ? a.objectStore(\"FILE_DATA\") : b.createObjectStore(\"FILE_DATA\");\n        };\n\n        e.onsuccess = function () {\n          d = e.result;\n          tc[a] = d;\n          b(null, d);\n        };\n\n        e.onerror = function (a) {\n          b(this.error);\n          a.preventDefault();\n        };\n      }\n    }\n\n    function vc(a, b, d) {\n      uc(a, function (a, f) {\n        if (a) return d(a);\n        a = f.transaction([\"FILE_DATA\"], b);\n\n        a.onerror = function (a) {\n          d(this.error || \"unknown error\");\n          a.preventDefault();\n        };\n\n        a = a.objectStore(\"FILE_DATA\");\n        d(null, a);\n      });\n    }\n\n    function wc(a, b, d) {\n      vc(a, \"readonly\", function (a, f) {\n        if (a) return d(a);\n        a = f.get(b);\n\n        a.onsuccess = function (a) {\n          return (a = a.target.result) ? d(null, a) : d(\"file \" + b + \" not found\");\n        };\n\n        a.onerror = function (a) {\n          d(a);\n        };\n      });\n    }\n\n    function xc(a, b, d, e) {\n      vc(a, \"readwrite\", function (a, g) {\n        if (a) return e(a);\n        a = g.put(d, b);\n\n        a.onsuccess = function () {\n          e();\n        };\n\n        a.onerror = function (a) {\n          e(a);\n        };\n      });\n    }\n\n    function yc(a) {\n      if (!c.noExitRuntime && (A = !0, Ba(Ga), c.onExit)) c.onExit(a);\n      c.quit(a, new Sb(a));\n    }\n\n    c._exit = yc;\n    na(\"GMT\", C, 16688, 4);\n\n    function zc() {\n      function a(a) {\n        return (a = a.toTimeString().match(/\\(([A-Za-z ]+)\\)$/)) ? a[1] : \"GMT\";\n      }\n\n      if (!Ac) {\n        Ac = !0;\n        w[Bc() >> 2] = 60 * new Date().getTimezoneOffset();\n        var b = new Date(2E3, 0, 1),\n            d = new Date(2E3, 6, 1);\n        w[Cc() >> 2] = Number(b.getTimezoneOffset() != d.getTimezoneOffset());\n        var e = a(b),\n            f = a(d);\n        e = qa(Dc(e));\n        f = qa(Dc(f));\n        d.getTimezoneOffset() < b.getTimezoneOffset() ? (w[Ec() >> 2] = e, w[Ec() + 4 >> 2] = f) : (w[Ec() >> 2] = f, w[Ec() + 4 >> 2] = e);\n      }\n    }\n\n    var Ac;\n\n    function Fc(a) {\n      a = ua(a);\n      var b = G.byteLength;\n\n      try {\n        return -1 !== z.grow((a - b) / 65536) ? (G = z.buffer, !0) : !1;\n      } catch (d) {\n        return !1;\n      }\n    }\n\n    Ga.push(function () {\n      var a = c._fflush;\n      a && a(0);\n      Wa[1].length && Xa(1, 10);\n      Wa[2].length && Xa(2, 10);\n    });\n    fb = c.InternalError = eb(\"InternalError\");\n\n    for (var Gc = Array(256), Hc = 0; 256 > Hc; ++Hc) {\n      Gc[Hc] = String.fromCharCode(Hc);\n    }\n\n    ib = Gc;\n    jb = c.BindingError = eb(\"BindingError\");\n\n    c.count_emval_handles = function () {\n      for (var a = 0, b = 5; b < S.length; ++b) {\n        void 0 !== S[b] && ++a;\n      }\n\n      return a;\n    };\n\n    c.get_first_emval = function () {\n      for (var a = 5; a < S.length; ++a) {\n        if (void 0 !== S[a]) return S[a];\n      }\n\n      return null;\n    };\n\n    tb = c.UnboundTypeError = eb(\"UnboundTypeError\");\n\n    c.requestFullScreen = function (a, b, d) {\n      v(\"Module.requestFullScreen is deprecated. Please call Module.requestFullscreen instead.\");\n      c.requestFullScreen = c.requestFullscreen;\n      mc(a, b, d);\n    };\n\n    c.requestFullscreen = function (a, b, d) {\n      hc(a, b, d);\n    };\n\n    c.requestAnimationFrame = function (a) {\n      Lb(a);\n    };\n\n    c.setCanvasSize = function (a, b, d) {\n      jc(c.canvas, a, b);\n      d || kc();\n    };\n\n    c.pauseMainLoop = function () {\n      X = null;\n      Z++;\n    };\n\n    c.resumeMainLoop = function () {\n      Z++;\n      var a = Fb,\n          b = Gb,\n          d = Hb;\n      Hb = null;\n      Mb(d);\n      Eb(a, b);\n      X();\n    };\n\n    c.getUserMedia = function () {\n      window.getUserMedia || (window.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia);\n      window.getUserMedia(void 0);\n    };\n\n    c.createContext = function (a, b, d, e) {\n      return dc(a, b, d, e);\n    };\n\n    \"undefined\" !== typeof dateNow ? Y = dateNow : \"object\" === (typeof performance === \"undefined\" ? \"undefined\" : _typeof(performance)) && performance && \"function\" === typeof performance.now ? Y = function Y() {\n      return performance.now();\n    } : Y = Date.now;\n\n    function Dc(a) {\n      var b = Array(ta(a) + 1);\n      na(a, b, 0, b.length);\n      return b;\n    }\n\n    var Kc = c.asm({}, {\n      j: y,\n      z: function z() {},\n      ea: function ea() {\n        v(\"missing function: _ZN5Umbra18createDirRecursiveEPKc\");\n        y(-1);\n      },\n      $: Ua,\n      Y: function Y() {\n        return Va.apply(null, arguments);\n      },\n      X: function X() {\n        A = !0;\n        throw \"Pure virtual function called!\";\n      },\n      v: function v() {},\n      y: function y(a) {\n        c.___errno_location && (w[c.___errno_location() >> 2] = a);\n        return a;\n      },\n      N: function N(a, b) {\n        _L = b;\n\n        try {\n          return Ya.Qb(), _M(), _M(), _M(), _M(), 0;\n        } catch (d) {\n          return y(d), -d.Lb;\n        }\n      },\n      M: function M(a, b) {\n        _L = b;\n\n        try {\n          var d = Ya.Qb(),\n              e = _M(),\n              f = _M();\n\n          return Ya.kc(d, e, f);\n        } catch (g) {\n          return y(g), -g.Lb;\n        }\n      },\n      x: function x(a, b) {\n        _L = b;\n\n        try {\n          var d = _M(),\n              e = _M(),\n              f = _M();\n\n          for (b = a = 0; b < f; b++) {\n            for (var g = w[e + 8 * b >> 2], k = w[e + (8 * b + 4) >> 2], h = 0; h < k; h++) {\n              Xa(d, C[g + h]);\n            }\n\n            a += k;\n          }\n\n          return a;\n        } catch (l) {\n          return y(l), -l.Lb;\n        }\n      },\n      da: function da(a, b) {\n        _L = b;\n\n        try {\n          var d = E(_M()),\n              e = _M();\n\n          return Ya.lc((void 0).stat, d, e);\n        } catch (f) {\n          return y(f), -f.Lb;\n        }\n      },\n      u: function u(a, b) {\n        _L = b;\n        return 0;\n      },\n      ca: function ca(a, b) {\n        _L = b;\n\n        try {\n          var d = E(_M()),\n              e = _M(),\n              f = _M();\n\n          return (void 0).open(d, e, f).nc;\n        } catch (g) {\n          return y(g), -g.Lb;\n        }\n      },\n      L: function L(a, b) {\n        _L = b;\n        return 0;\n      },\n      K: function K(a, b) {\n        _L = b;\n\n        try {\n          return Ya.Qb(), 0;\n        } catch (d) {\n          return y(d), -d.Lb;\n        }\n      },\n      w: function w() {},\n      J: function J(a) {\n        var b = Za[a];\n        delete Za[a];\n        var d = b.bc,\n            e = b.cc,\n            f = b.Pb,\n            g = f.map(function (a) {\n          return a.Xb;\n        }).concat(f.map(function (a) {\n          return a.ec;\n        }));\n        gb([a], g, function (a) {\n          var g = {};\n          f.forEach(function (b, d) {\n            var e = a[d],\n                h = b.Vb,\n                k = b.Wb,\n                l = a[d + f.length],\n                n = b.dc,\n                Da = b.fc;\n            g[b.Ub] = {\n              read: function read(a) {\n                return e.fromWireType(h(k, a));\n              },\n              write: function write(a, b) {\n                var d = [];\n                n(Da, a, l.toWireType(d, b));\n                $a(d);\n              }\n            };\n          });\n          return [{\n            name: b.name,\n            fromWireType: function fromWireType(a) {\n              var b = {},\n                  d;\n\n              for (d in g) {\n                b[d] = g[d].read(a);\n              }\n\n              e(a);\n              return b;\n            },\n            toWireType: function toWireType(a, b) {\n              for (var f in g) {\n                if (!(f in b)) throw new TypeError(\"Missing field\");\n              }\n\n              var h = d();\n\n              for (f in g) {\n                g[f].write(h, b[f]);\n              }\n\n              null !== a && a.push(e, h);\n              return h;\n            },\n            argPackAdvance: 8,\n            readValueFromPointer: ab,\n            Jb: e\n          }];\n        });\n      },\n      ba: function ba(a, b, d, e, f) {\n        var g = hb(d);\n        b = Q(b);\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return !!a;\n          },\n          toWireType: function toWireType(a, b) {\n            return b ? e : f;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: function readValueFromPointer(a) {\n            if (1 === d) var e = D;else if (2 === d) e = va;else if (4 === d) e = w;else throw new TypeError(\"Unknown boolean type size: \" + b);\n            return this.fromWireType(e[a >> g]);\n          },\n          Jb: null\n        });\n      },\n      p: function p(a, b, d) {\n        a = Q(a);\n        gb([], [b], function (b) {\n          b = b[0];\n          c[a] = b.fromWireType(d);\n          return [];\n        });\n      },\n      aa: function aa(a, b) {\n        b = Q(b);\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = S[a].value;\n            lb(a);\n            return b;\n          },\n          toWireType: function toWireType(a, b) {\n            return T(b);\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: ab,\n          Jb: null\n        });\n      },\n      I: function I(a, b, d) {\n        d = hb(d);\n        b = Q(b);\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return a;\n          },\n          toWireType: function toWireType(a, b) {\n            if (\"number\" !== typeof b && \"boolean\" !== typeof b) throw new TypeError('Cannot convert \"' + mb(b) + '\" to ' + this.name);\n            return b;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: nb(b, d),\n          Jb: null\n        });\n      },\n      l: function l(a, b, d, e, f, g) {\n        var k = rb(b, d);\n        a = Q(a);\n        f = sb(e, f);\n        qb(a, function () {\n          wb(\"Cannot call \" + a + \" due to unbound types\", k);\n        }, b - 1);\n        gb([], k, function (d) {\n          var e = a,\n              h = a;\n          d = [d[0], null].concat(d.slice(1));\n          var k = f,\n              q = d.length;\n          2 > q && R(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n\n          for (var t = null !== d[1] && !1, x = !1, p = 1; p < d.length; ++p) {\n            if (null !== d[p] && void 0 === d[p].Jb) {\n              x = !0;\n              break;\n            }\n          }\n\n          var Da = \"void\" !== d[0].name,\n              U = \"\",\n              ca = \"\";\n\n          for (p = 0; p < q - 2; ++p) {\n            U += (0 !== p ? \", \" : \"\") + \"arg\" + p, ca += (0 !== p ? \", \" : \"\") + \"arg\" + p + \"Wired\";\n          }\n\n          h = \"return function \" + cb(h) + \"(\" + U + \") {\\nif (arguments.length !== \" + (q - 2) + \") {\\nthrowBindingError('function \" + h + \" called with ' + arguments.length + ' arguments, expected \" + (q - 2) + \" args!');\\n}\\n\";\n          x && (h += \"var destructors = [];\\n\");\n          var Wb = x ? \"destructors\" : \"null\";\n          U = \"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");\n          k = [R, k, g, $a, d[0], d[1]];\n          t && (h += \"var thisWired = classParam.toWireType(\" + Wb + \", this);\\n\");\n\n          for (p = 0; p < q - 2; ++p) {\n            h += \"var arg\" + p + \"Wired = argType\" + p + \".toWireType(\" + Wb + \", arg\" + p + \"); // \" + d[p + 2].name + \"\\n\", U.push(\"argType\" + p), k.push(d[p + 2]);\n          }\n\n          t && (ca = \"thisWired\" + (0 < ca.length ? \", \" : \"\") + ca);\n          h += (Da ? \"var rv = \" : \"\") + \"invoker(fn\" + (0 < ca.length ? \", \" : \"\") + ca + \");\\n\";\n          if (x) h += \"runDestructors(destructors);\\n\";else for (p = t ? 1 : 2; p < d.length; ++p) {\n            q = 1 === p ? \"thisWired\" : \"arg\" + (p - 2) + \"Wired\", null !== d[p].Jb && (h += q + \"_dtor(\" + q + \"); // \" + d[p].name + \"\\n\", U.push(q + \"_dtor\"), k.push(d[p].Jb));\n          }\n          Da && (h += \"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");\n          U.push(h + \"}\\n\");\n          d = ob(U).apply(null, k);\n          p = b - 1;\n          if (!c.hasOwnProperty(e)) throw new fb(\"Replacing nonexistant public symbol\");\n          void 0 !== c[e].Ib && void 0 !== p ? c[e].Ib[p] = d : (c[e] = d, c[e].Sb = p);\n          return [];\n        });\n      },\n      r: function r(a, b, d, e, f) {\n        function g(a) {\n          return a;\n        }\n\n        b = Q(b);\n        -1 === f && (f = 4294967295);\n        var k = hb(d);\n\n        if (0 === e) {\n          var h = 32 - 8 * d;\n\n          g = function g(a) {\n            return a << h >>> h;\n          };\n        }\n\n        var l = -1 != b.indexOf(\"unsigned\");\n        P(a, {\n          name: b,\n          fromWireType: g,\n          toWireType: function toWireType(a, d) {\n            if (\"number\" !== typeof d && \"boolean\" !== typeof d) throw new TypeError('Cannot convert \"' + mb(d) + '\" to ' + this.name);\n            if (d < e || d > f) throw new TypeError('Passing a number \"' + mb(d) + '\" from JS side to C/C++ side to an argument of type \"' + b + '\", which is outside the valid range [' + e + \", \" + f + \"]!\");\n            return l ? d >>> 0 : d | 0;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: xb(b, k, 0 !== e),\n          Jb: null\n        });\n      },\n      o: function o(a, b, d) {\n        function e(a) {\n          a >>= 2;\n          var b = _H;\n          return new f(b.buffer, b[a + 1], b[a]);\n        }\n\n        var f = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array][b];\n        d = Q(d);\n        P(a, {\n          name: d,\n          fromWireType: e,\n          argPackAdvance: 8,\n          readValueFromPointer: e\n        }, {\n          Zb: !0\n        });\n      },\n      H: function H(a, b) {\n        b = Q(b);\n        var d = \"std::string\" === b;\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = _H[a >> 2];\n\n            if (d) {\n              var e = C[a + 4 + b],\n                  k = 0;\n              0 != e && (k = e, C[a + 4 + b] = 0);\n              var h = a + 4;\n\n              for (e = 0; e <= b; ++e) {\n                var l = a + 4 + e;\n\n                if (0 == C[l]) {\n                  h = E(h);\n                  if (void 0 === n) var n = h;else n += String.fromCharCode(0), n += h;\n                  h = l + 1;\n                }\n              }\n\n              0 != k && (C[a + 4 + b] = k);\n            } else {\n              n = Array(b);\n\n              for (e = 0; e < b; ++e) {\n                n[e] = String.fromCharCode(C[a + 4 + e]);\n              }\n\n              n = n.join(\"\");\n            }\n\n            V(a);\n            return n;\n          },\n          toWireType: function toWireType(a, b) {\n            b instanceof ArrayBuffer && (b = new Uint8Array(b));\n            var e = \"string\" === typeof b;\n            e || b instanceof Uint8Array || b instanceof Uint8ClampedArray || b instanceof Int8Array || R(\"Cannot pass non-string to std::string\");\n            var f = (d && e ? function () {\n              return ta(b);\n            } : function () {\n              return b.length;\n            })(),\n                h = F(4 + f + 1);\n            _H[h >> 2] = f;\n            if (d && e) na(b, C, h + 4, f + 1);else if (e) for (e = 0; e < f; ++e) {\n              var l = b.charCodeAt(e);\n              255 < l && (V(h), R(\"String has UTF-16 code units that do not fit in 8 bits\"));\n              C[h + 4 + e] = l;\n            } else for (e = 0; e < f; ++e) {\n              C[h + 4 + e] = b[e];\n            }\n            null !== a && a.push(V, h);\n            return h;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: ab,\n          Jb: function Jb(a) {\n            V(a);\n          }\n        });\n      },\n      _: function _(a, b, d) {\n        d = Q(d);\n\n        if (2 === b) {\n          var e = function e() {\n            return wa;\n          };\n\n          var f = 1;\n        } else 4 === b && (e = function e() {\n          return _H;\n        }, f = 2);\n\n        P(a, {\n          name: d,\n          fromWireType: function fromWireType(a) {\n            for (var b = e(), d = _H[a >> 2], g = Array(d), n = a + 4 >> f, u = 0; u < d; ++u) {\n              g[u] = String.fromCharCode(b[n + u]);\n            }\n\n            V(a);\n            return g.join(\"\");\n          },\n          toWireType: function toWireType(a, d) {\n            var g = e(),\n                k = d.length,\n                n = F(4 + k * b);\n            _H[n >> 2] = k;\n\n            for (var u = n + 4 >> f, q = 0; q < k; ++q) {\n              g[u + q] = d.charCodeAt(q);\n            }\n\n            null !== a && a.push(V, n);\n            return n;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: ab,\n          Jb: function Jb(a) {\n            V(a);\n          }\n        });\n      },\n      G: function G(a, b, d, e, f, g) {\n        Za[a] = {\n          name: Q(b),\n          bc: sb(d, e),\n          cc: sb(f, g),\n          Pb: []\n        };\n      },\n      t: function t(a, b, d, e, f, g, k, h, l, n) {\n        Za[a].Pb.push({\n          Ub: Q(b),\n          Xb: d,\n          Vb: sb(e, f),\n          Wb: g,\n          ec: k,\n          dc: sb(h, l),\n          fc: n\n        });\n      },\n      Z: function Z(a, b) {\n        b = Q(b);\n        P(a, {\n          $b: !0,\n          name: b,\n          argPackAdvance: 0,\n          fromWireType: function fromWireType() {},\n          toWireType: function toWireType() {}\n        });\n      },\n      i: function i(a, b, d) {\n        a = W(a);\n        b = yb(b, \"emval::as\");\n        var e = [],\n            f = T(e);\n        w[d >> 2] = f;\n        return b.toWireType(e, a);\n      },\n      n: function n(a, b, d, e) {\n        a = Bb[a];\n        b = W(b);\n        d = Ab(d);\n        a(b, d, null, e);\n      },\n      c: lb,\n      m: function m(a, b) {\n        b = Db(a, b);\n\n        for (var d = b[0], e = d.name + \"_$\" + b.slice(1).map(function (a) {\n          return a.name;\n        }).join(\"_\") + \"$\", f = [\"retType\"], g = [d], k = \"\", h = 0; h < a - 1; ++h) {\n          k += (0 !== h ? \", \" : \"\") + \"arg\" + h, f.push(\"argType\" + h), g.push(b[1 + h]);\n        }\n\n        e = \"return function \" + cb(\"methodCaller_\" + e) + \"(handle, name, destructors, args) {\\n\";\n        var l = 0;\n\n        for (h = 0; h < a - 1; ++h) {\n          e += \"    var arg\" + h + \" = argType\" + h + \".readValueFromPointer(args\" + (l ? \"+\" + l : \"\") + \");\\n\", l += b[h + 1].argPackAdvance;\n        }\n\n        e += \"    var rv = handle[name](\" + k + \");\\n\";\n\n        for (h = 0; h < a - 1; ++h) {\n          b[h + 1].deleteObject && (e += \"    argType\" + h + \".deleteObject(arg\" + h + \");\\n\");\n        }\n\n        d.$b || (e += \"    return retType.toWireType(destructors, rv);\\n\");\n        f.push(e + \"};\\n\");\n        a = ob(f).apply(null, g);\n        return Cb(a);\n      },\n      g: function g(a, b) {\n        a = W(a);\n        b = W(b);\n        return T(a[b]);\n      },\n      F: function F(a) {\n        4 < a && (S[a].Ob += 1);\n      },\n      s: function s() {\n        return T([]);\n      },\n      d: function d(a) {\n        return T(Ab(a));\n      },\n      q: function q() {\n        return T({});\n      },\n      h: function h(a) {\n        $a(S[a].value);\n        lb(a);\n      },\n      f: function f(a, b, d) {\n        a = W(a);\n        b = W(b);\n        d = W(d);\n        a[b] = d;\n      },\n      e: function e(a, b) {\n        a = yb(a, \"_emval_take_value\");\n        a = a.readValueFromPointer(b);\n        return T(a);\n      },\n      E: function E() {\n        c.abort();\n      },\n      D: function D(a) {\n        return Sa[a]();\n      },\n      W: function W(a, b, d, e, f, g, k, h, l, n, u, q) {\n        return Sa[a](b, d, e, f, g, k, h, l, n, u, q);\n      },\n      C: function C(a) {\n        (a = pc[a]) && a.abort();\n      },\n      V: fa,\n      k: Y,\n      B: function B(a, b, d, e, f) {\n        wc(E(a), E(b), function (a, b) {\n          a ? f && Ic(f, d) : (a = F(b.length), C.set(b, a), Jc(e, d, a, b.length), V(a));\n        });\n      },\n      U: function U(a, b, d, e, f, g, k) {\n        xc(E(a), E(b), new Uint8Array(C.subarray(d, d + e)), function (a) {\n          a ? k && Ic(k, f) : g && Ic(g, f);\n        });\n      },\n      T: function T(a, b, d) {\n        C.set(C.subarray(b, b + d), a);\n      },\n      S: function S(a) {\n        if (2147418112 < a) return !1;\n\n        for (var b = Math.max(fa(), 16777216); b < a;) {\n          536870912 >= b ? b = ua(2 * b) : b = Math.min(ua((3 * b + 2147483648) / 4), 2147418112);\n        }\n\n        if (!Fc(b)) return !1;\n        za();\n        return !0;\n      },\n      R: yc,\n      A: function A() {\n        y(\"trap!\");\n      },\n      Q: function Q(a) {\n        zc();\n        a = new Date(1E3 * w[a >> 2]);\n        w[4160] = a.getSeconds();\n        w[4161] = a.getMinutes();\n        w[4162] = a.getHours();\n        w[4163] = a.getDate();\n        w[4164] = a.getMonth();\n        w[4165] = a.getFullYear() - 1900;\n        w[4166] = a.getDay();\n        var b = new Date(a.getFullYear(), 0, 1);\n        w[4167] = (a.getTime() - b.getTime()) / 864E5 | 0;\n        w[4169] = -(60 * a.getTimezoneOffset());\n        var d = new Date(2E3, 6, 1).getTimezoneOffset();\n        b = b.getTimezoneOffset();\n        a = (d != b && a.getTimezoneOffset() == Math.min(b, d)) | 0;\n        w[4168] = a;\n        a = w[Ec() + (a ? 4 : 0) >> 2];\n        w[4170] = a;\n        return 16640;\n      },\n      P: function P(a) {\n        var b = Date.now() / 1E3 | 0;\n        a && (w[a >> 2] = b);\n        return b;\n      },\n      O: function O() {\n        y(\"OOM\");\n      },\n      a: ea,\n      b: 16624\n    }, G);\n    c.asm = Kc;\n\n    c._UmbraAssetLoadAbortRequested = function () {\n      return c.asm.fa.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadFinish = function () {\n      return c.asm.ga.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetMaterialInfo = function () {\n      return c.asm.ha.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetMeshData = function () {\n      return c.asm.ia.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetMeshInfo = function () {\n      return c.asm.ja.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetMetaDataLookupTable = function () {\n      return c.asm.ka.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetTextureData = function () {\n      return c.asm.la.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetTextureInfo = function () {\n      return c.asm.ma.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetType = function () {\n      return c.asm.na.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadPrepare = function () {\n      return c.asm.oa.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadFinish = function () {\n      return c.asm.pa.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadGetType = function () {\n      return c.asm.qa.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadGetUserPointer = function () {\n      return c.asm.ra.apply(null, arguments);\n    };\n\n    c._UmbraClientCreate = function () {\n      return c.asm.sa.apply(null, arguments);\n    };\n\n    c._UmbraClientDestroy = function () {\n      return c.asm.ta.apply(null, arguments);\n    };\n\n    c._UmbraConfigInit = function () {\n      return c.asm.ua.apply(null, arguments);\n    };\n\n    c._UmbraEnvironmentInfoDefaults = function () {\n      return c.asm.va.apply(null, arguments);\n    };\n\n    c._UmbraGetClassification = function () {\n      return c.asm.wa.apply(null, arguments);\n    };\n\n    c._UmbraGetClassificationAmount = function () {\n      return c.asm.xa.apply(null, arguments);\n    };\n\n    c._UmbraGetClassificationCount = function () {\n      return c.asm.ya.apply(null, arguments);\n    };\n\n    c._UmbraGetLibraryInfo = function () {\n      return c.asm.za.apply(null, arguments);\n    };\n\n    c._UmbraGetMipmapLevelByteSize = function () {\n      return c.asm.Aa.apply(null, arguments);\n    };\n\n    c._UmbraGetMipmapLevelOffset = function () {\n      return c.asm.Ba.apply(null, arguments);\n    };\n\n    c._UmbraGetNextAssetLoad = function () {\n      return c.asm.Ca.apply(null, arguments);\n    };\n\n    c._UmbraGetNextAssetUnload = function () {\n      return c.asm.Da.apply(null, arguments);\n    };\n\n    c._UmbraGetStreamingState = function () {\n      return c.asm.Ea.apply(null, arguments);\n    };\n\n    c._UmbraGetVertexAttributeElementSize = function () {\n      return c.asm.Fa.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadDone = function () {\n      return c.asm.Ga.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadNext = function () {\n      return c.asm.Ha.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadSetBuffers = function () {\n      return c.asm.Ia.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeCreate = function () {\n      return c.asm.Ja.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeDestroy = function () {\n      return c.asm.Ka.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeUpdate = function () {\n      return c.asm.La.apply(null, arguments);\n    };\n\n    c._UmbraSceneConnect = function () {\n      return c.asm.Ma.apply(null, arguments);\n    };\n\n    c._UmbraSceneConnectLocal = function () {\n      return c.asm.Na.apply(null, arguments);\n    };\n\n    c._UmbraSceneConnectPublic = function () {\n      return c.asm.Oa.apply(null, arguments);\n    };\n\n    c._UmbraSceneConnectionStatus = function () {\n      return c.asm.Pa.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyDestroy = function () {\n      return c.asm.Qa.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyGetError = function () {\n      return c.asm.Ra.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyGetStatus = function () {\n      return c.asm.Sa.apply(null, arguments);\n    };\n\n    c._UmbraSceneDestroy = function () {\n      return c.asm.Ta.apply(null, arguments);\n    };\n\n    c._UmbraSceneGetInfo = function () {\n      return c.asm.Ua.apply(null, arguments);\n    };\n\n    c._UmbraSceneSetTransform = function () {\n      return c.asm.Va.apply(null, arguments);\n    };\n\n    c._UmbraSceneStartCopy = function () {\n      return c.asm.Wa.apply(null, arguments);\n    };\n\n    c._UmbraSetAllocator = function () {\n      return c.asm.Xa.apply(null, arguments);\n    };\n\n    c._UmbraSetHttp = function () {\n      return c.asm.Ya.apply(null, arguments);\n    };\n\n    c._UmbraSetLogger = function () {\n      return c.asm.Za.apply(null, arguments);\n    };\n\n    c._UmbraViewCreate = function () {\n      return c.asm._a.apply(null, arguments);\n    };\n\n    c._UmbraViewDataComplete = function () {\n      return c.asm.$a.apply(null, arguments);\n    };\n\n    c._UmbraViewDestroy = function () {\n      return c.asm.ab.apply(null, arguments);\n    };\n\n    c._UmbraViewNextRenderables = function () {\n      return c.asm.bb.apply(null, arguments);\n    };\n\n    c._UmbraViewResetRenderables = function () {\n      return c.asm.cb.apply(null, arguments);\n    };\n\n    c._UmbraViewSetCamera = function () {\n      return c.asm.db.apply(null, arguments);\n    };\n\n    c._UmbraViewSetIntersection = function () {\n      return c.asm.eb.apply(null, arguments);\n    };\n\n    c.___embind_register_native_and_builtin_types = function () {\n      return c.asm.fb.apply(null, arguments);\n    };\n\n    var vb = c.___getTypeName = function () {\n      return c.asm.gb.apply(null, arguments);\n    },\n        Cc = c.__get_daylight = function () {\n      return c.asm.hb.apply(null, arguments);\n    },\n        Bc = c.__get_timezone = function () {\n      return c.asm.ib.apply(null, arguments);\n    },\n        Ec = c.__get_tzname = function () {\n      return c.asm.jb.apply(null, arguments);\n    },\n        V = c._free = function () {\n      return c.asm.kb.apply(null, arguments);\n    },\n        F = c._malloc = function () {\n      return c.asm.lb.apply(null, arguments);\n    },\n        Ta = c.globalCtors = function () {\n      return c.asm.Eb.apply(null, arguments);\n    },\n        ma = c.stackAlloc = function () {\n      return c.asm.Fb.apply(null, arguments);\n    },\n        pa = c.stackRestore = function () {\n      return c.asm.Gb.apply(null, arguments);\n    },\n        oa = c.stackSave = function () {\n      return c.asm.Hb.apply(null, arguments);\n    };\n\n    c.dynCall_i = function () {\n      return c.asm.mb.apply(null, arguments);\n    };\n\n    c.dynCall_ii = function () {\n      return c.asm.nb.apply(null, arguments);\n    };\n\n    c.dynCall_iii = function () {\n      return c.asm.ob.apply(null, arguments);\n    };\n\n    c.dynCall_iiii = function () {\n      return c.asm.pb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiii = function () {\n      return c.asm.qb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiii = function () {\n      return c.asm.rb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiiii = function () {\n      return c.asm.sb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiiiiiii = function () {\n      return c.asm.tb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiji = function () {\n      return c.asm.ub.apply(null, arguments);\n    };\n\n    c.dynCall_jiji = function () {\n      return c.asm.vb.apply(null, arguments);\n    };\n\n    c.dynCall_v = function () {\n      return c.asm.wb.apply(null, arguments);\n    };\n\n    var Ic = c.dynCall_vi = function () {\n      return c.asm.xb.apply(null, arguments);\n    };\n\n    c.dynCall_vii = function () {\n      return c.asm.yb.apply(null, arguments);\n    };\n\n    var Jc = c.dynCall_viii = function () {\n      return c.asm.zb.apply(null, arguments);\n    };\n\n    c.dynCall_viiii = function () {\n      return c.asm.Ab.apply(null, arguments);\n    };\n\n    c.dynCall_viiiii = function () {\n      return c.asm.Bb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiiii = function () {\n      return c.asm.Cb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiiiiiii = function () {\n      return c.asm.Db.apply(null, arguments);\n    };\n\n    c.asm = Kc;\n\n    c.cwrap = function (a, b, d, e) {\n      d = d || [];\n      var f = d.every(function (a) {\n        return \"number\" === a;\n      });\n      return \"string\" !== b && f && !e ? ka(a) : function () {\n        return la(a, b, d, arguments);\n      };\n    };\n\n    c.then = function (a) {\n      if (c.calledRun) a(c);else {\n        var b = c.onRuntimeInitialized;\n\n        c.onRuntimeInitialized = function () {\n          b && b();\n          a(c);\n        };\n      }\n      return c;\n    };\n\n    function Sb(a) {\n      this.name = \"ExitStatus\";\n      this.message = \"Program terminated with exit(\" + a + \")\";\n      this.status = a;\n    }\n\n    Sb.prototype = Error();\n    Sb.prototype.constructor = Sb;\n\n    La = function Lc() {\n      c.calledRun || Mc();\n      c.calledRun || (La = Lc);\n    };\n\n    function Mc() {\n      function a() {\n        if (!c.calledRun && (c.calledRun = !0, !A)) {\n          Ia = !0;\n          Ba(Ea);\n          Ba(Fa);\n          if (c.onRuntimeInitialized) c.onRuntimeInitialized();\n          if (c.postRun) for (\"function\" == typeof c.postRun && (c.postRun = [c.postRun]); c.postRun.length;) {\n            var a = c.postRun.shift();\n            Ha.unshift(a);\n          }\n          Ba(Ha);\n        }\n      }\n\n      if (!(0 < I)) {\n        if (c.preRun) for (\"function\" == typeof c.preRun && (c.preRun = [c.preRun]); c.preRun.length;) {\n          Ja();\n        }\n        Ba(Ca);\n        0 < I || c.calledRun || (c.setStatus ? (c.setStatus(\"Running...\"), setTimeout(function () {\n          setTimeout(function () {\n            c.setStatus(\"\");\n          }, 1);\n          a();\n        }, 1)) : a());\n      }\n    }\n\n    c.run = Mc;\n\n    function y(a) {\n      if (c.onAbort) c.onAbort(a);\n      ba(a);\n      v(a);\n      A = !0;\n      throw \"abort(\" + a + \"). Build with -s ASSERTIONS=1 for more info.\";\n    }\n\n    c.abort = y;\n    if (c.preInit) for (\"function\" == typeof c.preInit && (c.preInit = [c.preInit]); 0 < c.preInit.length;) {\n      c.preInit.pop()();\n    }\n    Mc();\n    c.maxBytesDownloaded = 0;\n    c.minBytesDownloaded = 0;\n    c.URLsDownloaded = new Set([]);\n    c.wgetRequests = pc;\n\n    function Ra(a, b, d, e, f, g, k, h, l, n, u) {\n      var q = E(a);\n      b = E(b);\n      g = E(g);\n      var t = new XMLHttpRequest();\n      t.open(b, q, !0);\n      if (\"GET\" != b || 0 != g.length) t.withCredentials = !0;\n      t.responseType = \"arraybuffer\";\n      var x = rc();\n\n      t.onload = function () {\n        if (200 == t.status) {\n          var b = new Uint8Array(t.response),\n              g = c.URLsDownloaded;\n          c.maxBytesDownloaded += t.response.byteLength;\n          g.has(a) || (g.add(a), c.minBytesDownloaded += t.response.byteLength);\n          n ? b.length != u ? c.dynCall_viii(f, x, d, 0) : (C.set(b, n), c.dynCall_viiii(e, x, d, null, 0)) : (g = F(b.length), C.set(b, g), c.dynCall_viiii(e, x, d, g, b.length), V(g));\n        } else c.dynCall_viii(f, x, d, t.status);\n\n        delete pc[x];\n      };\n\n      t.onerror = function () {\n        c.dynCall_viii(f, x, d, t.status);\n        delete pc[x];\n      };\n\n      t.onabort = function () {\n        delete pc[x];\n      };\n\n      0 != g.length && t.setRequestHeader(\"Authorization\", \"Basic \" + btoa(g + \":\"));\n      l = E(l).split(\"\\n\");\n      if (2 <= l.length) for (q = 0; q < l.length; q += 2) {\n        t.setRequestHeader(l[q], l[q + 1]);\n      }\n      \"POST\" == b ? t.send(D.slice(k, k + h)) : t.send(null);\n      pc[x] = t;\n      return x;\n    }\n    return UmbraNativeAPI;\n  };\n}();\n\n// Generated at 2019-10-07 16:41:30\nvar MatrixFormat;\n\n(function (MatrixFormat) {\n  MatrixFormat[MatrixFormat[\"ColumnMajor\"] = 0] = \"ColumnMajor\";\n  MatrixFormat[MatrixFormat[\"RowMajor\"] = 1] = \"RowMajor\";\n  MatrixFormat[MatrixFormat[\"Count\"] = 2] = \"Count\";\n})(MatrixFormat || (MatrixFormat = {}));\n\nvar TextureType;\n\n(function (TextureType) {\n  TextureType[TextureType[\"Diffuse\"] = 0] = \"Diffuse\";\n  TextureType[TextureType[\"Normal\"] = 1] = \"Normal\";\n  TextureType[TextureType[\"Specular\"] = 2] = \"Specular\";\n  TextureType[TextureType[\"MetaIndex\"] = 3] = \"MetaIndex\";\n  TextureType[TextureType[\"Count\"] = 4] = \"Count\";\n})(TextureType || (TextureType = {}));\n\nvar TextureFormat;\n\n(function (TextureFormat) {\n  TextureFormat[TextureFormat[\"RGBA32\"] = 0] = \"RGBA32\";\n  TextureFormat[TextureFormat[\"RGB24\"] = 1] = \"RGB24\";\n  TextureFormat[TextureFormat[\"BC1\"] = 2] = \"BC1\";\n  TextureFormat[TextureFormat[\"BC3\"] = 3] = \"BC3\";\n  TextureFormat[TextureFormat[\"BC4\"] = 4] = \"BC4\";\n  TextureFormat[TextureFormat[\"BC5\"] = 5] = \"BC5\";\n  TextureFormat[TextureFormat[\"ETC1_RGB\"] = 6] = \"ETC1_RGB\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT32\"] = 7] = \"RGBA_FLOAT32\";\n  TextureFormat[TextureFormat[\"UNC1\"] = 8] = \"UNC1\";\n  TextureFormat[TextureFormat[\"JPEG\"] = 9] = \"JPEG\";\n  TextureFormat[TextureFormat[\"PNG\"] = 10] = \"PNG\";\n  TextureFormat[TextureFormat[\"BMP\"] = 11] = \"BMP\";\n  TextureFormat[TextureFormat[\"PSD\"] = 12] = \"PSD\";\n  TextureFormat[TextureFormat[\"TGA\"] = 13] = \"TGA\";\n  TextureFormat[TextureFormat[\"GIF\"] = 14] = \"GIF\";\n  TextureFormat[TextureFormat[\"HDR\"] = 15] = \"HDR\";\n  TextureFormat[TextureFormat[\"PIC\"] = 16] = \"PIC\";\n  TextureFormat[TextureFormat[\"PNM\"] = 17] = \"PNM\";\n  TextureFormat[TextureFormat[\"ASTC_4X4\"] = 18] = \"ASTC_4X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X4\"] = 19] = \"ASTC_5X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X5\"] = 20] = \"ASTC_5X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X5\"] = 21] = \"ASTC_6X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X6\"] = 22] = \"ASTC_6X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X5\"] = 23] = \"ASTC_8X5\";\n  TextureFormat[TextureFormat[\"ASTC_8X6\"] = 24] = \"ASTC_8X6\";\n  TextureFormat[TextureFormat[\"ASTC_10X5\"] = 25] = \"ASTC_10X5\";\n  TextureFormat[TextureFormat[\"ASTC_10X6\"] = 26] = \"ASTC_10X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X8\"] = 27] = \"ASTC_8X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X8\"] = 28] = \"ASTC_10X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X10\"] = 29] = \"ASTC_10X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X10\"] = 30] = \"ASTC_12X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X12\"] = 31] = \"ASTC_12X12\";\n  TextureFormat[TextureFormat[\"ARGB32\"] = 32] = \"ARGB32\";\n  TextureFormat[TextureFormat[\"R8\"] = 33] = \"R8\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGB4\"] = 34] = \"PVRTC1_RGB4\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGBA4\"] = 35] = \"PVRTC1_RGBA4\";\n  TextureFormat[TextureFormat[\"UINT8\"] = 36] = \"UINT8\";\n  TextureFormat[TextureFormat[\"UINT16\"] = 37] = \"UINT16\";\n  TextureFormat[TextureFormat[\"UINT32\"] = 38] = \"UINT32\";\n  TextureFormat[TextureFormat[\"RGB565\"] = 39] = \"RGB565\";\n  TextureFormat[TextureFormat[\"RG8\"] = 40] = \"RG8\";\n  TextureFormat[TextureFormat[\"RG16F\"] = 41] = \"RG16F\";\n  TextureFormat[TextureFormat[\"OPENEXR\"] = 42] = \"OPENEXR\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT16\"] = 43] = \"RGBA_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT16\"] = 44] = \"RGB_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT32\"] = 45] = \"RGB_FLOAT32\";\n  TextureFormat[TextureFormat[\"Count\"] = 46] = \"Count\";\n})(TextureFormat || (TextureFormat = {}));\n\nvar ColorSpace;\n\n(function (ColorSpace) {\n  ColorSpace[ColorSpace[\"Linear\"] = 0] = \"Linear\";\n  ColorSpace[ColorSpace[\"SRGB\"] = 1] = \"SRGB\";\n  ColorSpace[ColorSpace[\"Count\"] = 2] = \"Count\";\n})(ColorSpace || (ColorSpace = {}));\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n  LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n  LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n  LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n  LogLevel[LogLevel[\"Count\"] = 4] = \"Count\";\n})(LogLevel || (LogLevel = {}));\n\nvar TransferStatus;\n\n(function (TransferStatus) {\n  TransferStatus[TransferStatus[\"Inactive\"] = 0] = \"Inactive\";\n  TransferStatus[TransferStatus[\"Active\"] = 1] = \"Active\";\n  TransferStatus[TransferStatus[\"Complete\"] = 2] = \"Complete\";\n  TransferStatus[TransferStatus[\"Error\"] = 3] = \"Error\";\n  TransferStatus[TransferStatus[\"Count\"] = 4] = \"Count\";\n})(TransferStatus || (TransferStatus = {}));\n\nvar HeaderError;\n\n(function (HeaderError) {\n  HeaderError[HeaderError[\"Found\"] = 0] = \"Found\";\n  HeaderError[HeaderError[\"Not_Found\"] = 1] = \"Not_Found\";\n  HeaderError[HeaderError[\"Transfer_Not_Complete\"] = 2] = \"Transfer_Not_Complete\";\n  HeaderError[HeaderError[\"Buffer_Too_Small\"] = 3] = \"Buffer_Too_Small\";\n  HeaderError[HeaderError[\"Count\"] = 4] = \"Count\";\n})(HeaderError || (HeaderError = {}));\n\nvar HttpMethod;\n\n(function (HttpMethod) {\n  HttpMethod[HttpMethod[\"Get\"] = 0] = \"Get\";\n  HttpMethod[HttpMethod[\"Post\"] = 1] = \"Post\";\n  HttpMethod[HttpMethod[\"Put\"] = 2] = \"Put\";\n  HttpMethod[HttpMethod[\"Delete\"] = 3] = \"Delete\";\n  HttpMethod[HttpMethod[\"Count\"] = 4] = \"Count\";\n})(HttpMethod || (HttpMethod = {}));\n\nvar LibraryInfo;\n\n(function (LibraryInfo) {\n  LibraryInfo[LibraryInfo[\"Version\"] = 0] = \"Version\";\n  LibraryInfo[LibraryInfo[\"Copyright\"] = 1] = \"Copyright\";\n  LibraryInfo[LibraryInfo[\"BuildTime\"] = 2] = \"BuildTime\";\n  LibraryInfo[LibraryInfo[\"BuildId\"] = 3] = \"BuildId\";\n  LibraryInfo[LibraryInfo[\"Count\"] = 4] = \"Count\";\n})(LibraryInfo || (LibraryInfo = {}));\n\nvar InvalidUserPointer;\n\n(function (InvalidUserPointer) {\n  InvalidUserPointer[InvalidUserPointer[\"InvalidUserPointer\"] = 0] = \"InvalidUserPointer\";\n})(InvalidUserPointer || (InvalidUserPointer = {}));\n\nvar VertexAttribute;\n\n(function (VertexAttribute) {\n  VertexAttribute[VertexAttribute[\"Position\"] = 0] = \"Position\";\n  VertexAttribute[VertexAttribute[\"TextureCoordinate\"] = 1] = \"TextureCoordinate\";\n  VertexAttribute[VertexAttribute[\"Normal\"] = 2] = \"Normal\";\n  VertexAttribute[VertexAttribute[\"Tangent\"] = 3] = \"Tangent\";\n  VertexAttribute[VertexAttribute[\"Count\"] = 4] = \"Count\";\n})(VertexAttribute || (VertexAttribute = {}));\n\nvar DepthRange;\n\n(function (DepthRange) {\n  DepthRange[DepthRange[\"ZeroToOne\"] = 0] = \"ZeroToOne\";\n  DepthRange[DepthRange[\"MinusOneToOne\"] = 1] = \"MinusOneToOne\";\n  DepthRange[DepthRange[\"Count\"] = 2] = \"Count\";\n})(DepthRange || (DepthRange = {}));\n\nvar TextureCapability;\n\n(function (TextureCapability) {\n  TextureCapability[TextureCapability[\"None\"] = 0] = \"None\";\n  TextureCapability[TextureCapability[\"BC1\"] = 1] = \"BC1\";\n  TextureCapability[TextureCapability[\"BC2\"] = 2] = \"BC2\";\n  TextureCapability[TextureCapability[\"BC3\"] = 4] = \"BC3\";\n  TextureCapability[TextureCapability[\"BC4\"] = 8] = \"BC4\";\n  TextureCapability[TextureCapability[\"BC5\"] = 16] = \"BC5\";\n  TextureCapability[TextureCapability[\"BC6H\"] = 32] = \"BC6H\";\n  TextureCapability[TextureCapability[\"BC7\"] = 64] = \"BC7\";\n  TextureCapability[TextureCapability[\"ASTC\"] = 128] = \"ASTC\";\n  TextureCapability[TextureCapability[\"ETC1\"] = 256] = \"ETC1\";\n  TextureCapability[TextureCapability[\"ETC2\"] = 512] = \"ETC2\";\n  TextureCapability[TextureCapability[\"EAC_R\"] = 1024] = \"EAC_R\";\n  TextureCapability[TextureCapability[\"EAC_RG\"] = 2048] = \"EAC_RG\";\n  TextureCapability[TextureCapability[\"PVRTC1\"] = 4096] = \"PVRTC1\";\n  TextureCapability[TextureCapability[\"PVRTC2\"] = 8192] = \"PVRTC2\";\n  TextureCapability[TextureCapability[\"ATC\"] = 16384] = \"ATC\";\n  TextureCapability[TextureCapability[\"HalfFloat\"] = 32768] = \"HalfFloat\";\n  TextureCapability[TextureCapability[\"Float\"] = 65536] = \"Float\";\n  TextureCapability[TextureCapability[\"All\"] = 4294967295] = \"All\";\n})(TextureCapability || (TextureCapability = {}));\n\nvar DataBufferFlags;\n\n(function (DataBufferFlags) {\n  DataBufferFlags[DataBufferFlags[\"UncachedMemory\"] = 1] = \"UncachedMemory\";\n})(DataBufferFlags || (DataBufferFlags = {}));\n\nvar RuntimeFlags;\n\n(function (RuntimeFlags) {\n  RuntimeFlags[RuntimeFlags[\"NeverUnload\"] = 1] = \"NeverUnload\";\n  RuntimeFlags[RuntimeFlags[\"ExclusiveRendering\"] = 2] = \"ExclusiveRendering\";\n  RuntimeFlags[RuntimeFlags[\"UmbraDebug\"] = -2147483648] = \"UmbraDebug\";\n})(RuntimeFlags || (RuntimeFlags = {}));\n\nvar ConnectionStatus;\n\n(function (ConnectionStatus) {\n  ConnectionStatus[ConnectionStatus[\"Connected\"] = 0] = \"Connected\";\n  ConnectionStatus[ConnectionStatus[\"Connecting\"] = 1] = \"Connecting\";\n  ConnectionStatus[ConnectionStatus[\"ConnectionError\"] = 2] = \"ConnectionError\";\n  ConnectionStatus[ConnectionStatus[\"Count\"] = 3] = \"Count\";\n})(ConnectionStatus || (ConnectionStatus = {}));\n\nvar CopyStatus;\n\n(function (CopyStatus) {\n  CopyStatus[CopyStatus[\"Inprogress\"] = 0] = \"Inprogress\";\n  CopyStatus[CopyStatus[\"Done\"] = 1] = \"Done\";\n  CopyStatus[CopyStatus[\"Error\"] = 2] = \"Error\";\n  CopyStatus[CopyStatus[\"Count\"] = 3] = \"Count\";\n})(CopyStatus || (CopyStatus = {}));\n\nvar SceneCopyDestinationType;\n\n(function (SceneCopyDestinationType) {\n  SceneCopyDestinationType[SceneCopyDestinationType[\"File\"] = 0] = \"File\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Folder\"] = 1] = \"Folder\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Cloud\"] = 2] = \"Cloud\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"ObjExport\"] = 3] = \"ObjExport\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Count\"] = 4] = \"Count\";\n})(SceneCopyDestinationType || (SceneCopyDestinationType = {}));\n\nvar SceneCopySourceType;\n\n(function (SceneCopySourceType) {\n  SceneCopySourceType[SceneCopySourceType[\"Folder\"] = 0] = \"Folder\";\n  SceneCopySourceType[SceneCopySourceType[\"Cloud\"] = 1] = \"Cloud\";\n  SceneCopySourceType[SceneCopySourceType[\"Count\"] = 2] = \"Count\";\n})(SceneCopySourceType || (SceneCopySourceType = {}));\n\nvar FilterShapeType;\n\n(function (FilterShapeType) {\n  FilterShapeType[FilterShapeType[\"Sphere\"] = 0] = \"Sphere\";\n  FilterShapeType[FilterShapeType[\"Cylinder\"] = 1] = \"Cylinder\";\n  FilterShapeType[FilterShapeType[\"Count\"] = 2] = \"Count\";\n})(FilterShapeType || (FilterShapeType = {}));\n\nvar AssetType;\n\n(function (AssetType) {\n  AssetType[AssetType[\"Material\"] = 0] = \"Material\";\n  AssetType[AssetType[\"Texture\"] = 1] = \"Texture\";\n  AssetType[AssetType[\"Mesh\"] = 2] = \"Mesh\";\n  AssetType[AssetType[\"Count\"] = 3] = \"Count\";\n})(AssetType || (AssetType = {}));\n\nvar AssetLoadResult;\n\n(function (AssetLoadResult) {\n  AssetLoadResult[AssetLoadResult[\"Failure\"] = 0] = \"Failure\";\n  AssetLoadResult[AssetLoadResult[\"OutOfMemory\"] = 1] = \"OutOfMemory\";\n  AssetLoadResult[AssetLoadResult[\"Aborted\"] = 2] = \"Aborted\";\n  AssetLoadResult[AssetLoadResult[\"Success\"] = 3] = \"Success\";\n  AssetLoadResult[AssetLoadResult[\"Count\"] = 4] = \"Count\";\n})(AssetLoadResult || (AssetLoadResult = {}));\n\n\n\nvar Assets = /*#__PURE__*/Object.freeze({\n  get AssetType () { return AssetType; },\n  get AssetLoadResult () { return AssetLoadResult; }\n});\n\nvar MAX_LIGHTS = 32;\nvar arrayToHeap = new Map([[Float32Array, 'HEAPF32'], [Uint32Array, 'HEAPU32'], [Uint16Array, 'HEAPU16'], [Uint8Array, 'HEAPU8']]);\n\nfunction assertInteger(x) {\n  if (!Number.isInteger(x)) {\n    throw new Error('Value was not integer: ' + x.toString());\n  }\n}\n/**\n * We need to use a factory here since the native API classes depend on the Emscripten generated wasm code\n * that can't be loaded as a regular ES6 module. The \"Module\" object allows access to C++ functions and the\n * Emscripten heap.\n */\n\n\nvar create = function create(Module) {\n  /**\n   * A Buffer is a block of memory in the Emscripten heap. Typed arrays may get detached when Emscripten\n   * memory growth happens, so any JS code that wants to read from the heap needs to create its typed views\n   * right before they are used.\n   *\n   * The views are safe to use during synchronous execution, but for example a 'yield' in a generator may\n   * trigger memory growth before the caller gets the returned value.\n   */\n  class Buffer {\n    constructor(size) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Float32Array;\n      this.ofs = void 0;\n      this.size = void 0;\n      this.type = void 0;\n      assertInteger(size / type.BYTES_PER_ELEMENT);\n\n      if (size === 0) {\n        throw new Error('Buffer size was zero');\n      }\n\n      this.ofs = Module._malloc(size);\n\n      if (this.ofs === 0) {\n        throw new Error(\"Allocation of \".concat(size, \" bytes failed.\"));\n      }\n\n      this.size = size; // In bytes\n\n      this.type = type;\n    }\n\n    destroy() {\n      Module._free(this.ofs);\n\n      this.ofs = 0;\n      this.size = 0;\n    }\n    /**\n     * A destructive resize operation that never shrinks the buffer.\n     * NOTE: Does *not* copy the old data over.\n     */\n\n\n    ensureSize(newSize) {\n      if (this.size < newSize) {\n        this.destroy();\n        this.ofs = Module._malloc(newSize);\n\n        if (this.ofs === 0) {\n          throw new Error(\"Buffer growth to \".concat(newSize, \" bytes failed.\"));\n        }\n\n        this.size = newSize;\n      }\n    }\n\n    floats() {\n      return new Float32Array(Module.HEAPF32.buffer, this.ofs, this.size / 4);\n    }\n\n    bytes() {\n      return new Uint8Array(Module.HEAPU8.buffer, this.ofs, this.size);\n    }\n\n  }\n\n  class BufferView {\n    constructor(buffer) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : buffer.size;\n      var type = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : buffer.type;\n      this.ofs = void 0;\n      this.start = void 0;\n      this.size = void 0;\n      this.type = void 0;\n      this.heapName = void 0;\n      this.ofs = buffer.ofs;\n      this.start = start;\n      this.size = size;\n      this.type = type;\n      this.heapName = arrayToHeap.get(type);\n    }\n\n    getArray() {\n      // eslint-disable-next-line new-cap\n      return new this.type(Module[this.heapName].buffer, this.ofs + this.start, this.size / this.type.BYTES_PER_ELEMENT);\n    }\n\n  } // Struct field offsets are required for zero-copy interop\n\n\n  var renderableStructOffsets = Module.getRenderableMemberOffsets(); // Used by MeshLoader to copy over mesh AABB without extra allocs\n\n  var boundsBuffer = new Buffer(2 * 3 * 4);\n\n  function copyMat4(buf, elements) {\n    for (var i = 0; i < 16; i++) {\n      buf[i] = elements[i];\n    }\n  }\n\n  function copyVec3(buf, elements) {\n    buf[0] = elements[0];\n    buf[1] = elements[1];\n    buf[2] = elements[2];\n  }\n\n  class Client {\n    constructor() {\n      this.ptr = void 0;\n      this.configPtr = void 0;\n      this.configPtr = Module._malloc(Module.CONFIG_SIZE);\n      Module.configInit(this.configPtr);\n      this.ptr = Module.clientCreate('UmbraJS', this.configPtr);\n    }\n\n    destroy() {\n      Module.clientDestroy(this.ptr);\n\n      Module._free(this.configPtr);\n\n      this.ptr = 0;\n    }\n\n  }\n\n  class NativeScene {\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.matrixBuffer = new Buffer(16 * 4);\n      this.infoBuffer = new Buffer(Module.sceneInfoSize);\n      this.ptr = ptr;\n    }\n\n    destroy() {\n      this.matrixBuffer.destroy();\n      Module.sceneDestroy(this.ptr);\n    }\n\n    connectionStatus() {\n      return Module.sceneConnectionStatus(this.ptr);\n    }\n\n    getInfo() {\n      Module.sceneGetInfo(this.ptr, this.infoBuffer.ofs);\n      return Module.deserializeSceneInfo(this.infoBuffer.ofs);\n    }\n\n    isConnected() {\n      return this.connectionStatus() === ConnectionStatus.Connected;\n    }\n\n    setTransform(matrix) {\n      if (!Array.isArray(matrix)) {\n        throw new TypeError('Matrix should be an array');\n      }\n\n      if (matrix.length !== 16) {\n        throw new TypeError('Matrix should be of size 4x4');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), matrix);\n      Module.sceneSetTransform(this.ptr, this.matrixBuffer.ofs);\n    }\n\n  }\n\n  class View {\n    constructor(ptr, runtimeAssets) {\n      this.ptr = void 0;\n      this.matrixBuffer = void 0;\n      this.vectorBuffer = void 0;\n      this.lightBuffer = void 0;\n      this.temp = void 0;\n      this.runtimeAssets = void 0;\n      this.ptr = ptr;\n      this.matrixBuffer = new Buffer(16 * 4);\n      this.vectorBuffer = new Buffer(4 * 4);\n      this.lightBuffer = new Buffer(MAX_LIGHTS * 3 * 4);\n      this.temp = undefined;\n      this.runtimeAssets = runtimeAssets;\n    }\n\n    destroy() {\n      this.matrixBuffer.destroy();\n      this.vectorBuffer.destroy();\n      this.lightBuffer.destroy();\n\n      if (this.temp) {\n        this.temp.destroy();\n      }\n\n      Module.viewDestroy(this.ptr);\n    }\n\n    setCamera(worldToClip, positionVector, quality) {\n      var lights = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var depthRange = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : DepthRange.MinusOneToOne;\n      var matrixFormat = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : MatrixFormat.ColumnMajor;\n\n      if (!Array.isArray(worldToClip)) {\n        throw new TypeError('Camera matrix should be an array');\n      }\n\n      if (!Array.isArray(positionVector)) {\n        throw new TypeError('Position should be an array');\n      }\n\n      if (typeof quality !== 'number') {\n        throw new TypeError('Quality should be a number');\n      }\n\n      if (worldToClip.length !== 16) {\n        throw new TypeError('WorldToClip matrix should be of size 4x4');\n      }\n\n      if (positionVector.length !== 3) {\n        throw new TypeError('Position vector should be of length 3');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), worldToClip);\n      copyVec3(this.vectorBuffer.floats(), positionVector);\n\n      if (lights) {\n        if (lights.length > MAX_LIGHTS) {\n          throw new Error('Too many lights given');\n        }\n\n        var buffer = this.lightBuffer.floats();\n\n        for (var i = 0; i < lights.length; i++) {\n          buffer[3 * i + 0] = lights[i][0];\n          buffer[3 * i + 1] = lights[i][1];\n          buffer[3 * i + 2] = lights[i][2];\n        }\n      }\n\n      Module.viewSetCamera(this.ptr, this.matrixBuffer.ofs, this.vectorBuffer.ofs, depthRange, matrixFormat, quality, this.lightBuffer.ofs, lights.length);\n    }\n\n    getVisible(batchSize) {\n      assertInteger(batchSize);\n      var bufferSize = batchSize * Module.renderableSize; // Check if we should enlarge or allocate the temp buffer\n\n      if (!this.temp || this.temp.size < bufferSize) {\n        if (this.temp) {\n          this.temp.destroy();\n        }\n\n        this.temp = new Buffer(bufferSize);\n      }\n\n      var temp = this.temp;\n      var strideInWords = Module.renderableSize / 4;\n      var bufferWordSize = bufferSize / 4;\n      assertInteger(strideInWords);\n      assertInteger(bufferWordSize);\n\n      var getView = function getView(arrayType, heap, ptr, ofs) {\n        assertInteger(ofs / 4); // eslint-disable-next-line new-cap\n\n        return new arrayType(heap.buffer, ptr + ofs, bufferWordSize - ofs / 4);\n      };\n\n      var meshIDs = getView(Uint32Array, Module.HEAPU32, temp.ofs, renderableStructOffsets['mesh']);\n      var lodLevels = getView(Int32Array, Module.HEAP32, temp.ofs, renderableStructOffsets['lodLevel']);\n      var masks = getView(Uint32Array, Module.HEAPU32, temp.ofs, renderableStructOffsets['visibilityMask']); // const transforms = getView(Float32Array, Module.HEAPF32, temp.ofs, offsets['transform'])\n\n      var count = Module.viewNextRenderables(this.ptr, temp.ofs, batchSize);\n      var output = [];\n\n      for (var i = 0; i < count; i++) {\n        var id = meshIDs[strideInWords * i];\n        var lod = lodLevels[strideInWords * i];\n        var mask = masks[strideInWords * i]; // TODO extract individual transforms too\n\n        output.push({\n          id: id,\n          mesh: this.runtimeAssets.get(id),\n          lod: lod,\n          mask: mask\n        });\n      }\n\n      return output;\n    }\n\n  }\n\n  class AssetLoad {\n    // TODO: Replace with a union container data types\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.assetType = void 0;\n      this.type = void 0;\n      this.data = void 0;\n      this.ptr = ptr;\n      this.assetType = Module.assetLoadGetType(this.ptr);\n      this.type = 'Load' + AssetType[this.assetType];\n      this.data = {}; // Type specific asset data set from the outside\n    }\n\n    prepare(userPtr) {\n      Module.assetLoadPrepare(this.ptr, userPtr);\n    }\n\n    finish(result) {\n      Module.assetLoadFinish(this.ptr, result);\n    }\n\n  }\n\n  class AssetUnload {\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.assetType = void 0;\n      this.type = void 0;\n      this.data = void 0;\n      this.ptr = ptr;\n      this.assetType = Module.assetUnloadGetType(this.ptr);\n      this.type = 'Unload' + AssetType[this.assetType];\n    }\n\n    finish() {\n      Module.assetUnloadFinish(this.ptr);\n    }\n\n    get userPointer() {\n      return Module.assetUnloadGetUserPointer(this.ptr);\n    }\n\n  }\n\n  var vertexBufferMap = new Map([['position', new Buffer(4)], ['normal', new Buffer(4)], ['uv', new Buffer(4)], ['tangent', new Buffer(4)], ['index', new Buffer(4)]]);\n\n  function getBufferForAttribute(name, newSize, type) {\n    var buffer = vertexBufferMap.get(name);\n\n    if (buffer.size < newSize) {\n      if (buffer.size > 0) {\n        buffer.destroy();\n      }\n\n      buffer = new Buffer(newSize, type);\n      vertexBufferMap.set(name, buffer);\n    } else if (type) {\n      buffer.type = type;\n    }\n\n    return buffer;\n  }\n\n  class Loader {\n    // NOTE: These buffers get leaked but it doesn't matter since we will delete Emscripten's heap on shutdown anyway.\n    constructor(load) {\n      this.load = void 0;\n      this.info = void 0;\n      this.vertexBuffers = void 0;\n      this.load = load;\n      Module.assetLoadGetMeshInfo(this.load.ptr, Loader.meshInfoBuffer.ofs);\n      this.info = Module.deserializeMeshInfo(Loader.meshInfoBuffer.ofs);\n    }\n\n    setBuffers(buffers) {\n      Loader.structBuffer.bytes().fill(0);\n      Loader.tempDataBuffer.bytes().fill(0);\n      Module.serializeDataBuffer(buffers.position.desc, Loader.structBuffer.ofs);\n      Module.serializeDataBuffer(buffers.index.desc, Loader.tempDataBuffer.ofs);\n\n      if ('uv' in buffers) {\n        Module.serializeDataBuffer(buffers.uv.desc, Loader.structBuffer.ofs + Module.dataBufferSize * 1);\n      }\n\n      if ('normal' in buffers) {\n        Module.serializeDataBuffer(buffers.normal.desc, Loader.structBuffer.ofs + Module.dataBufferSize * 2);\n      }\n\n      if ('tangent' in buffers) {\n        Module.serializeDataBuffer(buffers.tangent.desc, Loader.structBuffer.ofs + Module.dataBufferSize * 3);\n      }\n\n      if (!Module.meshLoadSetBuffers(this.load.ptr, Loader.structBuffer.ofs, Loader.tempDataBuffer.ofs)) {\n        console.log(buffers);\n        throw new Error('setBuffers failed');\n      }\n    }\n\n    loadNext() {\n      return Module.meshLoadNext(this.load.ptr, 0, 0);\n    }\n\n    done() {\n      return Module.meshLoadDone(this.load.ptr);\n    }\n\n    allocateBuffers() {\n      var _this = this;\n\n      var indexBytes = this.info.uniqueVertexCount < 1 << 16 ? 2 : 4; // prettier-ignore\n\n      var attrInfo = {\n        position: {\n          elemSize: Module.getVertexAttributeElementSize(VertexAttribute.Position),\n          count: this.info.uniqueVertexCount,\n          mask: 1 << VertexAttribute.Position,\n          type: Float32Array\n        },\n        uv: {\n          elemSize: Module.getVertexAttributeElementSize(VertexAttribute.TextureCoordinate),\n          count: this.info.uniqueVertexCount,\n          mask: 1 << VertexAttribute.TextureCoordinate,\n          type: Float32Array\n        },\n        normal: {\n          elemSize: Module.getVertexAttributeElementSize(VertexAttribute.Normal),\n          count: this.info.uniqueVertexCount,\n          mask: 1 << VertexAttribute.Normal,\n          type: Float32Array\n        },\n        tangent: {\n          elemSize: Module.getVertexAttributeElementSize(VertexAttribute.Tangent),\n          count: this.info.uniqueVertexCount,\n          mask: 1 << VertexAttribute.Tangent,\n          type: Float32Array\n        },\n        index: {\n          elemSize: indexBytes,\n          count: this.info.indexCount,\n          mask: 0xffffffff,\n          type: indexBytes === 2 ? Uint16Array : Uint32Array\n        }\n      };\n      var bufferSizes = {};\n      Object.keys(attrInfo).forEach(function (name) {\n        var byteSize = attrInfo[name].count * attrInfo[name].elemSize;\n        assertInteger(byteSize / attrInfo[name].type.BYTES_PER_ELEMENT);\n        bufferSizes[name] = byteSize;\n      });\n      var meshBuffers = {};\n      Object.keys(attrInfo).forEach(function (name) {\n        // Skip vertex attributes that aren't needed\n        if (!(_this.info.attributes & attrInfo[name].mask)) {\n          return;\n        }\n\n        var buffer = getBufferForAttribute(name, bufferSizes[name], attrInfo[name].type);\n        var desc = {};\n        desc['ptr'] = buffer.ofs; // Emscripten heap offset\n\n        desc['elemSize'] = attrInfo[name].elemSize; // Size of a single element\n\n        desc['size'] = attrInfo[name].count; // Number of elements\n\n        desc['stride'] = attrInfo[name].elemSize; // Distance (in bytes) between consecutive elements\n\n        desc['flags'] = 0; // 0: cached memory, 1: uncached memory\n\n        meshBuffers[name] = {\n          data: new BufferView(buffer, 0, bufferSizes[name]),\n          desc: desc\n        };\n      });\n      return meshBuffers;\n    }\n\n  }\n\n  Loader.structBuffer = new Buffer(Module.dataBufferSize * VertexAttribute.Count, Uint8Array);\n  Loader.meshInfoBuffer = new Buffer(Module.meshInfoSize, Uint8Array);\n  Loader.tempDataBuffer = new Buffer(Module.dataBufferSize, Uint8Array);\n\n  class Runtime {\n    constructor(client, platformFeatures) {\n      var runtimeFlags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.assets = new Map();\n      this.client = void 0;\n      this.ptr = void 0;\n      this.platformFeatures = void 0;\n      this.nextId = 1;\n      this.loader = undefined;\n      this.tempTextureBuffer = new Buffer(1024 * 1024, Uint8Array);\n      this.tempTranscodedBuffer = new Buffer(4, Uint8Array);\n      this.tempStreamingStateBuffer = new Buffer(Module.streamingStateSize, Uint8Array);\n      this.scratch = void 0;\n      this.debug = void 0;\n\n      /**\n       * If no normal map formats are supported then force support for\n       * BC5 so that textures get transcoded into an uncompressed format.\n       */\n      var normalFormats = TextureCapability.ETC1 | TextureCapability.ASTC | TextureCapability.PVRTC1 | TextureCapability.BC5;\n      var capabilityMask = platformFeatures.capabilityMask;\n\n      if (!(capabilityMask & normalFormats)) {\n        capabilityMask |= TextureCapability.BC5 | TextureCapability.BC4;\n      }\n\n      this.client = client;\n      var infoPtr = Module.serializeEnvironmentInfo({\n        textureCapabilityFlags: capabilityMask,\n        maxFileCacheBytes: 0\n      }, 0);\n      this.ptr = Module.runtimeCreate(client.ptr, infoPtr, '', runtimeFlags);\n\n      Module._free(infoPtr);\n\n      this.platformFeatures = platformFeatures;\n      var size = Math.max(Module.meshInfoSize, Module.materialInfoSize, Module.textureInfoSize, Module.rawDataBufferSize);\n      this.scratch = new Buffer(size, Uint8Array);\n      this.debug = {\n        textureFormatsInUse: new Set(),\n        platformFeatures: platformFeatures\n      };\n    }\n\n    destroy() {\n      this.tempTextureBuffer.destroy();\n      this.scratch.destroy();\n      Module.runtimeDestroy(this.ptr);\n      this.client.destroy();\n      this.ptr = 0;\n    }\n\n    connectPublic(publicKey) {\n      var scenePtr = Module.sceneConnectPublic(this.ptr, publicKey);\n\n      if (!scenePtr) {\n        return undefined;\n      }\n\n      return new NativeScene(scenePtr);\n    }\n\n    connectLocal(url) {\n      var scenePtr = Module.sceneConnectLocal(this.ptr, url);\n\n      if (!scenePtr) {\n        return undefined;\n      }\n\n      return new NativeScene(scenePtr);\n    }\n\n    createView() {\n      var viewPtr = Module.viewCreate(this.ptr);\n      return new View(viewPtr, this.assets);\n    }\n\n    update() {\n      Module.runtimeUpdate(this.ptr);\n    }\n\n    *getAssetUnloads() {\n      var p = Module.getNextAssetUnload(this.ptr);\n\n      while (p !== 0) {\n        var unload = new AssetUnload(p);\n        unload.data = this.assets.get(unload.userPointer);\n        yield unload;\n        p = Module.getNextAssetUnload(this.ptr);\n      }\n    }\n\n    *getAssetLoads() {\n      var _this2 = this;\n\n      while (true) {\n        if (this.loader) {\n          if (this.loader.done()) {\n            var job = this.loader.load; // The buffers allocated by MeshLoader are handed over to the caller.\n\n            job.data.buffers = this.loader.vertexBuffers;\n            job.data.material = this.assets.get(this.loader.info.material);\n            job.data.bounds = [this.loader.info.bounds.mn, this.loader.info.bounds.mx];\n            this.loader = undefined;\n            yield job;\n          } else {\n            /**\n             * A mesh is still decompressing so we'll advance the decompression\n             * one step further and return the control to the caller for a timeout check.\n             */\n            if (!this.loader.loadNext()) {\n              throw new Error('loadNext failed');\n            }\n\n            yield undefined; // This processing step might have finished the decompression already, so loop back.\n\n            continue;\n          }\n        }\n\n        var loadPtr = Module.getNextAssetLoad(this.ptr); // Terminate the generator when there are no more jobs to process.\n\n        if (loadPtr === 0) {\n          return undefined;\n        }\n\n        var load = new AssetLoad(loadPtr);\n\n        if (load.type === 'LoadMaterial') {\n          Module.assetLoadGetMaterialInfo(load.ptr, this.scratch.ofs);\n          var info = Module.deserializeMaterialInfo(this.scratch.ofs);\n          var textureObjects = info.textures.filter(function (ptr) {\n            return ptr !== Module.INVALID_USERPOINTER;\n          });\n          textureObjects = textureObjects.map(function (id) {\n            return _this2.assets.get(id);\n          });\n          load.data = {\n            transparent: info.transparent,\n            textures: textureObjects\n          };\n          yield load;\n        } else if (load.type === 'LoadTexture') {\n          var infoPtr = this.scratch.ofs;\n          Module.assetLoadGetTextureInfo(load.ptr, infoPtr);\n          var texture = Module.deserializeTextureInfo(infoPtr);\n          texture['mipByteSizes'] = [Module.getMipmapLevelByteSize(infoPtr, 0)];\n          texture['mipByteOffsets'] = [Module.getMipmapLevelOffset(infoPtr, 0)];\n          var buffer = this.tempTextureBuffer;\n          buffer.ensureSize(texture.dataByteSize);\n          Module.serializeRawDataBuffer({\n            ptr: buffer.ofs,\n            byteSize: texture.dataByteSize,\n            // The output buffer size must match the texture data size\n            flags: 0\n          }, this.scratch.ofs);\n\n          if (!Module.assetLoadGetTextureData(load.ptr, this.scratch.ofs)) {\n            throw new Error(\"assetLoadGetTextureData failed: \".concat(load.ptr, \", \").concat(buffer.ofs, \", \").concat(texture.dataByteSize, \"/\").concat(buffer.size));\n          }\n\n          var bufferView = new BufferView(buffer, 0, texture.dataByteSize);\n\n          if (this.formatNeedsTranscoding(texture.format)) {\n            var _formatToArrayType;\n\n            texture = this.downsampleAndTranscodeTexture(texture, buffer, this.tempTranscodedBuffer);\n            var formatToArrayType = (_formatToArrayType = {}, _defineProperty(_formatToArrayType, TextureFormat.RGBA32, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RGB565, Uint16Array), _defineProperty(_formatToArrayType, TextureFormat.RG8, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RG16F, Uint16Array), _formatToArrayType);\n            bufferView = new BufferView(this.tempTranscodedBuffer, 0, texture.dataByteSize);\n            bufferView.type = formatToArrayType[texture.format];\n          } // Convert internal enums to string constants\n          // info.format = Native.TextureFormat[info.format]\n          // info.colorSpace = Native.ColorSpace[info.colorSpace]\n          // info.textureType = Native.TextureType[info.textureType]\n\n\n          this.debug.textureFormatsInUse.add(texture.format);\n          load.data = {\n            info: texture,\n            buffer: bufferView\n          };\n          yield load;\n        } else if (load.type === 'LoadMesh') {\n          // Mesh jobs create decompression work that needs to be done first.\n          this.loader = new Loader(load);\n          this.loader.vertexBuffers = this.loader.allocateBuffers();\n          this.loader.setBuffers(this.loader.vertexBuffers);\n          yield undefined;\n        } else {\n          throw new Error(\"Job wasn't handled correctly\");\n        }\n      }\n    }\n\n    loadAssets(handlers, timeLimit) {\n      var startTime = performance.now(); // First go and free up all pending assets\n\n      for (var unload of this.getAssetUnloads()) {\n        handlers[unload.type](unload);\n\n        if (performance.now() - startTime > timeLimit) {\n          break;\n        }\n      } // Process load jobs if there's still time left\n\n\n      for (var load of this.getAssetLoads()) {\n        // If job is 'undefined' it means a mesh is still decompressing\n        if (load) {\n          try {\n            handlers[load.type](load);\n          } catch (error) {\n            load.finish(AssetLoadResult.Failure);\n            throw error;\n          }\n        } // We always process at least one job before checking the time\n\n\n        if (performance.now() - startTime > timeLimit) {\n          break;\n        }\n      }\n    }\n\n    addAsset(asset) {\n      // AssetJob IDs are just an increasing 32-bit series\n      var userPtr = this.nextId;\n      this.nextId = this.nextId + 1 | 0;\n\n      if (this.nextId === 0) {\n        this.nextId = 1;\n      }\n\n      this.assets.set(userPtr, asset);\n      return userPtr;\n    }\n    /**\n     * Removes the asset reference of the stream out job.\n     * Assumes the caller has already freed their own asset resources.\n     */\n\n\n    removeAsset(job, asset) {\n      var id = job.userPointer;\n\n      if (this.assets.has(id)) {\n        this.assets[\"delete\"](id);\n      }\n\n      return id;\n    }\n\n    formatNeedsTranscoding(format) {\n      var flags = this.platformFeatures.capabilityMask;\n\n      switch (format) {\n        case TextureFormat.BC1:\n          if (flags & TextureCapability.BC1) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC3:\n          if (flags & TextureCapability.BC3) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC4:\n          if (flags & TextureCapability.BC4) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC5:\n          if (flags & TextureCapability.BC5) {\n            return false;\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      return true;\n    }\n\n    downsampleAndTranscodeTexture(info, buffer, outputBuffer) {\n      var newFormat = Module.getUncompressedFromBCFormat(info.format);\n\n      if (newFormat === TextureFormat.Count) {\n        throw new Error(\"Couldn't find a matching BC format\");\n      } // If half float is not supported on this platform we need to make do with an 8-bit texture.\n\n\n      if (newFormat === TextureFormat.RG16F && !this.platformFeatures.halfFloat) {\n        newFormat = TextureFormat.RG8;\n      }\n\n      var outputSize = Module.getTextureByteSize(info.width, info.height, newFormat);\n      outputBuffer.ensureSize(outputSize);\n      var result = Module.downsampleAndTranscodeTexture(info.format, newFormat, info.width, info.height, buffer.ofs, info.dataByteSize, outputBuffer.ofs, outputBuffer.size);\n\n      if (!result.success) {\n        throw new Error(\"Texture transcoding failed. Input: \".concat(info.format, \", output: \").concat(newFormat, \", output size: \").concat(outputSize));\n      }\n\n      if (result.texture.format !== newFormat) {\n        throw new Error(\"Transcoded texture format was \".concat(result.texture.format, \" instead of the expected \").concat(newFormat));\n      } // Create a new texture descriptor with updated properties and return it.\n\n\n      var info2 = Object.assign({}, info);\n      var desc = result.texture;\n      info2 = Object.assign(info2, {\n        format: desc.format,\n        width: desc.width,\n        height: desc.height,\n        dataByteSize: desc.dataByteSize,\n        mipByteSizes: [desc.dataByteSize]\n      });\n      return info2;\n    }\n\n    getStreamingState() {\n      Module.getStreamingState(this.ptr, this.tempStreamingStateBuffer.ofs);\n      return Module.deserializeStreamingState(this.tempStreamingStateBuffer.ofs);\n    }\n\n    getStreamingProgress() {\n      var state = this.getStreamingState();\n\n      if (state.numResidentTiles == 0) {\n        return 0.0;\n      }\n\n      return state.numResidentTilesLoaded / state.numResidentTiles;\n    }\n\n  } // Expose only runtime for instantiation\n\n\n  return {\n    createRuntime: function createRuntime(features) {\n      return new Runtime(new Client(), features);\n    }\n  };\n};\n\n// Generated at 2019-10-07 16:41:30\nfunction wrapNativeFunctions(Module) {\n  Object.assign(Module, {\n    configInit: Module.cwrap('UmbraConfigInit', null, ['number']),\n    clientCreate: Module.cwrap('UmbraClientCreate', 'number', ['string', 'number']),\n    clientDestroy: Module.cwrap('UmbraClientDestroy', null, ['number']),\n    getLibraryInfo: Module.cwrap('UmbraGetLibraryInfo', 'string', ['number']),\n    environmentInfoDefaults: Module.cwrap('UmbraEnvironmentInfoDefaults', null, ['number']),\n    assetUnloadGetType: Module.cwrap('UmbraAssetUnloadGetType', 'number', ['number']),\n    assetUnloadGetUserPointer: Module.cwrap('UmbraAssetUnloadGetUserPointer', 'number', ['number']),\n    assetUnloadFinish: Module.cwrap('UmbraAssetUnloadFinish', null, ['number']),\n    assetLoadPrepare: Module.cwrap('UmbraAssetLoadPrepare', null, ['number', 'number']),\n    assetLoadFinish: Module.cwrap('UmbraAssetLoadFinish', null, ['number', 'number']),\n    assetLoadGetType: Module.cwrap('UmbraAssetLoadGetType', 'number', ['number']),\n    assetLoadAbortRequested: Module.cwrap('UmbraAssetLoadAbortRequested', 'number', ['number']),\n    assetLoadGetMeshInfo: Module.cwrap('UmbraAssetLoadGetMeshInfo', null, ['number', 'number']),\n    assetLoadGetMaterialInfo: Module.cwrap('UmbraAssetLoadGetMaterialInfo', null, ['number', 'number']),\n    assetLoadGetTextureInfo: Module.cwrap('UmbraAssetLoadGetTextureInfo', null, ['number', 'number']),\n    getVertexAttributeElementSize: Module.cwrap('UmbraGetVertexAttributeElementSize', 'number', ['number']),\n    assetLoadGetMeshData: Module.cwrap('UmbraAssetLoadGetMeshData', 'number', ['number', 'number', 'number']),\n    meshLoadSetBuffers: Module.cwrap('UmbraMeshLoadSetBuffers', 'number', ['number', 'number', 'number']),\n    meshLoadDone: Module.cwrap('UmbraMeshLoadDone', 'number', ['number']),\n    meshLoadNext: Module.cwrap('UmbraMeshLoadNext', 'number', ['number', 'number', 'number']),\n    getMipmapLevelByteSize: Module.cwrap('UmbraGetMipmapLevelByteSize', 'number', ['number', 'number']),\n    getMipmapLevelOffset: Module.cwrap('UmbraGetMipmapLevelOffset', 'number', ['number', 'number']),\n    assetLoadGetTextureData: Module.cwrap('UmbraAssetLoadGetTextureData', 'number', ['number', 'number']),\n    assetLoadGetMetaDataLookupTable: Module.cwrap('UmbraAssetLoadGetMetaDataLookupTable', 'number', ['number', 'number']),\n    getClassificationCount: Module.cwrap('UmbraGetClassificationCount', 'number', ['number', 'number']),\n    getClassification: Module.cwrap('UmbraGetClassification', 'number', ['number', 'number', 'number']),\n    getClassificationAmount: Module.cwrap('UmbraGetClassificationAmount', 'number', ['number', 'number', 'number']),\n    runtimeCreate: Module.cwrap('UmbraRuntimeCreate', 'number', ['number', 'number', 'string', 'number']),\n    runtimeDestroy: Module.cwrap('UmbraRuntimeDestroy', null, ['number']),\n    runtimeUpdate: Module.cwrap('UmbraRuntimeUpdate', null, ['number']),\n    getStreamingState: Module.cwrap('UmbraGetStreamingState', null, ['number', 'number']),\n    getNextAssetUnload: Module.cwrap('UmbraGetNextAssetUnload', 'number', ['number']),\n    getNextAssetLoad: Module.cwrap('UmbraGetNextAssetLoad', 'number', ['number']),\n    sceneConnect: Module.cwrap('UmbraSceneConnect', 'number', ['number', 'string', 'string']),\n    sceneConnectPublic: Module.cwrap('UmbraSceneConnectPublic', 'number', ['number', 'string']),\n    sceneConnectLocal: Module.cwrap('UmbraSceneConnectLocal', 'number', ['number', 'string']),\n    sceneDestroy: Module.cwrap('UmbraSceneDestroy', null, ['number']),\n    sceneConnectionStatus: Module.cwrap('UmbraSceneConnectionStatus', 'number', ['number']),\n    sceneGetInfo: Module.cwrap('UmbraSceneGetInfo', 'number', ['number', 'number']),\n    sceneSetTransform: Module.cwrap('UmbraSceneSetTransform', null, ['number', 'number']),\n    sceneStartCopy: Module.cwrap('UmbraSceneStartCopy', 'number', ['number', 'number', 'number', 'number', 'number']),\n    sceneCopyDestroy: Module.cwrap('UmbraSceneCopyDestroy', null, ['number']),\n    sceneCopyGetStatus: Module.cwrap('UmbraSceneCopyGetStatus', 'number', ['number', 'number']),\n    sceneCopyGetError: Module.cwrap('UmbraSceneCopyGetError', 'string', ['number']),\n    viewCreate: Module.cwrap('UmbraViewCreate', 'number', ['number']),\n    viewDestroy: Module.cwrap('UmbraViewDestroy', null, ['number']),\n    viewSetCamera: Module.cwrap('UmbraViewSetCamera', null, ['number', 'number', 'number', 'number', 'number', 'number', 'number', 'number']),\n    viewSetIntersection: Module.cwrap('UmbraViewSetIntersection', null, ['number', 'number']),\n    viewDataComplete: Module.cwrap('UmbraViewDataComplete', 'number', ['number']),\n    viewResetRenderables: Module.cwrap('UmbraViewResetRenderables', null, ['number']),\n    viewNextRenderables: Module.cwrap('UmbraViewNextRenderables', 'number', ['number', 'number', 'number'])\n  });\n}\n\n\n\nvar _Math = /*#__PURE__*/Object.freeze({\n\n});\n\n/**\n * These definitions are exported in 'index.ts'.\n * See the API reference for more details:\n *\n *     https://github.com/UmbraSoftware/umbrajs/wiki/API-reference\n *\n */\n\n/**\n * Returns a library instance that uses the Emscripten resources of \"Module\".\n */\nfunction instantiate(Module) {\n  var lib = {};\n  /**\n   * Queries supported texture formats and also enables the relevant WebGL extensions.\n   */\n\n  lib.getPlatformFeatures = function (gl) {\n    var flags = 0; // We accumulate a texture format bitmask here\n\n    var formats = new Set(); // Will hold all supported format names\n\n    var supportsSRGB = false;\n    var supportsHalfFloat = false;\n    /**\n     * We fetch all extension strings and strip off possible vendor prefixes of WEBGL\n     * extensions. However, when we enable the extension we need the original full string.\n     * Here 'extStrings' holds a mapping from a shortened to a full extension string.\n     */\n\n    var extStrings = new Map([]); // Full strings\n\n    var extNames = []; // Shortened strings\n\n    var allExtensions = gl.getSupportedExtensions();\n\n    for (var full of allExtensions) {\n      var shortened = full.replace(/^(.*)_WEBGL_/, 'WEBGL_');\n      extStrings.set(shortened, full);\n      extNames.push(shortened);\n    }\n\n    var mapping = new Map([['WEBGL_compressed_texture_s3tc', {\n      mask: TextureCapability.BC1 | TextureCapability.BC2 | TextureCapability.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_s3tc_srgb', {\n      mask: TextureCapability.BC1 | TextureCapability.BC2 | TextureCapability.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_rgtc', {\n      mask: TextureCapability.BC4 | TextureCapability.BC5,\n      names: ['bc4', 'bc5']\n    }], ['WEBGL_compressed_texture_pvrtc', {\n      mask: TextureCapability.PVRTC1,\n      names: ['pvrtc1_rgb4', 'pvrtc1_rgba4']\n    }], ['WEBGL_compressed_texture_etc1', {\n      mask: TextureCapability.ETC1,\n      names: ['etc1_rgb']\n    }], ['WEBGL_compressed_texture_astc', {\n      mask: TextureCapability.ASTC,\n      names: ['astc_4x4']\n    }]]);\n\n    for (var key of mapping.keys()) {\n      if (extNames.includes(key)) {\n        gl.getExtension(extStrings.get(key));\n        var value = mapping.get(key);\n        flags |= value.mask;\n        value.names.forEach(function (name) {\n          return formats.add(name);\n        });\n      }\n    }\n\n    if (extNames.includes('WEBGL_compressed_texture_s3tc_srgb')) {\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('EXT_sRGB')) {\n      gl.getExtension(extStrings.get('EXT_sRGB'));\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('OES_texture_half_float')) {\n      gl.getExtension(extStrings.get('OES_texture_half_float'));\n      supportsHalfFloat = true;\n    }\n\n    return {\n      capabilityMask: flags,\n      formats: _toConsumableArray(formats),\n      srgb: supportsSRGB,\n      halfFloat: supportsHalfFloat\n    };\n  }; // Access to the Emscripten module is needed for deinitialization\n\n\n  lib.nativeModule = Module; // Allow access to Runtime class\n\n  lib.createRuntime = create(Module).createRuntime;\n\n  lib.getStreamingInfo = function () {\n    return {\n      minBytesDownloaded: lib.nativeModule.minBytesDownloaded,\n      maxBytesDownloaded: lib.nativeModule.maxBytesDownloaded\n    };\n  };\n\n  lib.getLibraryInfo = function () {\n    return {\n      version: Module.getLibraryInfo(LibraryInfo.Version),\n      copyright: Module.getLibraryInfo(LibraryInfo.Copyright),\n      buildTime: Module.getLibraryInfo(LibraryInfo.BuildTime),\n      buildID: Module.getLibraryInfo(LibraryInfo.BuildId)\n    };\n  };\n\n  lib.abortDownloads = function () {\n    Object.values(Module.wgetRequests).forEach(function (req) {\n      req.abort();\n    });\n  };\n\n  return lib;\n}\n/**\n * Compiles the WebAssembly and code and initializes the Emscripten environment.\n * Returns a Promise that resolves with the library instance ready for use.\n */\n\n\nvar initUmbra = function initUmbra(config) {\n\n  var defaults = {\n    wasmURL: ''\n  };\n  config = Object.assign(defaults, config);\n  return new Promise(function (resolve, reject) {\n    try {\n      var redirectWasmURL = function redirectWasmURL(path, prefix) {\n        // If it's our wasm file, return a custom URL\n        if (path.endsWith('umbra.wasm') && config.wasmURL !== '') {\n          return config.wasmURL;\n        }\n\n        return prefix + path;\n      };\n\n      UmbraNativeAPI({\n        locateFile: redirectWasmURL\n      }).then(function (Module) {\n        // A workaround for https://github.com/emscripten-core/emscripten/issues/5820\n        delete Module['then'];\n\n        Module['onAbort'] = function (what) {\n          reject(what);\n        };\n\n        wrapNativeFunctions(Module);\n        resolve(instantiate(Module));\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n/**\n * Deinitializes the Emscripten environment.\n *\n * NOTE: We assume here that async IndexedDB loads and stores have already finished.\n * This is the case if Umbra.update() was *not* called before deinitUmbra() on the\n * same frame.\n */\n\nvar deinitUmbra = function deinitUmbra(Umbra) {\n  // Pending requests must be aborted so that native handlers won't get called\n  Umbra.abortDownloads();\n  var privateUmbra = Umbra; // Emscripten's exit(0) call throws an ExitStatus exception\n\n  try {\n    privateUmbra.nativeModule._exit(0);\n  } catch (e) {\n    if (e.name !== 'ExitStatus') {\n      throw e;\n    }\n  }\n};\n\nexport { Assets, ColorSpace, ConnectionStatus, DepthRange, _Math as Math, MatrixFormat, TextureCapability, TextureFormat, TextureType, deinitUmbra, initUmbra };\n//# sourceMappingURL=umbra.esm.js.map\n","/* eslint  @typescript-eslint/camelcase: 0 */\r\n\r\nimport * as THREE from './ThreeWrapper'\r\nimport { TextureFormat } from '@umbra3d/umbrajs'\r\n\r\nfunction makeFormat(format, type, compressed) {\r\n  return { format, type, compressed }\r\n}\r\n\r\n// prettier-ignore\r\nconst ThreeFormats = {\r\n  [TextureFormat.RGB24]: makeFormat(THREE.RGBFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RGBA32]: makeFormat(THREE.RGBAFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RGB565]: makeFormat(THREE.RGBFormat, THREE.UnsignedShort565Type, false),\r\n  [TextureFormat.RG8]: makeFormat(THREE.LuminanceAlphaFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RG16F]: makeFormat(THREE.LuminanceAlphaFormat, THREE.HalfFloatType, false),\r\n  [TextureFormat.BC1]: makeFormat(THREE.RGBA_S3TC_DXT1_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.BC3]: makeFormat(THREE.RGBA_S3TC_DXT5_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.ETC1_RGB]: makeFormat(THREE.RGB_ETC1_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.ASTC_4X4]: makeFormat(THREE.RGBA_ASTC_4x4_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.PVRTC1_RGB4]: makeFormat(THREE.RGB_PVRTC_4BPPV1_Format, THREE.UnsignedByteType, true),\r\n}\r\n\r\nexport { ThreeFormats }\r\n","const normalmapChunk = `\r\n#ifdef USE_NORMALMAP\r\n#ifdef USE_TANGENT\r\n\r\nvec3 tangentToWorld2 = normal;\r\nvec3 tangentToWorld0 = normalize(tangent - tangentToWorld2 * dot(tangentToWorld2, tangent));\r\n\r\n#ifdef UMBRA_FLIP_TANGENT\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld0, tangentToWorld2));\r\n#else\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld2, tangentToWorld0));\r\n#endif\r\n\r\n#if defined(UMBRA_TEXTURE_SUPPORT_BC5) || defined(UMBRA_TEXTURE_SUPPORT_ASTC)\r\nnormal.xy = texture2D(normalMap, vUv).xy * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#elif defined(UMBRA_TEXTURE_SUPPORT_BC3)\r\nnormal.xy = texture2D(normalMap, vUv).yw * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#else\r\nnormal.xyz = texture2D(normalMap, vUv).xyz;\r\nnormal.xy *= 2.0;\r\nnormal.xy -= 1.0;\r\nnormal = normalize(normal);\r\n#endif\r\n\r\nnormal = tangentToWorld0 * normal.x + tangentToWorld1 * normal.y + tangentToWorld2 * normal.z;\r\nnormal = normalize(normal);\r\n#endif\r\n#endif\r\n\r\n`\r\n\r\nconst metalnessMapChunk = `\r\nfloat metalnessFactor = metalness;\r\n#ifdef USE_METALNESSMAP\r\nvec4 texelMetalness = texture2D( metalnessMap, vUv );\r\nmetalnessFactor *= texelMetalness.r;\r\n#endif\r\n`\r\n\r\n// The BSDF function (see 'bsdfs.glsl') squares the roughness so we don't need to do it here.\r\nconst roughnessMapChunk = `\r\nfloat roughnessFactor = roughness;\r\n#ifdef USE_ROUGHNESSMAP\r\nvec4 texelRoughness = texture2D( roughnessMap, vUv );\r\nfloat roughness = 1.0 - texelRoughness.g;\r\nroughnessFactor *= roughness;\r\n#endif\r\n`\r\n\r\n/**\r\n * ShaderPatcher is a preprocessor class that replaces the default PBR texture read\r\n * shader chunks with the correct Umbra versions. Doing it this way instead of completely\r\n * custom shaders allows the application to use its own materials with Umbra scenes.\r\n */\r\nclass ShaderPatcher {\r\n  flipTangent: boolean\r\n  defines: string\r\n\r\n  constructor(formats: string[]) {\r\n    /*\r\n     * World space transform can swap handedness which isn't handled by three.js in tangent space\r\n     * normal maps so we need to be able to flip them ourselves.\r\n     */\r\n    this.flipTangent = false\r\n\r\n    // Texture format feature flags\r\n    this.defines = ''\r\n\r\n    if (formats.indexOf('bc3') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC3\\n'\r\n    }\r\n    if (formats.indexOf('bc5') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC5\\n'\r\n    }\r\n    if (formats.indexOf('astc_4x4') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_ASTC\\n'\r\n    }\r\n  }\r\n\r\n  process(shader: THREE.Shader, renderer: THREE.WebGLRenderer) {\r\n    let frag = shader.fragmentShader\r\n\r\n    if (this.flipTangent) {\r\n      frag = '#define UMBRA_FLIP_TANGENT\\n' + frag\r\n    }\r\n\r\n    frag = this.defines + frag\r\n    frag = frag.replace('#include <normal_fragment_maps>', normalmapChunk)\r\n    frag = frag.replace('#include <metalnessmap_fragment>', metalnessMapChunk)\r\n    frag = frag.replace('#include <roughnessmap_fragment>', roughnessMapChunk)\r\n\r\n    shader.fragmentShader = frag\r\n  }\r\n}\r\n\r\nexport { ShaderPatcher }\r\n","export class ObjectPool<T> {\r\n  usedList: Array<T>\r\n  freeList: Array<T>\r\n\r\n  constructor() {\r\n    this.usedList = []\r\n    this.freeList = []\r\n  }\r\n\r\n  allocate(makeFunc: () => T) {\r\n    let obj: T\r\n    if (this.freeList.length > 0) {\r\n      obj = this.freeList.pop()\r\n    } else {\r\n      obj = makeFunc()\r\n    }\r\n\r\n    this.usedList.push(obj)\r\n    return obj\r\n  }\r\n\r\n  freeAll(clearFunc?: (obj: T) => void) {\r\n    for (let i = 0; i < this.usedList.length; i++) {\r\n      if (clearFunc) {\r\n        clearFunc(this.usedList[i])\r\n      }\r\n      this.freeList.push(this.usedList[i])\r\n    }\r\n    this.usedList.length = 0\r\n  }\r\n\r\n  clear() {\r\n    this.usedList.length = 0\r\n    this.freeList.length = 0\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\n\r\nimport {\r\n  TextureType,\r\n  PlatformFeatures,\r\n  Runtime,\r\n  NativeScene,\r\n  View,\r\n  Renderable,\r\n  ConnectionStatus,\r\n} from '@umbra3d/umbrajs'\r\nimport { PublicLink } from './PublicLink'\r\nimport { ShaderPatcher } from './ShaderPatcher'\r\nimport { ObjectPool } from './ObjectPool'\r\n\r\nexport interface SceneFactory {\r\n  createScene(link: string | PublicLink): UmbraScene\r\n  createSceneWithURL(url: string): UmbraScene\r\n}\r\n\r\ntype UmbraMesh = THREE.Mesh & { isUmbraMesh: true }\r\ntype UmbraCamera = THREE.Camera & { umbraStreamingPosition?: THREE.Vector3 }\r\n\r\ninterface SceneStatus {\r\n  connected: boolean\r\n  sceneInfo?\r\n  numVisible: number\r\n  numShadowCasters: number\r\n  numCachedMaterials: number\r\n  numAssets: number\r\n}\r\n\r\n/**\r\n * A wrapper type for mesh geometry and its material. Only UmbraScene instantiates the\r\n * THREE.Mesh objects that are passed to the renderer. UmbraScene also creates the final\r\n * THREE.Material instance using the textures and transparency flag in 'materialDesc'\r\n */\r\nexport interface MeshDescriptor {\r\n  geometry\r\n  materialDesc\r\n}\r\n\r\ntype DisposeCallback = (m: UmbraScene) => void\r\n\r\nexport class UmbraScene extends THREE.Object3D {\r\n  // User editable config\r\n  quality = 0.5 // Streaming scene quality. Ranges from 0 to 1.\r\n  material: THREE.Material = new THREE.MeshBasicMaterial()\r\n  wireframe = false\r\n  freeze = false\r\n\r\n  // This gets lowered automatically if memory limit is hit\r\n  qualityFactor = 1.0\r\n\r\n  get adjustedQuality() {\r\n    return this.quality * this.qualityFactor\r\n  }\r\n\r\n  // Event callbacks\r\n  onConnected: () => void\r\n  onConnectionError: (error: string) => void\r\n  onDisconnected: () => void\r\n  onConnectionChanged: (connected: ConnectionStatus) => void\r\n  onMeshChanged: () => void\r\n\r\n  // We need to present ourselves as a LOD object to get the update() call\r\n  readonly isLOD = true\r\n  readonly autoUpdate = true\r\n  readonly name = 'UmbraScene'\r\n\r\n  private renderer: THREE.WebGLRenderer\r\n\r\n  private materialPool = new ObjectPool<THREE.Material>()\r\n  private cameraToView = new Map<THREE.Camera, View>()\r\n  private viewLastUsed = new Map<View, number>()\r\n  private shaderPatcher: ShaderPatcher\r\n\r\n  private stats = {\r\n    numVisible: 0,\r\n    numShadowCasters: 0,\r\n    numCachedMaterials: 0,\r\n    numAssets: 0,\r\n  }\r\n\r\n  private diagnostics = {\r\n    missingNormals: {\r\n      checked: false,\r\n      message:\r\n        'Property umbraScene.opaqueMaterial has been deprecated. Use umbraScene.material instead.',\r\n    },\r\n    deprecatedMaterial: {\r\n      checked: false,\r\n      message: 'UmbraScene has no normals so it will appear black.',\r\n    },\r\n    report: (field: string) => {\r\n      if (!this.diagnostics[field].checked) {\r\n        this.diagnostics[field].checked = true\r\n        console.warn(this.diagnostics[field].message)\r\n      }\r\n    },\r\n  }\r\n\r\n  private umbra: {\r\n    runtime: NonNullable<Runtime>\r\n    nativeScene: NonNullable<NativeScene>\r\n  }\r\n\r\n  private onDispose: DisposeCallback\r\n\r\n  // We need to keep track of changes to emit events\r\n  private oldState = {\r\n    status: undefined,\r\n    visibleIDs: new Set<number>(),\r\n  }\r\n\r\n  // Temporary values we don't want to reallocate every frame\r\n  private matrixWorldInverse = new THREE.Matrix4()\r\n  private projScreenMatrix = new THREE.Matrix4()\r\n  private cameraWorldPosition = new THREE.Vector3()\r\n  private tempVector = new THREE.Vector3()\r\n  private dirVector = new THREE.Vector3()\r\n\r\n  // UmbraScene should be instantiated using Umbra.createScene()\r\n  constructor(\r\n    runtime: Runtime,\r\n    scene: NativeScene,\r\n    renderer: THREE.WebGLRenderer,\r\n    features: PlatformFeatures,\r\n    onDispose: DisposeCallback = undefined,\r\n  ) {\r\n    super()\r\n\r\n    this.renderer = renderer\r\n    this.shaderPatcher = new ShaderPatcher(features.formats)\r\n    this.onDispose = onDispose\r\n\r\n    // We need to flip the Z-axis since scenes are stored in \"left-handed Y is up\" coordinate system\r\n    this.scale.set(1.0, 1.0, -1.0)\r\n\r\n    // Add API objects under their own object for clarity\r\n    this.umbra = {\r\n      runtime: runtime,\r\n      nativeScene: scene,\r\n    }\r\n  }\r\n\r\n  get opaqueMaterial() {\r\n    this.diagnostics.report('deprecatedMaterial')\r\n    return this.material\r\n  }\r\n\r\n  set opaqueMaterial(mat) {\r\n    this.diagnostics.report('deprecatedMaterial')\r\n    this.material = mat\r\n  }\r\n\r\n  getInfo(): SceneStatus {\r\n    const info = { connected: this.umbra.nativeScene.isConnected() }\r\n    if (info.connected) {\r\n      info['sceneInfo'] = this.umbra.nativeScene.getInfo()\r\n    }\r\n    Object.assign(info, this.stats)\r\n    return info as SceneStatus\r\n  }\r\n\r\n  getBounds(): THREE.Box3 {\r\n    if (!this.umbra.nativeScene.isConnected()) {\r\n      return undefined\r\n    }\r\n\r\n    const info = this.umbra.nativeScene.getInfo()\r\n    const bounds = info.bounds\r\n    const min = bounds.mn\r\n    const max = bounds.mx\r\n    const box = new THREE.Box3(\r\n      new THREE.Vector3(min[0], min[1], min[2]),\r\n      new THREE.Vector3(max[0], max[1], max[2]),\r\n    )\r\n    return box\r\n  }\r\n\r\n  getCenter(): THREE.Vector3 {\r\n    const bounds = this.getBounds()\r\n    bounds.applyMatrix4(this.matrixWorld)\r\n    const center = new THREE.Vector3()\r\n    bounds.getCenter(center)\r\n    return center\r\n  }\r\n\r\n  private pruneOldViews(frame: number): void {\r\n    /**\r\n     * We get no notification when cameras are removed from the scene graph\r\n     * so we'll go and remove old views.\r\n     */\r\n    for (const [view, lastUsed] of this.viewLastUsed) {\r\n      if (frame - lastUsed > 1000) {\r\n        for (const [cam, view2] of this.cameraToView) {\r\n          if (view2 === view) {\r\n            this.cameraToView.delete(cam)\r\n            break\r\n          }\r\n        }\r\n        view.destroy()\r\n        this.viewLastUsed.delete(view)\r\n      }\r\n    }\r\n  }\r\n\r\n  private updateStreamingEvents(visibleIDs: Set<number>) {\r\n    const then = this.oldState.visibleIDs\r\n    const now = visibleIDs\r\n\r\n    if (this.onMeshChanged) {\r\n      if (then.size !== now.size) {\r\n        this.onMeshChanged()\r\n      } else {\r\n        for (const id of now) {\r\n          if (!then.has(id)) {\r\n            this.onMeshChanged()\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.oldState.visibleIDs = visibleIDs\r\n  }\r\n\r\n  // This gets called by ThreejsIntegration's periodic update handler\r\n  private updateNetworkEvents() {\r\n    const status = this.umbra.nativeScene.connectionStatus()\r\n\r\n    if (this.oldState.status !== status) {\r\n      if (this.onConnectionChanged) {\r\n        this.onConnectionChanged(status)\r\n      }\r\n\r\n      switch (status) {\r\n        case ConnectionStatus.ConnectionError:\r\n          if (this.onConnectionError) {\r\n            this.onConnectionError('Could not connect')\r\n          }\r\n          break\r\n        case ConnectionStatus.Connected:\r\n          if (this.onConnected) {\r\n            this.onConnected()\r\n          }\r\n          break\r\n        case ConnectionStatus.Connecting:\r\n          if (this.onDisconnected) {\r\n            this.onDisconnected()\r\n          }\r\n          break\r\n      }\r\n    }\r\n\r\n    this.oldState.status = status\r\n  }\r\n\r\n  update = function(camera: UmbraCamera) {\r\n    let parentScene\r\n\r\n    if (this.freeze) {\r\n      return\r\n    }\r\n\r\n    this.traverseAncestors(obj => {\r\n      if (obj.isScene) {\r\n        parentScene = obj\r\n      }\r\n    })\r\n\r\n    if (!parentScene && !parentScene.isScene) {\r\n      console.log('No parent scene found')\r\n      return\r\n    }\r\n\r\n    function findLights(scene: THREE.Scene) {\r\n      const lights = []\r\n      scene.traverseVisible((obj: any) => {\r\n        if (obj.isDirectionalLight && obj.castShadow) {\r\n          lights.push(obj)\r\n        }\r\n      })\r\n\r\n      return lights\r\n    }\r\n\r\n    let lights: THREE.DirectionalLight[] = []\r\n\r\n    if (this.renderer.shadowMap.enabled) {\r\n      lights = findLights(parentScene)\r\n    }\r\n\r\n    let view = this.cameraToView.get(camera) as View\r\n\r\n    if (!view) {\r\n      view = this.umbra.runtime.createView()\r\n      this.cameraToView.set(camera, view)\r\n    }\r\n\r\n    const frame: number = this.renderer.info.render.frame\r\n\r\n    this.viewLastUsed.set(view, frame)\r\n    this.pruneOldViews(frame)\r\n\r\n    this.umbra.nativeScene.setTransform(this.matrixWorld.elements)\r\n\r\n    // If we are using a PBR material then we might need to flip the tangent vector\r\n    if (this.isPBREnabled()) {\r\n      // TODO(pvaananen): Would be nice to avoid recalculating the determinant every frame.\r\n      const flip = this.matrixWorld.determinant() < 0\r\n\r\n      if (flip !== this.shaderPatcher.flipTangent) {\r\n        this.shaderPatcher.flipTangent = flip\r\n        this.materialPool.clear()\r\n      }\r\n    }\r\n\r\n    this.matrixWorldInverse.getInverse(camera.matrixWorld)\r\n    this.projScreenMatrix.multiplyMatrices(\r\n      camera.projectionMatrix,\r\n      this.matrixWorldInverse,\r\n    )\r\n\r\n    const dir = this.dirVector\r\n    const vector3 = this.tempVector\r\n\r\n    const lightDirections = lights.map(light => {\r\n      dir.setFromMatrixPosition(light.target.matrixWorld)\r\n      vector3.setFromMatrixPosition(light.matrixWorld)\r\n      dir.sub(vector3)\r\n      return [dir.x, dir.y, dir.z]\r\n    }, lights)\r\n\r\n    // By default we stream in meshes around the camera, but the user can override it too.\r\n    if (camera.umbraStreamingPosition) {\r\n      this.cameraWorldPosition.copy(camera.umbraStreamingPosition)\r\n    } else {\r\n      camera.getWorldPosition(this.cameraWorldPosition)\r\n    }\r\n\r\n    const pos = this.cameraWorldPosition\r\n    view.setCamera(\r\n      this.projScreenMatrix.elements,\r\n      [pos.x, pos.y, pos.z],\r\n      this.adjustedQuality,\r\n      lightDirections,\r\n    )\r\n\r\n    this.stats.numVisible = 0\r\n    this.stats.numAssets = this.umbra.runtime.assets.size\r\n\r\n    /**\r\n     * Next we find the visible Umbra meshes and add them to the scene graph.\r\n     * This is pretty tricky, because we want more meshes to show up in the shadow map pass\r\n     * than in the main camera render pass. This is why 'mesh.castShadow' doesn't help here\r\n     * since it does the exact opposite.\r\n     *\r\n     * We use a workaround that first adds the common meshes as children of the Umbra scene\r\n     * object but stashes the shadow caster meshes (visible only from lights) to an extra\r\n     * list 'shadowCasters'.\r\n     *\r\n     * The trick is that after the children, we add a 'proxy' object that presents itself\r\n     * as a 'LOD' object. As a consequence it gets its own update() call, and there we go\r\n     * and add the shadow casters also to the children list. At this point the opaque\r\n     * renderable objects were already collected to their own render list, so 'children'\r\n     * is safe to modify.\r\n     *\r\n     * In essence, the flow is the following.\r\n     *\r\n     *    three.js                           scene object (this)\r\n     *    --------                           ------------------\r\n     *    Starts traversing three.js scene graph\r\n     *    Calls scene.update(cam) ---------> Updates views\r\n     *                                       Fetches a list of renderables\r\n     *                                       Adds common meshes to this.children\r\n     *    Adds scene.children to\r\n     *      the render list\r\n     *    Starts rendering scene.children\r\n     *    Calls proxy.update(cam) ---------> Proxy goes and adds shadow casters to this.children\r\n     *    Starts the shadow pass\r\n     *    Adds scene.children to shadow\r\n     *      render list\r\n     *    Renders the shadow pass\r\n     *    Renders the opaque pass\r\n     *    Renders the transparent pass\r\n     *\r\n     * As you can see, the 'this.children' list is mutated halfway through the renderer's\r\n     * scene graph traversal so that different object list ends up to the shadow pass render code.\r\n     */\r\n\r\n    // First filter away last frame's meshes\r\n    const newChildren = []\r\n    for (let i = 0; i < this.children.length; i++) {\r\n      if (!this.children[i].isUmbraMesh) {\r\n        newChildren.push(this.children[i])\r\n      }\r\n    }\r\n\r\n    this.children = newChildren\r\n\r\n    const shadowCasters = []\r\n\r\n    const proxy = new THREE.Object3D() as any\r\n    proxy.isLOD = true\r\n    proxy.autoUpdate = true\r\n    proxy.update = cam => {\r\n      // Remove the proxy itself\r\n      this.children.pop()\r\n\r\n      // Add the shadow casters\r\n      for (let i = 0; i < shadowCasters.length; i++) {\r\n        this.children.push(shadowCasters[i])\r\n      }\r\n    }\r\n\r\n    this.materialPool.freeAll(mat => {\r\n      // Remove references to textures so GC can release the three.js objects\r\n      delete mat.map\r\n      delete mat.normalMap\r\n      delete mat.metalnessMap\r\n      delete mat.roughnessMap\r\n    })\r\n\r\n    const batchSize = 200\r\n    let visible: Renderable[] = []\r\n    const visibleIDs: Set<number> = new Set()\r\n\r\n    do {\r\n      visible = view.getVisible(batchSize)\r\n\r\n      for (let i = 0; i < visible.length; i++) {\r\n        const { materialDesc, geometry } = visible[i].mesh as MeshDescriptor\r\n        visibleIDs.add(visible[i].id)\r\n\r\n        // Fetch a new material from the pool if we already have free ones. This avoids\r\n        // extra allocations and more importantly 'onBeforeCompile' calls.\r\n        const material = this.materialPool.allocate(() => this.material.clone())\r\n\r\n        material.wireframe = this.wireframe\r\n        material.transparent =\r\n          materialDesc.transparent || this.material.transparent\r\n        if (material.transparent) {\r\n          material.opacity = this.material.opacity\r\n        }\r\n\r\n        material.onBeforeCompile = (shader, renderer) => {\r\n          /**\r\n           * If the original material already had a custom preprocessor callback we need to call\r\n           * that first. We need to use 'apply' in case the callback uses 'this' reference to\r\n           * access some material properties.\r\n           */\r\n          if (this.material.onBeforeCompile) {\r\n            this.material.onBeforeCompile.apply(material, [shader, renderer])\r\n          }\r\n\r\n          this.shaderPatcher.process(shader, renderer)\r\n        }\r\n\r\n        const diffuseMap = materialDesc.textures[TextureType.Diffuse]\r\n        const normalMap = materialDesc.textures[TextureType.Normal]\r\n        const metalglossMap = materialDesc.textures[TextureType.Specular]\r\n\r\n        if (diffuseMap && diffuseMap.isTexture) {\r\n          material.map = diffuseMap\r\n        }\r\n\r\n        if (normalMap && normalMap.isTexture) {\r\n          material.normalMap = normalMap\r\n          material.vertexTangents = true\r\n          material.normalMapType = THREE.TangentSpaceNormalMap\r\n        }\r\n\r\n        if (metalglossMap && metalglossMap.isTexture) {\r\n          material.metalnessMap = metalglossMap\r\n          material.metalness = 1.0\r\n          material.roughnessMap = metalglossMap\r\n          material.roughness = 1.0\r\n        }\r\n\r\n        /**\r\n         * We instatiate new Mesh objects each frame but the constructor is very cheap\r\n         * and the references should live for a very short time since 'this.children'\r\n         * gets cleared every frame. However if this still causes too much allocations\r\n         * an object pool could help.\r\n         */\r\n        const mesh = new THREE.Mesh(geometry, material) as UmbraMesh\r\n        mesh.isUmbraMesh = true\r\n        mesh.matrixWorld.copy(this.matrixWorld)\r\n        mesh.castShadow = this.castShadow\r\n        mesh.receiveShadow = this.receiveShadow\r\n        mesh.visible = true\r\n        this.children.push(mesh)\r\n\r\n        if ((visible[i].mask & 0x01) === 0) {\r\n          shadowCasters.push(mesh)\r\n          mesh.frustumCulled = true\r\n        } else {\r\n          this.children.push(mesh)\r\n          mesh.frustumCulled = false\r\n        }\r\n      }\r\n\r\n      this.stats.numVisible += visible.length\r\n    } while (visible.length === batchSize)\r\n\r\n    // Emit a warning if normals are required but missing\r\n    if (!this.diagnostics.missingNormals.checked && this.isPBREnabled()) {\r\n      for (let i = 0; i < this.children.length; i++) {\r\n        if (!this.children[i].isUmbraMesh) {\r\n          continue\r\n        }\r\n        if (!('normal' in this.children[i].geometry.attributes)) {\r\n          this.diagnostics.report('missingNormals')\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    this.stats.numShadowCasters = shadowCasters.length\r\n    this.stats.numCachedMaterials =\r\n      this.materialPool.usedList.length + this.materialPool.freeList.length\r\n\r\n    if (shadowCasters.length > 0) {\r\n      this.children.push(proxy)\r\n    }\r\n\r\n    this.updateStreamingEvents(visibleIDs)\r\n  }\r\n\r\n  dispose() {\r\n    if (this.onDispose) {\r\n      this.onDispose(this)\r\n    }\r\n\r\n    for (const view of this.cameraToView.values()) {\r\n      view.destroy()\r\n    }\r\n\r\n    // Remove all Umbra meshes from children\r\n    this.children = this.children.filter((x: UmbraMesh) => !x.isUmbraMesh)\r\n\r\n    // Dispose all cached materials\r\n    this.materialPool.freeAll(mat => mat.dispose())\r\n\r\n    // We don't dispose mesh geometries here because they are managed by the Runtime\r\n\r\n    this.umbra.nativeScene.destroy()\r\n    // Runtime must be manually freed by the user with .dispose() of the API object\r\n  }\r\n\r\n  private isPBREnabled() {\r\n    return 'normalMapType' in this.material\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\nimport {\r\n  initUmbra,\r\n  deinitUmbra,\r\n  Math as UmbraMath,\r\n  Assets,\r\n  UmbraInstance,\r\n  PlatformFeatures,\r\n  TextureCapability,\r\n  TextureType,\r\n  ColorSpace,\r\n  Runtime,\r\n  NativeScene,\r\n  VertexBuffer,\r\n} from '@umbra3d/umbrajs'\r\nimport { ThreeFormats } from './ThreeFormats'\r\nimport { PublicLink } from './PublicLink'\r\nimport { UmbraScene, SceneFactory, MeshDescriptor } from './Scene'\r\nimport { WebGLRenderer } from 'three'\r\nimport { HeapBufferView } from '@umbra3d/umbrajs/dist/Heap'\r\n\r\nfunction makeBoundingSphere(aabb: UmbraMath.BoundingBox) {\r\n  const min = aabb[0]\r\n  const max = aabb[1]\r\n  const size = new THREE.Vector3(\r\n    max[0] - min[0],\r\n    max[1] - min[1],\r\n    max[2] - min[2],\r\n  )\r\n  const pos = new THREE.Vector3(\r\n    min[0] + size.x * 0.5,\r\n    min[1] + size.y * 0.5,\r\n    min[2] + size.z * 0.5,\r\n  )\r\n  return new THREE.Sphere(pos, size.length())\r\n}\r\n\r\nclass ThreejsIntegration implements SceneFactory {\r\n  // Upper VRAM memory use limit in bytes\r\n  memoryLimit = 500 * 1024 * 1024\r\n  // Upper total download size limit in bytes. Turned off by default.\r\n  downloadLimit = 0\r\n\r\n  onStreamingUpdate: (progress: number) => void\r\n  onStreamingComplete: () => void\r\n\r\n  // An instance of the umbrajs library for debugging\r\n  umbrajs: UmbraInstance\r\n\r\n  private runtime: Runtime\r\n  private features: PlatformFeatures\r\n  private renderer: WebGLRenderer\r\n  private updateTask: number = undefined\r\n\r\n  private assetSizes = new Map<any, number>()\r\n  private textureMemoryUsed = 0\r\n  private meshMemoryUsed = 0\r\n  private lastQualityLowerFrame = -1\r\n\r\n  private get memoryUsed() {\r\n    return this.textureMemoryUsed + this.meshMemoryUsed\r\n  }\r\n\r\n  private umbraScenes = new Set<UmbraScene>()\r\n\r\n  private oldState = {\r\n    progress: 0,\r\n    downloadLimitReached: false,\r\n  }\r\n\r\n  // This class should be instantiated via initUmbra()\r\n  constructor(umbrajs: UmbraInstance, renderer: WebGLRenderer) {\r\n    let context: WebGLRenderingContext\r\n    // three.js r106 has no 'getContext'\r\n    if ('getContext' in renderer) {\r\n      context = renderer.getContext()\r\n    } else {\r\n      context = (renderer as any).context\r\n    }\r\n    const features = umbrajs.getPlatformFeatures(context)\r\n\r\n    // Three.js does not support BC5 compressed formats so we manually disable them.\r\n    features.capabilityMask &= ~TextureCapability.BC5\r\n\r\n    this.umbrajs = umbrajs\r\n    this.runtime = umbrajs.createRuntime(features)\r\n    this.renderer = renderer\r\n    this.features = features\r\n\r\n    this.startEventUpdate(1000 / 60)\r\n  }\r\n\r\n  startEventUpdate(interval: number) {\r\n    this.stopEventUpdate()\r\n    this.updateTask = window.setInterval(() => {\r\n      this.updateEvents()\r\n      this.umbraScenes.forEach(m => (m as any).updateNetworkEvents())\r\n    }, interval)\r\n  }\r\n\r\n  stopEventUpdate() {\r\n    if (typeof this.updateTask !== 'undefined') {\r\n      window.clearInterval(this.updateTask)\r\n      delete this.updateTask\r\n    }\r\n  }\r\n\r\n  update(timeBudget = 10) {\r\n    const downloadLimitReached =\r\n      this.downloadLimit !== 0 &&\r\n      this.getStats().maxBytesDownloaded >= this.downloadLimit\r\n\r\n    // If the limit is reached we freeze all updates. View frustum culling\r\n    // will still work, but the streaming set is kept static.\r\n    if (downloadLimitReached) {\r\n      if (!this.oldState.downloadLimitReached) {\r\n        this.umbrajs.abortDownloads()\r\n      }\r\n    } else {\r\n      const start = performance.now()\r\n      this.runtime.update()\r\n      const updateTook = performance.now() - start\r\n      this.runtime.loadAssets(this.handlers, timeBudget - updateTook)\r\n    }\r\n\r\n    this.oldState.downloadLimitReached = downloadLimitReached\r\n\r\n    if (this.memoryUsed / this.memoryLimit < 0.25) {\r\n      this.adjustQuality(1.1)\r\n    }\r\n  }\r\n\r\n  createScene(link: string | PublicLink): UmbraScene {\r\n    let url: string\r\n    if (typeof link === 'string') {\r\n      url = link\r\n    } else if (typeof link === 'object') {\r\n      if (('token' in link) as any) {\r\n        console.warn(\r\n          'Connection with {token, projectID, modelID} is deprecated. Use {key, project, model} or a string locator instad.',\r\n        )\r\n        link.key = link['token']\r\n        link.project = link['projectID']\r\n        link.model = link['modelID']\r\n      }\r\n\r\n      if (!('key' in link && 'project' in link && 'model' in link)) {\r\n        throw new Error(\r\n          'createScene() expects an object with properties \"key\", \"project\", and \"model\"',\r\n        )\r\n      }\r\n      url = `key=${link.key}&project=${link.project}&model=${link.model}`\r\n    } else {\r\n      throw new TypeError('expected either string or an object argument')\r\n    }\r\n\r\n    const model = new UmbraScene(\r\n      this.runtime,\r\n      this.runtime.connectPublic(url),\r\n      this.renderer,\r\n      this.features,\r\n      m => this.umbraScenes.delete(m),\r\n    )\r\n    this.umbraScenes.add(model)\r\n    return model\r\n  }\r\n\r\n  createSceneWithURL(url: string): UmbraScene {\r\n    const scene = this.runtime.connectLocal(url)\r\n    const model = new UmbraScene(\r\n      this.runtime,\r\n      scene,\r\n      this.renderer,\r\n      this.features,\r\n      m => this.umbraScenes.delete(m),\r\n    )\r\n    this.umbraScenes.add(model)\r\n    return model\r\n  }\r\n\r\n  /**\r\n   * Returns streaming information. We can't tell which files came from the browser cache\r\n   * so we report lower and upper limits of the true download size.\r\n   *\r\n   * The returned object has the following fields:\r\n   *\r\n   *  'maxBytesDownloaded' an upper limit assuming no file was cached,\r\n   *  'minBytesDownloaded' the corresponding lower limit assuming all duplicates came from cache.\r\n   *  'textureMemoryUse' the number of bytes used by texture assets\r\n   *  'meshMemoryUse' the number of bytes used by mesh assets\r\n   *\r\n   */\r\n  getStats() {\r\n    return Object.assign(this.umbrajs.getStreamingInfo(), {\r\n      textureMemoryUsed: this.textureMemoryUsed,\r\n      meshMemoryUsed: this.meshMemoryUsed,\r\n    })\r\n  }\r\n\r\n  private canFitInMemory(bytes: number) {\r\n    return this.memoryUsed + bytes < this.memoryLimit\r\n  }\r\n\r\n  private adjustQuality(factor: number) {\r\n    if (this.renderer.info.render.frame == this.lastQualityLowerFrame) {\r\n      return\r\n    }\r\n    this.umbraScenes.forEach((m: UmbraScene) => {\r\n      m.qualityFactor = Math.min(1, m.qualityFactor * factor)\r\n    })\r\n    this.lastQualityLowerFrame = this.renderer.info.render.frame\r\n  }\r\n\r\n  // Converts a texture descriptor and a pixel buffer to a three.js compatible texture\r\n  private makeTexture(\r\n    info,\r\n    buffer: HeapBufferView,\r\n    glformat,\r\n  ): THREE.CompressedTexture | THREE.DataTexture {\r\n    const pixelData = buffer.getArray().slice() as THREE.TypedArray\r\n\r\n    let tex\r\n    if (glformat.compressed) {\r\n      const mip = {\r\n        width: info.width,\r\n        height: info.height,\r\n        data: pixelData as Uint8ClampedArray,\r\n      }\r\n      tex = new THREE.CompressedTexture([mip], info.width, info.height)\r\n    } else {\r\n      tex = new THREE.DataTexture(pixelData, info.width, info.height)\r\n    }\r\n\r\n    tex.format = glformat.format\r\n    tex.type = glformat.type\r\n    tex.magFilter = THREE.LinearFilter\r\n    tex.minFilter = THREE.LinearFilter\r\n    tex.anisotropy = 0\r\n\r\n    return tex\r\n  }\r\n\r\n  // AssetLoad handlers that create and remove materials, textures, and meshes\r\n  private handlers = {\r\n    LoadMaterial: (load: Assets.LoadMaterial) => {\r\n      load.prepare(this.runtime.addAsset(load.data))\r\n      load.finish(Assets.AssetLoadResult.Success)\r\n    },\r\n    UnloadMaterial: (unload: Assets.Unload) => {\r\n      this.runtime.removeAsset(unload, unload.data)\r\n      unload.finish()\r\n    },\r\n    LoadTexture: (load: Assets.LoadTexture) => {\r\n      const info = load.data.info\r\n      const buffer = load.data.buffer\r\n\r\n      let glformat\r\n\r\n      if (ThreeFormats.hasOwnProperty(info.format)) {\r\n        glformat = ThreeFormats[info.format]\r\n      }\r\n\r\n      if (!glformat) {\r\n        // Add a dummy object for unknown formats. They will appear as a solid black color.\r\n        console.log('Unknown texture format', info.format)\r\n        this.runtime.addAsset({ isTexture: false })\r\n        return\r\n      }\r\n\r\n      if (!this.canFitInMemory(buffer.size)) {\r\n        load.finish(Assets.AssetLoadResult.OutOfMemory)\r\n        this.adjustQuality(0.8)\r\n        return\r\n      }\r\n\r\n      const tex = this.makeTexture(info, buffer, glformat)\r\n\r\n      /**\r\n       * A workaround for the case where we directly output colors in gamma space.\r\n       * We make diffuse textures linear to avoid gamma expansion at texture fetch time.\r\n       * This is slightly wrong because texture filtering and shading will be done\r\n       * in gamma space, but this behavior is what people usually expect.\r\n       */\r\n      if (\r\n        info.textureType === TextureType.Diffuse &&\r\n        !this.renderer.gammaOutput\r\n      ) {\r\n        tex.encoding = THREE.LinearEncoding\r\n      } else {\r\n        tex.encoding =\r\n          info.colorSpace === ColorSpace.Linear\r\n            ? THREE.LinearEncoding\r\n            : THREE.sRGBEncoding\r\n      }\r\n\r\n      tex.needsUpdate = true\r\n\r\n      this.textureMemoryUsed += buffer.size\r\n      this.assetSizes.set(tex, buffer.size)\r\n      load.prepare(this.runtime.addAsset(tex))\r\n      load.finish(Assets.AssetLoadResult.Success)\r\n    },\r\n    UnloadTexture: (unload: Assets.Unload) => {\r\n      // Free texture data only if it's not a dummy texture\r\n      if (unload.data.isTexture) {\r\n        unload.data.dispose()\r\n      }\r\n\r\n      if (this.assetSizes.has(unload.data)) {\r\n        this.textureMemoryUsed -= this.assetSizes.get(unload.data)\r\n        this.assetSizes.delete(unload.data)\r\n      }\r\n\r\n      this.runtime.removeAsset(unload, unload.data)\r\n      unload.finish()\r\n    },\r\n    LoadMesh: (load: Assets.LoadMesh) => {\r\n      /**\r\n       * LoadMesh gives us all the vertex data in load.data.buffers.\r\n       * The buffers are only valid during this handler, and the memory will be\r\n       * reused for other meshes later. Therefore we make copies of the arrays\r\n       * for three.js which is something we would have to do anyway.\r\n       */\r\n\r\n      const attribs = {\r\n        position: { components: 3 },\r\n        normal: { components: 3 },\r\n        uv: { components: 2 },\r\n        tangent: { components: 3 },\r\n      }\r\n\r\n      let totalSize = 0\r\n      Object.keys(attribs)\r\n        .map(name => load.data.buffers[name])\r\n        .forEach(buffer => {\r\n          if (buffer) {\r\n            totalSize += buffer.data.size\r\n          }\r\n        })\r\n\r\n      if (!this.canFitInMemory(totalSize)) {\r\n        load.finish(Assets.AssetLoadResult.OutOfMemory)\r\n        this.adjustQuality(0.8)\r\n        return\r\n      }\r\n\r\n      const geometry = new THREE.BufferGeometry()\r\n      const indexArray = load.data.buffers['index'].data.getArray()\r\n      const indices = Array.from(indexArray as any)\r\n      geometry.setIndex(indices as number[])\r\n      geometry.boundingSphere = makeBoundingSphere(load.data.bounds)\r\n\r\n      Object.keys(attribs).forEach(name => {\r\n        const buffer = load.data.buffers[name] as VertexBuffer\r\n\r\n        if (buffer) {\r\n          const view = buffer.data\r\n          const array = view.getArray()\r\n          const attrib = new THREE.Float32BufferAttribute(\r\n            array.slice(),\r\n            attribs[name].components,\r\n          )\r\n          geometry.addAttribute(name, attrib)\r\n        }\r\n      })\r\n\r\n      const meshDescriptor: MeshDescriptor = {\r\n        geometry,\r\n        materialDesc: load.data.material,\r\n      }\r\n\r\n      this.meshMemoryUsed += totalSize\r\n      this.assetSizes.set(meshDescriptor, totalSize)\r\n      load.prepare(this.runtime.addAsset(meshDescriptor))\r\n      load.finish(Assets.AssetLoadResult.Success)\r\n    },\r\n    UnloadMesh: (unload: Assets.Unload) => {\r\n      const meshDesc = unload.data\r\n      if (this.assetSizes.has(unload.data)) {\r\n        this.meshMemoryUsed -= this.assetSizes.get(unload.data)\r\n        this.assetSizes.delete(unload.data)\r\n      }\r\n      // Tell Umbra's runtime that this asset doesn't exist anymore and finish the job\r\n      this.runtime.removeAsset(unload, meshDesc)\r\n      // Release three.js's resources\r\n      meshDesc.geometry.dispose()\r\n      unload.finish()\r\n    },\r\n  }\r\n\r\n  private updateEvents() {\r\n    const progress = this.getStreamingProgress()\r\n    if (this.oldState.progress != progress) {\r\n      if (this.onStreamingUpdate) {\r\n        this.onStreamingUpdate(progress)\r\n      }\r\n      if (progress === 1.0 && this.onStreamingComplete) {\r\n        this.onStreamingComplete()\r\n      }\r\n    }\r\n\r\n    this.oldState.progress = progress\r\n  }\r\n\r\n  getStreamingProgress(): number {\r\n    return this.runtime.getStreamingProgress()\r\n  }\r\n\r\n  dispose() {\r\n    this.stopEventUpdate()\r\n    this.umbraScenes.forEach((m: UmbraScene) => m.dispose())\r\n\r\n    this.runtime.assets.forEach((asset, userPtr) => {\r\n      if ('geometry' in asset) {\r\n        asset.geometry.dispose()\r\n      }\r\n      if ('dispose' in asset) {\r\n        asset.dispose()\r\n      }\r\n    })\r\n\r\n    this.assetSizes.clear()\r\n    this.textureMemoryUsed = 0\r\n    this.meshMemoryUsed = 0\r\n\r\n    this.runtime.destroy()\r\n    this.runtime = undefined\r\n\r\n    deinitUmbra(this.umbrajs)\r\n  }\r\n}\r\n\r\nexport function initWithThreeJS(\r\n  renderer: THREE.WebGLRenderer,\r\n  userConfig: { wasmURL?: string },\r\n) {\r\n  if (!renderer) {\r\n    throw new TypeError('\"renderer\" should be of type THREE.WebGLRenderer')\r\n  }\r\n\r\n  return initUmbra(userConfig).then(Umbra => {\r\n    return new ThreejsIntegration(Umbra, renderer)\r\n  })\r\n}\r\n\r\n// Hide the library object constructor by wrapping it in an interface\r\ninterface UmbrajsThree extends ThreejsIntegration {}\r\nexport { UmbraScene as Model, UmbrajsThree }\r\nexport { Loader } from './Loader'\r\n","import * as THREE from './ThreeWrapper'\r\nimport { SceneFactory } from './Scene'\r\n\r\nexport class Loader extends THREE.Loader {\r\n  private Umbra: SceneFactory\r\n  constructor(Umbra: SceneFactory, manager?: THREE.LoadingManager) {\r\n    super(manager)\r\n    this.Umbra = Umbra\r\n  }\r\n\r\n  load(url: string, onLoad, onProgress, onError) {\r\n    const model = this.Umbra.createScene(url)\r\n\r\n    if (onError) {\r\n      model.onConnectionError = err => {\r\n        onError(err)\r\n      }\r\n    }\r\n    model.onConnected = () => {\r\n      delete model.onConnectionError\r\n      if (onProgress) {\r\n        onProgress(1.0)\r\n      }\r\n      onLoad(model)\r\n    }\r\n  }\r\n}\r\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","_scriptDir","MatrixFormat","TextureType","TextureFormat","ColorSpace","LogLevel","TransferStatus","HeaderError","HttpMethod","LibraryInfo","InvalidUserPointer","VertexAttribute","DepthRange","TextureCapability","DataBufferFlags","RuntimeFlags","ConnectionStatus","CopyStatus","SceneCopyDestinationType","SceneCopySourceType","FilterShapeType","AssetType","AssetLoadResult","UmbraNativeAPI","document","currentScript","src","undefined","c","m","aa","hasOwnProperty","arguments","thisProgram","quit","a","b","preRun","postRun","r","indexOf","substr","lastIndexOf","ba","print","console","log","bind","v","printErr","warn","da","w","ea","fa","y","ia","ja","f64-rem","debugger","WebAssembly","z","A","B","ka","qa","d","e","F","Math","max","D","subarray","slice","C","set","Uint8Array","G","va","wa","_H","xa","ya","ra","TextDecoder","sa","decode","f","g","String","fromCharCode","k","E","na","charCodeAt","ta","ua","za","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","Aa","TOTAL_MEMORY","Ba","shift","Nb","Kb","dynCall_v","dynCall_vi","wasmMemory","Memory","initial","buffer","byteLength","Ca","Ea","Fa","Ga","Ha","Ia","Ja","unshift","I","Ka","La","Ma","J","startsWith","preloadedImages","preloadedAudios","Na","locateFile","Oa","wasmBinary","Qa","asm","exports","monitorRunDependencies","clearInterval","instance","fetch","Promise","credentials","then","ok","arrayBuffer","instantiate","env","global","NaN","Infinity","global.Math","asm2wasm","instantiateWasm","instantiateStreaming","memory","table","Table","maximum","element","__memory_base","__table_base","Sa","alert","h","l","n","u","q","t","XMLHttpRequest","open","withCredentials","responseType","x","qc","rc","onload","status","response","URLsDownloaded","maxBytesDownloaded","has","add","minBytesDownloaded","dynCall_viii","dynCall_viiii","V","pc","onerror","onabort","setRequestHeader","btoa","split","send","Ra","push","Ta","K","Wa","Xa","_L","_M","Ya","Za","$a","pop","ab","this","fromWireType","N","O","bb","cb","replace","db","Function","eb","Error","name","message","stack","create","fb","gb","P","forEach","hb","ib","Q","jb","R","Zb","kb","S","lb","Ob","T","mb","nb","ob","apply","qb","Ib","Sb","pb","sb","FUNCTION_TABLE","join","tb","ub","vb","xb","W","yb","zb","Ab","Bb","Y","_Jb","Pb","X","Z","Hb","Fb","Gb","Rb","Qb","Tb","Ub","Vb","Xb","pointerLockElement","canvas","mozPointerLockElement","webkitPointerLockElement","msPointerLockElement","preloadPlugins","Yb","$b","MozBlobBuilder","WebKitBlobBuilder","ac","window","URL","webkitURL","canHandle","test","handle","Blob","type","bc","size","ha","append","getBlob","createObjectURL","Image","complete","createElement","width","height","getContext","drawImage","revokeObjectURL",".ogg",".wav",".mp3","Audio","addEventListener","noExitRuntime","setTimeout","cc","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","msRequestPointerLock","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","msExitPointerLock","elementPointerLock","preventDefault","ec","fc","gc","hc","parentNode","fullscreenElement","mozFullScreenElement","msFullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","exitFullscreen","ic","SDL","screen","jc","kc","insertBefore","removeChild","onFullScreen","onFullscreen","appendChild","requestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","webkitRequestFullScreen","tc","mc","cancelFullScreen","mozCancelFullScreen","msExitFullscreen","webkitCancelFullScreen","nc","Lb","requestAnimationFrame","Date","now","jpg","jpeg","png","bmp","ogg","wav","mp3","oc","forcedAspectRatio","round","min","style","removeProperty","setProperty","Ac","uc","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","sc","onupgradeneeded","target","result","transaction","objectStoreNames","contains","objectStore","createObjectStore","onsuccess","error","vc","yc","onExit","_exit","_fflush","InternalError","Gc","Hc","Dc","BindingError","count_emval_handles","get_first_emval","UnboundTypeError","requestFullScreen","setCanvasSize","pauseMainLoop","resumeMainLoop","floor","setStatus","statusMessage","Mb","preMainLoop","postMainLoop","audio","setImmediate","data","stopPropagation","postMessage","Eb","getUserMedia","navigator","mozGetUserMedia","createContext","antialias","alpha","GL","GLctx","dc","dateNow","performance","Kc","j","$","Ua","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","_","___errno_location","M","lc","stat","ca","L","map","concat","Wb","Da","read","write","toWireType","argPackAdvance","readValueFromPointer","Jb","p","rb","wb","U","o","H","ArrayBuffer","Uint8ClampedArray","Db","deleteObject","Cb","s","abort","get","wc","Ic","Jc","put","xc","grow","Fc","toTimeString","match","Bc","getTimezoneOffset","Cc","Number","Ec","zc","getSeconds","getMinutes","getHours","getDate","getMonth","getFullYear","getDay","getTime","_UmbraAssetLoadAbortRequested","_UmbraAssetLoadFinish","ga","_UmbraAssetLoadGetMaterialInfo","_UmbraAssetLoadGetMeshData","_UmbraAssetLoadGetMeshInfo","_UmbraAssetLoadGetMetaDataLookupTable","_UmbraAssetLoadGetTextureData","la","_UmbraAssetLoadGetTextureInfo","ma","_UmbraAssetLoadGetType","_UmbraAssetLoadPrepare","oa","_UmbraAssetUnloadFinish","pa","_UmbraAssetUnloadGetType","_UmbraAssetUnloadGetUserPointer","_UmbraClientCreate","_UmbraClientDestroy","_UmbraConfigInit","_UmbraEnvironmentInfoDefaults","_UmbraGetClassification","_UmbraGetClassificationAmount","_UmbraGetClassificationCount","_UmbraGetLibraryInfo","_UmbraGetMipmapLevelByteSize","_UmbraGetMipmapLevelOffset","_UmbraGetNextAssetLoad","_UmbraGetNextAssetUnload","_UmbraGetStreamingState","_UmbraGetVertexAttributeElementSize","_UmbraMeshLoadDone","_UmbraMeshLoadNext","_UmbraMeshLoadSetBuffers","_UmbraRuntimeCreate","_UmbraRuntimeDestroy","_UmbraRuntimeUpdate","_UmbraSceneConnect","_UmbraSceneConnectLocal","_UmbraSceneConnectPublic","_UmbraSceneConnectionStatus","Pa","_UmbraSceneCopyDestroy","_UmbraSceneCopyGetError","_UmbraSceneCopyGetStatus","_UmbraSceneDestroy","_UmbraSceneGetInfo","_UmbraSceneSetTransform","Va","_UmbraSceneStartCopy","_UmbraSetAllocator","_UmbraSetHttp","_UmbraSetLogger","_UmbraViewCreate","_a","_UmbraViewDataComplete","_UmbraViewDestroy","_UmbraViewNextRenderables","_UmbraViewResetRenderables","_UmbraViewSetCamera","_UmbraViewSetIntersection","___embind_register_native_and_builtin_types","___getTypeName","__get_daylight","__get_timezone","__get_tzname","_free","_malloc","globalCtors","stackAlloc","stackRestore","stackSave","dynCall_i","dynCall_ii","dynCall_iii","dynCall_iiii","dynCall_iiiii","dynCall_iiiiii","dynCall_iiiiiii","dynCall_iiiiiiiiii","dynCall_iiiji","dynCall_jiji","dynCall_vii","Mc","calledRun","onRuntimeInitialized","onAbort","dynCall_viiiii","dynCall_viiiiii","dynCall_viiiiiiiii","cwrap","every","string","array","Lc","run","preInit","Set","wgetRequests","Assets","freeze","MAX_LIGHTS","arrayToHeap","Map","assertInteger","isInteger","Module","Buffer","[object Object]","ofs","BYTES_PER_ELEMENT","newSize","destroy","BufferView","start","heapName","renderableStructOffsets","getRenderableMemberOffsets","copyMat4","buf","elements","Client","ptr","configPtr","CONFIG_SIZE","configInit","clientCreate","clientDestroy","NativeScene","matrixBuffer","infoBuffer","sceneInfoSize","sceneDestroy","sceneConnectionStatus","sceneGetInfo","deserializeSceneInfo","connectionStatus","Connected","matrix","floats","sceneSetTransform","View","runtimeAssets","vectorBuffer","lightBuffer","temp","viewDestroy","worldToClip","positionVector","quality","lights","depthRange","MinusOneToOne","matrixFormat","ColumnMajor","viewSetCamera","batchSize","bufferSize","renderableSize","strideInWords","bufferWordSize","getView","arrayType","heap","meshIDs","lodLevels","masks","count","viewNextRenderables","output","id","lod","mask","mesh","AssetLoad","assetType","assetLoadGetType","userPtr","assetLoadPrepare","assetLoadFinish","AssetUnload","assetUnloadGetType","assetUnloadFinish","userPointer","assetUnloadGetUserPointer","vertexBufferMap","Loader","load","info","vertexBuffers","assetLoadGetMeshInfo","meshInfoBuffer","deserializeMeshInfo","buffers","structBuffer","bytes","fill","tempDataBuffer","serializeDataBuffer","position","desc","index","uv","dataBufferSize","normal","tangent","meshLoadSetBuffers","meshLoadNext","meshLoadDone","_this","indexBytes","uniqueVertexCount","attrInfo","elemSize","getVertexAttributeElementSize","Position","TextureCoordinate","Normal","Tangent","indexCount","bufferSizes","keys","byteSize","meshBuffers","attributes","getBufferForAttribute","Count","meshInfoSize","Runtime","client","platformFeatures","runtimeFlags","assets","nextId","loader","tempTextureBuffer","tempTranscodedBuffer","tempStreamingStateBuffer","streamingStateSize","scratch","debug","normalFormats","ETC1","ASTC","PVRTC1","BC5","capabilityMask","BC4","infoPtr","serializeEnvironmentInfo","textureCapabilityFlags","maxFileCacheBytes","runtimeCreate","materialInfoSize","textureInfoSize","rawDataBufferSize","textureFormatsInUse","runtimeDestroy","publicKey","scenePtr","sceneConnectPublic","url","sceneConnectLocal","viewPtr","viewCreate","runtimeUpdate","getNextAssetUnload","unload","_this2","done","loadNext","job","material","bounds","mn","mx","loadPtr","getNextAssetLoad","assetLoadGetMaterialInfo","deserializeMaterialInfo","textureObjects","textures","filter","INVALID_USERPOINTER","transparent","assetLoadGetTextureInfo","texture","deserializeTextureInfo","getMipmapLevelByteSize","getMipmapLevelOffset","ensureSize","dataByteSize","serializeRawDataBuffer","flags","assetLoadGetTextureData","bufferView","formatNeedsTranscoding","format","_formatToArrayType","downsampleAndTranscodeTexture","formatToArrayType","RGBA32","RGB565","RG8","RG16F","allocateBuffers","setBuffers","handlers","timeLimit","startTime","getAssetUnloads","getAssetLoads","finish","Failure","asset","BC1","BC3","outputBuffer","newFormat","getUncompressedFromBCFormat","halfFloat","outputSize","getTextureByteSize","success","info2","assign","mipByteSizes","getStreamingState","deserializeStreamingState","state","numResidentTiles","numResidentTilesLoaded","createRuntime","features","initUmbra","config","wasmURL","resolve","reject","path","prefix","endsWith","what","getLibraryInfo","environmentInfoDefaults","assetLoadAbortRequested","assetLoadGetMeshData","assetLoadGetMetaDataLookupTable","getClassificationCount","getClassification","getClassificationAmount","sceneConnect","sceneStartCopy","sceneCopyDestroy","sceneCopyGetStatus","sceneCopyGetError","viewSetIntersection","viewDataComplete","viewResetRenderables","wrapNativeFunctions","lib","getPlatformFeatures","gl","formats","supportsSRGB","supportsHalfFloat","extStrings","extNames","allExtensions","getSupportedExtensions","full","shortened","mapping","BC2","names","includes","getExtension","srgb","nativeModule","getStreamingInfo","version","Version","copyright","Copyright","buildTime","BuildTime","buildID","BuildId","abortDownloads","values","req","deinitUmbra","Umbra","privateUmbra","makeFormat","compressed","ThreeFormats","RGB24","THREE","ETC1_RGB","ASTC_4X4","PVRTC1_RGB4","normalmapChunk","metalnessMapChunk","roughnessMapChunk","ShaderPatcher","flipTangent","defines","process","shader","renderer","frag","fragmentShader","ObjectPool","usedList","freeList","allocate","makeFunc","freeAll","clearFunc","clear","UmbraScene","qualityFactor","runtime","scene","onDispose","wireframe","onConnected","onConnectionError","onDisconnected","onConnectionChanged","onMeshChanged","isLOD","autoUpdate","materialPool","cameraToView","viewLastUsed","shaderPatcher","stats","numVisible","numShadowCasters","numCachedMaterials","numAssets","diagnostics","missingNormals","checked","deprecatedMaterial","report","field","umbra","oldState","visibleIDs","matrixWorldInverse","projScreenMatrix","cameraWorldPosition","tempVector","dirVector","update","camera","parentScene","traverseAncestors","isScene","shadowMap","enabled","traverseVisible","isDirectionalLight","castShadow","findLights","view","createView","frame","render","pruneOldViews","nativeScene","setTransform","matrixWorld","isPBREnabled","flip","determinant","getInverse","multiplyMatrices","projectionMatrix","dir","vector3","lightDirections","light","setFromMatrixPosition","sub","umbraStreamingPosition","copy","getWorldPosition","pos","setCamera","adjustedQuality","newChildren","children","isUmbraMesh","shadowCasters","proxy","cam","mat","normalMap","metalnessMap","roughnessMap","visible","getVisible","materialDesc","geometry","clone","opacity","onBeforeCompile","diffuseMap","Diffuse","metalglossMap","Specular","isTexture","vertexTangents","normalMapType","metalness","roughness","receiveShadow","frustumCulled","updateStreamingEvents","scale","getInfo","connected","isConnected","getBounds","getCenter","applyMatrix4","center","updateNetworkEvents","ConnectionError","Connecting","dispose","ThreejsIntegration","textureMemoryUsed","meshMemoryUsed","umbrajs","context","memoryLimit","downloadLimit","onStreamingUpdate","onStreamingComplete","updateTask","assetSizes","lastQualityLowerFrame","umbraScenes","progress","downloadLimitReached","LoadMaterial","prepare","addAsset","Success","UnloadMaterial","removeAsset","LoadTexture","glformat","canFitInMemory","OutOfMemory","adjustQuality","tex","makeTexture","textureType","gammaOutput","encoding","colorSpace","Linear","needsUpdate","UnloadTexture","LoadMesh","attribs","components","totalSize","aabb","indexArray","getArray","indices","setIndex","boundingSphere","attrib","addAttribute","meshDescriptor","UnloadMesh","meshDesc","startEventUpdate","interval","stopEventUpdate","setInterval","updateEvents","timeBudget","getStats","updateTook","loadAssets","memoryUsed","createScene","link","project","model","connectPublic","_this3","createSceneWithURL","connectLocal","_this4","factor","pixelData","mip","magFilter","minFilter","anisotropy","getStreamingProgress","manager","onLoad","onProgress","onError","err","userConfig"],"mappings":"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"}