{"version":3,"file":"umbrajs-three.esm.min.js","sources":["../node_modules/@umbra3d/umbrajs/dist/umbra.esm.js","../src/ThreeFormats.ts","../src/ShaderPatcher.ts","../src/ObjectPool.ts","../src/Scene.ts","../src/Loader.ts","../src/index.ts"],"sourcesContent":["function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar UmbraNativeAPI = function () {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n\n  return function (UmbraNativeAPI) {\n    UmbraNativeAPI = UmbraNativeAPI || {};\n    var c;\n    c || (c = typeof UmbraNativeAPI !== 'undefined' ? UmbraNativeAPI : {});\n    var aa = {},\n        m;\n\n    for (m in c) {\n      c.hasOwnProperty(m) && (aa[m] = c[m]);\n    }\n\n    c.arguments = [];\n    c.thisProgram = \"./this.program\";\n\n    c.quit = function (a, b) {\n      throw b;\n    };\n\n    c.preRun = [];\n    c.postRun = [];\n    var r = \"\";\n    document.currentScript && (r = document.currentScript.src);\n    _scriptDir && (r = _scriptDir);\n    0 !== r.indexOf(\"blob:\") ? r = r.substr(0, r.lastIndexOf(\"/\") + 1) : r = \"\";\n    var ba = c.print || (\"undefined\" !== typeof console ? console.log.bind(console) : \"undefined\" !== typeof print ? print : null),\n        v = c.printErr || (\"undefined\" !== typeof printErr ? printErr : \"undefined\" !== typeof console && console.warn.bind(console) || ba);\n\n    for (m in aa) {\n      aa.hasOwnProperty(m) && (c[m] = aa[m]);\n    }\n\n    aa = void 0;\n\n    function da(a) {\n      var b = w[ea >> 2];\n      a = b + a + 15 & -16;\n      a > fa() && x();\n      w[ea >> 2] = a;\n      return b;\n    }\n\n    function ha(a) {\n      ia || (ia = {});\n      ia[a] || (ia[a] = 1, v(a));\n    }\n\n    var ia,\n        ja = {\n      \"f64-rem\": function f64Rem(a, b) {\n        return a % b;\n      },\n      \"debugger\": function _debugger() {\n        debugger;\n      }\n    };\n    \"object\" !== (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) && v(\"no native wasm support detected\");\n    var z,\n        A = !1;\n\n    function B(a, b) {\n      a || x(\"Assertion failed: \" + b);\n    }\n\n    function ka(a) {\n      var b = c[\"_\" + a];\n      B(b, \"Cannot call unknown function \" + a + \", make sure it is exported\");\n      return b;\n    }\n\n    function la(a, b, d, e) {\n      var f = {\n        string: function string(a) {\n          var b = 0;\n\n          if (null !== a && void 0 !== a && 0 !== a) {\n            var d = (a.length << 2) + 1;\n            b = ma(d);\n            na(a, C, b, d);\n          }\n\n          return b;\n        },\n        array: function array(a) {\n          var b = ma(a.length);\n          D.set(a, b);\n          return b;\n        }\n      },\n          g = ka(a),\n          k = [];\n      a = 0;\n      if (e) for (var h = 0; h < e.length; h++) {\n        var l = f[d[h]];\n        l ? (0 === a && (a = oa()), k[h] = l(e[h])) : k[h] = e[h];\n      }\n      d = g.apply(null, k);\n\n      d = function (a) {\n        return \"string\" === b ? _E(a) : \"boolean\" === b ? !!a : a;\n      }(d);\n\n      0 !== a && pa(a);\n      return d;\n    }\n\n    function qa(a) {\n      if (\"number\" === typeof a) {\n        var b = !0;\n        var d = a;\n      } else b = !1, d = a.length;\n\n      var e = F(Math.max(d, 1));\n\n      if (b) {\n        a = e;\n        B(0 == (e & 3));\n\n        for (b = e + (d & -4); a < b; a += 4) {\n          w[a >> 2] = 0;\n        }\n\n        for (b = e + d; a < b;) {\n          D[a++ >> 0] = 0;\n        }\n\n        return e;\n      }\n\n      a.subarray || a.slice ? C.set(a, e) : C.set(new Uint8Array(a), e);\n      return e;\n    }\n\n    var ra = \"undefined\" !== typeof TextDecoder ? new TextDecoder(\"utf8\") : void 0;\n\n    function sa(a, b, d) {\n      var e = b + d;\n\n      for (d = b; a[d] && !(d >= e);) {\n        ++d;\n      }\n\n      if (16 < d - b && a.subarray && ra) return ra.decode(a.subarray(b, d));\n\n      for (e = \"\"; b < d;) {\n        var f = a[b++];\n\n        if (f & 128) {\n          var g = a[b++] & 63;\n          if (192 == (f & 224)) e += String.fromCharCode((f & 31) << 6 | g);else {\n            var k = a[b++] & 63;\n            f = 224 == (f & 240) ? (f & 15) << 12 | g << 6 | k : (f & 7) << 18 | g << 12 | k << 6 | a[b++] & 63;\n            65536 > f ? e += String.fromCharCode(f) : (f -= 65536, e += String.fromCharCode(55296 | f >> 10, 56320 | f & 1023));\n          }\n        } else e += String.fromCharCode(f);\n      }\n\n      return e;\n    }\n\n    function _E(a) {\n      return a ? sa(C, a, void 0) : \"\";\n    }\n\n    function na(a, b, d, e) {\n      if (0 < e) {\n        e = d + e - 1;\n\n        for (var f = 0; f < a.length; ++f) {\n          var g = a.charCodeAt(f);\n\n          if (55296 <= g && 57343 >= g) {\n            var k = a.charCodeAt(++f);\n            g = 65536 + ((g & 1023) << 10) | k & 1023;\n          }\n\n          if (127 >= g) {\n            if (d >= e) break;\n            b[d++] = g;\n          } else {\n            if (2047 >= g) {\n              if (d + 1 >= e) break;\n              b[d++] = 192 | g >> 6;\n            } else {\n              if (65535 >= g) {\n                if (d + 2 >= e) break;\n                b[d++] = 224 | g >> 12;\n              } else {\n                if (d + 3 >= e) break;\n                b[d++] = 240 | g >> 18;\n                b[d++] = 128 | g >> 12 & 63;\n              }\n\n              b[d++] = 128 | g >> 6 & 63;\n            }\n\n            b[d++] = 128 | g & 63;\n          }\n        }\n\n        b[d] = 0;\n      }\n    }\n\n    function ta(a) {\n      for (var b = 0, d = 0; d < a.length; ++d) {\n        var e = a.charCodeAt(d);\n        55296 <= e && 57343 >= e && (e = 65536 + ((e & 1023) << 10) | a.charCodeAt(++d) & 1023);\n        127 >= e ? ++b : b = 2047 >= e ? b + 2 : 65535 >= e ? b + 3 : b + 4;\n      }\n\n      return b;\n    }\n\n    \"undefined\" !== typeof TextDecoder && new TextDecoder(\"utf-16le\");\n\n    function ua(a) {\n      0 < a % 65536 && (a += 65536 - a % 65536);\n      return a;\n    }\n\n    var G, D, C, va, wa, w, H, xa, ya;\n\n    function za() {\n      c.HEAP8 = D = new Int8Array(G);\n      c.HEAP16 = va = new Int16Array(G);\n      c.HEAP32 = w = new Int32Array(G);\n      c.HEAPU8 = C = new Uint8Array(G);\n      c.HEAPU16 = wa = new Uint16Array(G);\n      c.HEAPU32 = H = new Uint32Array(G);\n      c.HEAPF32 = xa = new Float32Array(G);\n      c.HEAPF64 = ya = new Float64Array(G);\n    }\n\n    var ea = 17120,\n        Aa = c.TOTAL_MEMORY || 134217728;\n    5242880 > Aa && v(\"TOTAL_MEMORY should be larger than TOTAL_STACK, was \" + Aa + \"! (TOTAL_STACK=5242880)\");\n    c.wasmMemory ? z = c.wasmMemory : z = new WebAssembly.Memory({\n      initial: Aa / 65536\n    });\n    z && (G = z.buffer);\n    Aa = G.byteLength;\n    za();\n    w[ea >> 2] = 5260032;\n\n    function Ba(a) {\n      for (; 0 < a.length;) {\n        var b = a.shift();\n        if (\"function\" == typeof b) b();else {\n          var d = b.Vb;\n          \"number\" === typeof d ? void 0 === b.Sb ? c.dynCall_v(d) : c.dynCall_vi(d, b.Sb) : d(void 0 === b.Sb ? null : b.Sb);\n        }\n      }\n    }\n\n    var Ca = [],\n        Ea = [],\n        Fa = [],\n        Ga = [],\n        Ha = [],\n        Ia = !1;\n\n    function Ja() {\n      var a = c.preRun.shift();\n      Ca.unshift(a);\n    }\n\n    var I = 0,\n        Ka = null,\n        La = null;\n    c.preloadedImages = {};\n    c.preloadedAudios = {};\n\n    function Ma() {\n      var a = J;\n      return String.prototype.startsWith ? a.startsWith(\"data:application/octet-stream;base64,\") : 0 === a.indexOf(\"data:application/octet-stream;base64,\");\n    }\n\n    var J = \"umbra.wasm\";\n\n    if (!Ma()) {\n      var Na = J;\n      J = c.locateFile ? c.locateFile(Na, r) : r + Na;\n    }\n\n    function Oa() {\n      try {\n        if (c.wasmBinary) return new Uint8Array(c.wasmBinary);\n        throw \"both async and sync fetching of the wasm failed\";\n      } catch (a) {\n        x(a);\n      }\n    }\n\n    function Pa() {\n      return c.wasmBinary || \"function\" !== typeof fetch ? new Promise(function (a) {\n        a(Oa());\n      }) : fetch(J, {\n        credentials: \"same-origin\"\n      }).then(function (a) {\n        if (!a.ok) throw \"failed to load wasm binary file at '\" + J + \"'\";\n        return a.arrayBuffer();\n      })[\"catch\"](function () {\n        return Oa();\n      });\n    }\n\n    function Qa(a) {\n      function b(a) {\n        c.asm = a.exports;\n        I--;\n        c.monitorRunDependencies && c.monitorRunDependencies(I);\n        0 == I && (null !== Ka && (clearInterval(Ka), Ka = null), La && (a = La, La = null, a()));\n      }\n\n      function d(a) {\n        b(a.instance);\n      }\n\n      function e(a) {\n        return Pa().then(function (a) {\n          return WebAssembly.instantiate(a, f);\n        }).then(a, function (a) {\n          v(\"failed to asynchronously prepare wasm: \" + a);\n          x(a);\n        });\n      }\n\n      var f = {\n        env: a,\n        global: {\n          NaN: NaN,\n          Infinity: Infinity\n        },\n        \"global.Math\": Math,\n        asm2wasm: ja\n      };\n      I++;\n      c.monitorRunDependencies && c.monitorRunDependencies(I);\n      if (c.instantiateWasm) try {\n        return c.instantiateWasm(f, b);\n      } catch (g) {\n        return v(\"Module.instantiateWasm callback failed with error: \" + g), !1;\n      }\n\n      (function () {\n        if (c.wasmBinary || \"function\" !== typeof WebAssembly.instantiateStreaming || Ma() || \"function\" !== typeof fetch) return e(d);\n        fetch(J, {\n          credentials: \"same-origin\"\n        }).then(function (a) {\n          return WebAssembly.instantiateStreaming(a, f).then(d, function (a) {\n            v(\"wasm streaming compile failed: \" + a);\n            v(\"falling back to ArrayBuffer instantiation\");\n            e(d);\n          });\n        });\n      })();\n\n      return {};\n    }\n\n    c.asm = function (a, b) {\n      b.memory = z;\n      b.table = new WebAssembly.Table({\n        initial: 357,\n        maximum: 357,\n        element: \"anyfunc\"\n      });\n      b.__memory_base = 1024;\n      b.__table_base = 0;\n      return Qa(b);\n    };\n\n    var Sa = [function () {\n      alert(\"Invalid http method.\");\n    }, function (a, b, d, e, f, g, k, h, l, n, u) {\n      return Ra(a, b, d, e, f, g, k, h, l, n, u);\n    }, function () {\n      alert(\"Uploads are not supported.\");\n    }];\n    Ea.push({\n      Vb: function Vb() {\n        Ta();\n      }\n    });\n    var K = {};\n\n    function Ua(a) {\n      if (Ua.ac) {\n        var b = w[a >> 2];\n        var d = w[b >> 2];\n      } else Ua.ac = !0, K.USER = K.LOGNAME = \"web_user\", K.PATH = \"/\", K.PWD = \"/\", K.HOME = \"/home/web_user\", K.LANG = \"C.UTF-8\", K.LANG = (\"object\" === (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) && navigator.languages && navigator.languages[0] || \"C\").replace(\"-\", \"_\") + \".UTF-8\", K._ = c.thisProgram, d = Ia ? F(1024) : da(1024), b = Ia ? F(256) : da(256), w[b >> 2] = d, w[a >> 2] = b;\n\n      a = [];\n      var e = 0,\n          f;\n\n      for (f in K) {\n        if (\"string\" === typeof K[f]) {\n          var g = f + \"=\" + K[f];\n          a.push(g);\n          e += g.length;\n        }\n      }\n\n      if (1024 < e) throw Error(\"Environment size exceeded TOTAL_ENV_SIZE!\");\n\n      for (f = 0; f < a.length; f++) {\n        e = g = a[f];\n\n        for (var k = d, h = 0; h < e.length; ++h) {\n          D[k++ >> 0] = e.charCodeAt(h);\n        }\n\n        D[k >> 0] = 0;\n        w[b + 4 * f >> 2] = d;\n        d += g.length + 1;\n      }\n\n      w[b + 4 * a.length >> 2] = 0;\n    }\n\n    function Va(a, b) {\n      Ga.unshift({\n        Vb: a,\n        Sb: b\n      });\n    }\n\n    var Wa = [null, [], []];\n\n    function Xa(a, b) {\n      var d = Wa[a];\n      0 === b || 10 === b ? ((1 === a ? ba : v)(sa(d, 0)), d.length = 0) : d.push(b);\n    }\n\n    var _L = 0;\n\n    function _M() {\n      _L += 4;\n      return w[_L - 4 >> 2];\n    }\n\n    var Ya = {},\n        Za = {};\n\n    function $a(a) {\n      for (; a.length;) {\n        var b = a.pop();\n        a.pop()(b);\n      }\n    }\n\n    function ab(a) {\n      return this.fromWireType(H[a >> 2]);\n    }\n\n    var N = {},\n        O = {},\n        bb = {};\n\n    function cb(a) {\n      if (void 0 === a) return \"_unknown\";\n      a = a.replace(/[^a-zA-Z0-9_]/g, \"$\");\n      var b = a.charCodeAt(0);\n      return 48 <= b && 57 >= b ? \"_\" + a : a;\n    }\n\n    function db(a, b) {\n      a = cb(a);\n      return new Function(\"body\", \"return function \" + a + '() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n')(b);\n    }\n\n    function eb(a) {\n      var b = Error,\n          d = db(a, function (b) {\n        this.name = a;\n        this.message = b;\n        b = Error(b).stack;\n        void 0 !== b && (this.stack = this.toString() + \"\\n\" + b.replace(/^Error(:[^\\n]*)?\\n/, \"\"));\n      });\n      d.prototype = Object.create(b.prototype);\n      d.prototype.constructor = d;\n\n      d.prototype.toString = function () {\n        return void 0 === this.message ? this.name : this.name + \": \" + this.message;\n      };\n\n      return d;\n    }\n\n    var fb = void 0;\n\n    function gb(a, b, d) {\n      function e(b) {\n        b = d(b);\n        if (b.length !== a.length) throw new fb(\"Mismatched type converter count\");\n\n        for (var e = 0; e < a.length; ++e) {\n          P(a[e], b[e]);\n        }\n      }\n\n      a.forEach(function (a) {\n        bb[a] = b;\n      });\n      var f = Array(b.length),\n          g = [],\n          k = 0;\n      b.forEach(function (a, b) {\n        O.hasOwnProperty(a) ? f[b] = O[a] : (g.push(a), N.hasOwnProperty(a) || (N[a] = []), N[a].push(function () {\n          f[b] = O[a];\n          ++k;\n          k === g.length && e(f);\n        }));\n      });\n      0 === g.length && e(f);\n    }\n\n    function hb(a) {\n      switch (a) {\n        case 1:\n          return 0;\n\n        case 2:\n          return 1;\n\n        case 4:\n          return 2;\n\n        case 8:\n          return 3;\n\n        default:\n          throw new TypeError(\"Unknown type size: \" + a);\n      }\n    }\n\n    var ib = void 0;\n\n    function Q(a) {\n      for (var b = \"\"; C[a];) {\n        b += ib[C[a++]];\n      }\n\n      return b;\n    }\n\n    var jb = void 0;\n\n    function R(a) {\n      throw new jb(a);\n    }\n\n    function P(a, b, d) {\n      d = d || {};\n      if (!(\"argPackAdvance\" in b)) throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");\n      var e = b.name;\n      a || R('type \"' + e + '\" must have a positive integer typeid pointer');\n\n      if (O.hasOwnProperty(a)) {\n        if (d.gc) return;\n        R(\"Cannot register type '\" + e + \"' twice\");\n      }\n\n      O[a] = b;\n      delete bb[a];\n      N.hasOwnProperty(a) && (b = N[a], delete N[a], b.forEach(function (a) {\n        a();\n      }));\n    }\n\n    var kb = [],\n        S = [{}, {\n      value: void 0\n    }, {\n      value: null\n    }, {\n      value: !0\n    }, {\n      value: !1\n    }];\n\n    function lb(a) {\n      4 < a && 0 === --S[a].Wb && (S[a] = void 0, kb.push(a));\n    }\n\n    function U(a) {\n      switch (a) {\n        case void 0:\n          return 1;\n\n        case null:\n          return 2;\n\n        case !0:\n          return 3;\n\n        case !1:\n          return 4;\n\n        default:\n          var b = kb.length ? kb.pop() : S.length;\n          S[b] = {\n            Wb: 1,\n            value: a\n          };\n          return b;\n      }\n    }\n\n    function mb(a) {\n      if (null === a) return \"null\";\n\n      var b = _typeof(a);\n\n      return \"object\" === b || \"array\" === b || \"function\" === b ? a.toString() : \"\" + a;\n    }\n\n    function nb(a, b) {\n      switch (b) {\n        case 2:\n          return function (a) {\n            return this.fromWireType(xa[a >> 2]);\n          };\n\n        case 3:\n          return function (a) {\n            return this.fromWireType(ya[a >> 3]);\n          };\n\n        default:\n          throw new TypeError(\"Unknown float type: \" + a);\n      }\n    }\n\n    function ob(a) {\n      var b = Function;\n      if (!(b instanceof Function)) throw new TypeError(\"new_ called with constructor type \" + _typeof(b) + \" which is not a function\");\n      var d = db(b.name || \"unknownFunctionName\", function () {});\n      d.prototype = b.prototype;\n      d = new d();\n      a = b.apply(d, a);\n      return a instanceof Object ? a : d;\n    }\n\n    function pb(a, b) {\n      var d = c;\n\n      if (void 0 === d[a].Qb) {\n        var e = d[a];\n\n        d[a] = function () {\n          d[a].Qb.hasOwnProperty(arguments.length) || R(\"Function '\" + b + \"' called with an invalid number of arguments (\" + arguments.length + \") - expects one of (\" + d[a].Qb + \")!\");\n          return d[a].Qb[arguments.length].apply(this, arguments);\n        };\n\n        d[a].Qb = [];\n        d[a].Qb[e.$b] = e;\n      }\n    }\n\n    function qb(a, b, d) {\n      c.hasOwnProperty(a) ? ((void 0 === d || void 0 !== c[a].Qb && void 0 !== c[a].Qb[d]) && R(\"Cannot register public name '\" + a + \"' twice\"), pb(a, a), c.hasOwnProperty(d) && R(\"Cannot register multiple overloads of a function with the same number of arguments (\" + d + \")!\"), c[a].Qb[d] = b) : (c[a] = b, void 0 !== d && (c[a].zc = d));\n    }\n\n    function rb(a, b) {\n      for (var d = [], e = 0; e < a; e++) {\n        d.push(w[(b >> 2) + e]);\n      }\n\n      return d;\n    }\n\n    function sb(a, b) {\n      a = Q(a);\n      if (void 0 !== c[\"FUNCTION_TABLE_\" + a]) var d = c[\"FUNCTION_TABLE_\" + a][b];else if (\"undefined\" !== typeof FUNCTION_TABLE) d = FUNCTION_TABLE[b];else {\n        d = c[\"dynCall_\" + a];\n        void 0 === d && (d = c[\"dynCall_\" + a.replace(/f/g, \"d\")], void 0 === d && R(\"No dynCall invoker for signature: \" + a));\n\n        for (var e = [], f = 1; f < a.length; ++f) {\n          e.push(\"a\" + f);\n        }\n\n        f = \"return function \" + (\"dynCall_\" + a + \"_\" + b) + \"(\" + e.join(\", \") + \") {\\n\";\n        f += \"    return dynCall(rawFunction\" + (e.length ? \", \" : \"\") + e.join(\", \") + \");\\n\";\n        d = new Function(\"dynCall\", \"rawFunction\", f + \"};\\n\")(d, b);\n      }\n      \"function\" !== typeof d && R(\"unknown function pointer with signature \" + a + \": \" + b);\n      return d;\n    }\n\n    var tb = void 0;\n\n    function ub(a) {\n      a = vb(a);\n      var b = Q(a);\n      V(a);\n      return b;\n    }\n\n    function wb(a, b) {\n      function d(a) {\n        f[a] || O[a] || (bb[a] ? bb[a].forEach(d) : (e.push(a), f[a] = !0));\n      }\n\n      var e = [],\n          f = {};\n      b.forEach(d);\n      throw new tb(a + \": \" + e.map(ub).join([\", \"]));\n    }\n\n    function xb(a, b, d) {\n      switch (b) {\n        case 0:\n          return d ? function (a) {\n            return D[a];\n          } : function (a) {\n            return C[a];\n          };\n\n        case 1:\n          return d ? function (a) {\n            return va[a >> 1];\n          } : function (a) {\n            return wa[a >> 1];\n          };\n\n        case 2:\n          return d ? function (a) {\n            return w[a >> 2];\n          } : function (a) {\n            return H[a >> 2];\n          };\n\n        default:\n          throw new TypeError(\"Unknown integer type: \" + a);\n      }\n    }\n\n    function W(a) {\n      a || R(\"Cannot use deleted val. handle = \" + a);\n      return S[a].value;\n    }\n\n    function yb(a, b) {\n      var d = O[a];\n      void 0 === d && R(b + \" has unknown type \" + ub(a));\n      return d;\n    }\n\n    var zb = {};\n\n    function Ab(a) {\n      var b = zb[a];\n      return void 0 === b ? Q(a) : b;\n    }\n\n    var Bb = [];\n\n    function Cb(a) {\n      var b = Bb.length;\n      Bb.push(a);\n      return b;\n    }\n\n    function Db(a, b) {\n      for (var d = Array(a), e = 0; e < a; ++e) {\n        d[e] = yb(w[(b >> 2) + e], \"parameter \" + e);\n      }\n\n      return d;\n    }\n\n    function Eb(a, b) {\n      Fb = a;\n      Gb = b;\n      if (Hb) if (0 == a) X = function X() {\n        var a = Math.max(0, Ib + b - Y()) | 0;\n        setTimeout(_Jb, a);\n      }, Kb = \"timeout\";else if (1 == a) X = function X() {\n        Lb(_Jb);\n      }, Kb = \"rAF\";else if (2 == a) {\n        if (\"undefined\" === typeof setImmediate) {\n          var d = [];\n          addEventListener(\"message\", function (a) {\n            if (\"setimmediate\" === a.data || \"setimmediate\" === a.data.target) a.stopPropagation(), d.shift()();\n          }, !0);\n\n          setImmediate = function setImmediate(a) {\n            d.push(a);\n            postMessage(\"setimmediate\", \"*\");\n          };\n        }\n\n        X = function X() {\n          setImmediate(_Jb);\n        };\n\n        Kb = \"immediate\";\n      }\n    }\n\n    function Y() {\n      x();\n    }\n\n    function Mb(a) {\n      var b = Nb;\n      c.noExitRuntime = !0;\n      B(!Hb, \"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters.\");\n      Hb = a;\n      Nb = b;\n      var d = \"undefined\" !== typeof b ? function () {\n        c.dynCall_vi(a, b);\n      } : function () {\n        c.dynCall_v(a);\n      };\n      var e = Z;\n\n      _Jb = function Jb() {\n        if (!A) if (0 < Ob.length) {\n          var a = Date.now(),\n              b = Ob.shift();\n          b.Vb(b.Sb);\n\n          if (Pb) {\n            var k = Pb,\n                h = 0 == k % 1 ? k - 1 : Math.floor(k);\n            Pb = b.qc ? h : (8 * k + (h + .5)) / 9;\n          }\n\n          console.log('main loop blocker \"' + b.name + '\" took ' + (Date.now() - a) + \" ms\");\n          c.setStatus && (a = c.statusMessage || \"Please wait...\", b = Pb, k = Qb.uc, b ? b < k ? c.setStatus(a + \" (\" + (k - b) + \"/\" + k + \")\") : c.setStatus(a) : c.setStatus(\"\"));\n          e < Z || setTimeout(_Jb, 0);\n        } else if (!(e < Z)) if (Rb = Rb + 1 | 0, 1 == Fb && 1 < Gb && 0 != Rb % Gb) X();else {\n          0 == Fb && (Ib = Y());\n          \"timeout\" === Kb && c.Ub && (v(\"Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!\"), Kb = \"\");\n\n          a: if (!(A || c.preMainLoop && !1 === c.preMainLoop())) {\n            try {\n              d();\n            } catch (l) {\n              if (l instanceof Sb) break a;\n              l && \"object\" === _typeof(l) && l.stack && v(\"exception thrown: \" + [l, l.stack]);\n              throw l;\n            }\n\n            c.postMainLoop && c.postMainLoop();\n          }\n\n          e < Z || (\"object\" === (typeof SDL === \"undefined\" ? \"undefined\" : _typeof(SDL)) && SDL.audio && SDL.audio.ic && SDL.audio.ic(), X());\n        }\n      };\n    }\n\n    var X = null,\n        Kb = \"\",\n        Z = 0,\n        Hb = null,\n        Nb = 0,\n        Fb = 0,\n        Gb = 0,\n        Rb = 0,\n        Ob = [],\n        Qb = {},\n        Ib,\n        _Jb,\n        Pb,\n        Tb = !1,\n        Ub = !1,\n        Vb = [];\n\n    function Xb() {\n      function a() {\n        Ub = document.pointerLockElement === c.canvas || document.mozPointerLockElement === c.canvas || document.webkitPointerLockElement === c.canvas || document.msPointerLockElement === c.canvas;\n      }\n\n      c.preloadPlugins || (c.preloadPlugins = []);\n\n      if (!Yb) {\n        Yb = !0;\n\n        try {\n          Zb = !0;\n        } catch (d) {\n          Zb = !1, console.log(\"warning: no blob constructor, cannot create blobs with mimetypes\");\n        }\n\n        $b = \"undefined\" != typeof MozBlobBuilder ? MozBlobBuilder : \"undefined\" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : Zb ? null : console.log(\"warning: no BlobBuilder\");\n        ac = \"undefined\" != typeof window ? window.URL ? window.URL : window.webkitURL : void 0;\n        c.Zb || \"undefined\" !== typeof ac || (console.log(\"warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available.\"), c.Zb = !0);\n        c.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !c.Zb && /\\.(jpg|jpeg|png|bmp)$/i.test(a);\n          },\n          handle: function handle(a, b, f, g) {\n            var d = null;\n            if (Zb) try {\n              d = new Blob([a], {\n                type: bc(b)\n              }), d.size !== a.length && (d = new Blob([new Uint8Array(a).buffer], {\n                type: bc(b)\n              }));\n            } catch (n) {\n              ha(\"Blob constructor present but fails: \" + n + \"; falling back to blob builder\");\n            }\n            d || (d = new $b(), d.append(new Uint8Array(a).buffer), d = d.getBlob());\n            var e = ac.createObjectURL(d),\n                l = new Image();\n\n            l.onload = function () {\n              B(l.complete, \"Image \" + b + \" could not be decoded\");\n              var d = document.createElement(\"canvas\");\n              d.width = l.width;\n              d.height = l.height;\n              d.getContext(\"2d\").drawImage(l, 0, 0);\n              c.preloadedImages[b] = d;\n              ac.revokeObjectURL(e);\n              f && f(a);\n            };\n\n            l.onerror = function () {\n              console.log(\"Image \" + e + \" could not be decoded\");\n              g && g();\n            };\n\n            l.src = e;\n          }\n        });\n        c.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !c.yc && a.substr(-4) in {\n              \".ogg\": 1,\n              \".wav\": 1,\n              \".mp3\": 1\n            };\n          },\n          handle: function handle(a, b, f, g) {\n            function d(d) {\n              l || (l = !0, c.preloadedAudios[b] = d, f && f(a));\n            }\n\n            function e() {\n              l || (l = !0, c.preloadedAudios[b] = new Audio(), g && g());\n            }\n\n            var l = !1;\n\n            if (Zb) {\n              try {\n                var n = new Blob([a], {\n                  type: bc(b)\n                });\n              } catch (q) {\n                return e();\n              }\n\n              n = ac.createObjectURL(n);\n              var u = new Audio();\n              u.addEventListener(\"canplaythrough\", function () {\n                d(u);\n              }, !1);\n\n              u.onerror = function () {\n                if (!l) {\n                  console.log(\"warning: browser could not fully decode audio \" + b + \", trying slower base64 approach\");\n\n                  for (var e = \"\", f = 0, g = 0, h = 0; h < a.length; h++) {\n                    for (f = f << 8 | a[h], g += 8; 6 <= g;) {\n                      var k = f >> g - 6 & 63;\n                      g -= 6;\n                      e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[k];\n                    }\n                  }\n\n                  2 == g ? (e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 3) << 4], e += \"==\") : 4 == g && (e += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 15) << 2], e += \"=\");\n                  u.src = \"data:audio/x-\" + b.substr(-3) + \";base64,\" + e;\n                  d(u);\n                }\n              };\n\n              u.src = n;\n              cc(function () {\n                d(u);\n              });\n            } else return e();\n          }\n        });\n        var b = c.canvas;\n        b && (b.requestPointerLock = b.requestPointerLock || b.mozRequestPointerLock || b.webkitRequestPointerLock || b.msRequestPointerLock || function () {}, b.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || document.msExitPointerLock || function () {}, b.exitPointerLock = b.exitPointerLock.bind(document), document.addEventListener(\"pointerlockchange\", a, !1), document.addEventListener(\"mozpointerlockchange\", a, !1), document.addEventListener(\"webkitpointerlockchange\", a, !1), document.addEventListener(\"mspointerlockchange\", a, !1), c.elementPointerLock && b.addEventListener(\"click\", function (a) {\n          !Ub && c.canvas.requestPointerLock && (c.canvas.requestPointerLock(), a.preventDefault());\n        }, !1));\n      }\n    }\n\n    function dc(a, b, d, e) {\n      if (b && c.Ub && a == c.canvas) return c.Ub;\n      var f;\n\n      if (b) {\n        var g = {\n          antialias: !1,\n          alpha: !1,\n          wc: 1\n        };\n        if (e) for (var k in e) {\n          g[k] = e[k];\n        }\n        if (\"undefined\" !== typeof GL && (f = GL.rc(a, g))) var h = GL.getContext(f).pc;\n      } else h = a.getContext(\"2d\");\n\n      if (!h) return null;\n      d && (b || B(\"undefined\" === typeof GLctx, \"cannot set in module if GLctx is used, but we are a non-GL context that would replace it\"), c.Ub = h, b && GL.xc(f), c.Ac = b, Vb.forEach(function (a) {\n        a();\n      }), Xb());\n      return h;\n    }\n\n    var ec = !1,\n        fc = void 0,\n        gc = void 0;\n\n    function hc(a, b, d) {\n      function e() {\n        Tb = !1;\n        var a = f.parentNode;\n        (document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a ? (f.exitFullscreen = ic, fc && f.requestPointerLock(), Tb = !0, gc ? (\"undefined\" != typeof SDL && (w[SDL.screen >> 2] = H[SDL.screen >> 2] | 8388608), jc(c.canvas), kc()) : jc(f)) : (a.parentNode.insertBefore(f, a), a.parentNode.removeChild(a), gc ? (\"undefined\" != typeof SDL && (w[SDL.screen >> 2] = H[SDL.screen >> 2] & -8388609), jc(c.canvas), kc()) : jc(f));\n        if (c.onFullScreen) c.onFullScreen(Tb);\n        if (c.onFullscreen) c.onFullscreen(Tb);\n      }\n\n      fc = a;\n      gc = b;\n      \"undefined\" === typeof fc && (fc = !0);\n      \"undefined\" === typeof gc && (gc = !1);\n      var f = c.canvas;\n      ec || (ec = !0, document.addEventListener(\"fullscreenchange\", e, !1), document.addEventListener(\"mozfullscreenchange\", e, !1), document.addEventListener(\"webkitfullscreenchange\", e, !1), document.addEventListener(\"MSFullscreenChange\", e, !1));\n      var g = document.createElement(\"div\");\n      f.parentNode.insertBefore(g, f);\n      g.appendChild(f);\n      g.requestFullscreen = g.requestFullscreen || g.mozRequestFullScreen || g.msRequestFullscreen || (g.webkitRequestFullscreen ? function () {\n        g.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null) || (g.webkitRequestFullScreen ? function () {\n        g.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null);\n      d ? g.requestFullscreen({\n        Bc: d\n      }) : g.requestFullscreen();\n    }\n\n    function mc(a, b, d) {\n      v(\"Browser.requestFullScreen() is deprecated. Please call Browser.requestFullscreen instead.\");\n\n      mc = function mc(a, b, d) {\n        hc(a, b, d);\n      };\n\n      hc(a, b, d);\n    }\n\n    function ic() {\n      if (!Tb) return !1;\n      (document.exitFullscreen || document.cancelFullScreen || document.mozCancelFullScreen || document.msExitFullscreen || document.webkitCancelFullScreen || function () {}).apply(document, []);\n      return !0;\n    }\n\n    var nc = 0;\n\n    function Lb(a) {\n      if (\"function\" === typeof requestAnimationFrame) requestAnimationFrame(a);else {\n        var b = Date.now();\n        if (0 === nc) nc = b + 1E3 / 60;else for (; b + 2 >= nc;) {\n          nc += 1E3 / 60;\n        }\n        setTimeout(a, Math.max(nc - b, 0));\n      }\n    }\n\n    function cc(a) {\n      c.noExitRuntime = !0;\n      setTimeout(function () {\n        A || a();\n      }, 1E4);\n    }\n\n    function bc(a) {\n      return {\n        jpg: \"image/jpeg\",\n        jpeg: \"image/jpeg\",\n        png: \"image/png\",\n        bmp: \"image/bmp\",\n        ogg: \"audio/ogg\",\n        wav: \"audio/wav\",\n        mp3: \"audio/mpeg\"\n      }[a.substr(a.lastIndexOf(\".\") + 1)];\n    }\n\n    var oc = [];\n\n    function kc() {\n      var a = c.canvas;\n      oc.forEach(function (b) {\n        b(a.width, a.height);\n      });\n    }\n\n    function jc(a, b, d) {\n      b && d ? (a.oc = b, a.fc = d) : (b = a.oc, d = a.fc);\n      var e = b,\n          f = d;\n      c.forcedAspectRatio && 0 < c.forcedAspectRatio && (e / f < c.forcedAspectRatio ? e = Math.round(f * c.forcedAspectRatio) : f = Math.round(e / c.forcedAspectRatio));\n\n      if ((document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a.parentNode && \"undefined\" != typeof screen) {\n        var g = Math.min(screen.width / e, screen.height / f);\n        e = Math.round(e * g);\n        f = Math.round(f * g);\n      }\n\n      gc ? (a.width != e && (a.width = e), a.height != f && (a.height = f), \"undefined\" != typeof a.style && (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))) : (a.width != b && (a.width = b), a.height != d && (a.height = d), \"undefined\" != typeof a.style && (e != b || f != d ? (a.style.setProperty(\"width\", e + \"px\", \"important\"), a.style.setProperty(\"height\", f + \"px\", \"important\")) : (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))));\n    }\n\n    var pc = {},\n        qc = 0;\n\n    function rc() {\n      var a = qc;\n      qc++;\n      return a;\n    }\n\n    var Yb, Zb, $b, ac;\n\n    function fa() {\n      return D.length;\n    }\n\n    function sc() {\n      if (\"undefined\" !== typeof indexedDB) return indexedDB;\n      var a = null;\n      \"object\" === (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) && (a = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB);\n      B(a, \"IDBStore used, but indexedDB not supported\");\n      return a;\n    }\n\n    var tc = {};\n\n    function uc(a, b) {\n      var d = tc[a];\n      if (d) b(null, d);else {\n        try {\n          var e = sc().open(a, 22);\n        } catch (f) {\n          b(f);\n          return;\n        }\n\n        e.onupgradeneeded = function (a) {\n          var b = a.target.result;\n          a = a.target.transaction;\n          b.objectStoreNames.contains(\"FILE_DATA\") ? a.objectStore(\"FILE_DATA\") : b.createObjectStore(\"FILE_DATA\");\n        };\n\n        e.onsuccess = function () {\n          d = e.result;\n          tc[a] = d;\n          b(null, d);\n        };\n\n        e.onerror = function (a) {\n          b(this.error);\n          a.preventDefault();\n        };\n      }\n    }\n\n    function vc(a, b, d) {\n      uc(a, function (a, f) {\n        if (a) return d(a);\n        a = f.transaction([\"FILE_DATA\"], b);\n\n        a.onerror = function (a) {\n          d(this.error || \"unknown error\");\n          a.preventDefault();\n        };\n\n        a = a.objectStore(\"FILE_DATA\");\n        d(null, a);\n      });\n    }\n\n    function wc(a, b, d) {\n      vc(a, \"readonly\", function (a, f) {\n        if (a) return d(a);\n        a = f.get(b);\n\n        a.onsuccess = function (a) {\n          return (a = a.target.result) ? d(null, a) : d(\"file \" + b + \" not found\");\n        };\n\n        a.onerror = function (a) {\n          d(a);\n        };\n      });\n    }\n\n    function xc(a, b, d, e) {\n      vc(a, \"readwrite\", function (a, g) {\n        if (a) return e(a);\n        a = g.put(d, b);\n\n        a.onsuccess = function () {\n          e();\n        };\n\n        a.onerror = function (a) {\n          e(a);\n        };\n      });\n    }\n\n    function yc(a) {\n      if (!c.noExitRuntime && (A = !0, Ba(Ga), c.onExit)) c.onExit(a);\n      c.quit(a, new Sb(a));\n    }\n\n    c._exit = yc;\n    na(\"GMT\", C, 17024, 4);\n\n    function zc() {\n      function a(a) {\n        return (a = a.toTimeString().match(/\\(([A-Za-z ]+)\\)$/)) ? a[1] : \"GMT\";\n      }\n\n      if (!Ac) {\n        Ac = !0;\n        w[Bc() >> 2] = 60 * new Date().getTimezoneOffset();\n        var b = new Date(2E3, 0, 1),\n            d = new Date(2E3, 6, 1);\n        w[Cc() >> 2] = Number(b.getTimezoneOffset() != d.getTimezoneOffset());\n        var e = a(b),\n            f = a(d);\n        e = qa(Dc(e));\n        f = qa(Dc(f));\n        d.getTimezoneOffset() < b.getTimezoneOffset() ? (w[Ec() >> 2] = e, w[Ec() + 4 >> 2] = f) : (w[Ec() >> 2] = f, w[Ec() + 4 >> 2] = e);\n      }\n    }\n\n    var Ac;\n\n    function Fc(a) {\n      a = ua(a);\n      var b = G.byteLength;\n\n      try {\n        return -1 !== z.grow((a - b) / 65536) ? (G = z.buffer, !0) : !1;\n      } catch (d) {\n        return !1;\n      }\n    }\n\n    Ga.push(function () {\n      var a = c._fflush;\n      a && a(0);\n      Wa[1].length && Xa(1, 10);\n      Wa[2].length && Xa(2, 10);\n    });\n    fb = c.InternalError = eb(\"InternalError\");\n\n    for (var Gc = Array(256), Hc = 0; 256 > Hc; ++Hc) {\n      Gc[Hc] = String.fromCharCode(Hc);\n    }\n\n    ib = Gc;\n    jb = c.BindingError = eb(\"BindingError\");\n\n    c.count_emval_handles = function () {\n      for (var a = 0, b = 5; b < S.length; ++b) {\n        void 0 !== S[b] && ++a;\n      }\n\n      return a;\n    };\n\n    c.get_first_emval = function () {\n      for (var a = 5; a < S.length; ++a) {\n        if (void 0 !== S[a]) return S[a];\n      }\n\n      return null;\n    };\n\n    tb = c.UnboundTypeError = eb(\"UnboundTypeError\");\n\n    c.requestFullScreen = function (a, b, d) {\n      v(\"Module.requestFullScreen is deprecated. Please call Module.requestFullscreen instead.\");\n      c.requestFullScreen = c.requestFullscreen;\n      mc(a, b, d);\n    };\n\n    c.requestFullscreen = function (a, b, d) {\n      hc(a, b, d);\n    };\n\n    c.requestAnimationFrame = function (a) {\n      Lb(a);\n    };\n\n    c.setCanvasSize = function (a, b, d) {\n      jc(c.canvas, a, b);\n      d || kc();\n    };\n\n    c.pauseMainLoop = function () {\n      X = null;\n      Z++;\n    };\n\n    c.resumeMainLoop = function () {\n      Z++;\n      var a = Fb,\n          b = Gb,\n          d = Hb;\n      Hb = null;\n      Mb(d);\n      Eb(a, b);\n      X();\n    };\n\n    c.getUserMedia = function () {\n      window.getUserMedia || (window.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia);\n      window.getUserMedia(void 0);\n    };\n\n    c.createContext = function (a, b, d, e) {\n      return dc(a, b, d, e);\n    };\n\n    \"undefined\" !== typeof dateNow ? Y = dateNow : \"object\" === (typeof performance === \"undefined\" ? \"undefined\" : _typeof(performance)) && performance && \"function\" === typeof performance.now ? Y = function Y() {\n      return performance.now();\n    } : Y = Date.now;\n\n    function Dc(a) {\n      var b = Array(ta(a) + 1);\n      na(a, b, 0, b.length);\n      return b;\n    }\n\n    var Kc = c.asm({}, {\n      k: x,\n      y: function y() {},\n      fa: function fa() {\n        v(\"missing function: _ZN5Umbra13MiniSceneCopy7connectERK20UmbraSceneCopySource\");\n        x(-1);\n      },\n      ba: function ba() {\n        v(\"missing function: _ZN5Umbra13MiniSceneCopy9getStatusEPf\");\n        x(-1);\n      },\n      C: function C() {\n        v(\"missing function: _ZN5Umbra13MiniSceneCopyC1ERNS_11MiniRuntimeERK25UmbraSceneCopyDestinationPK20UmbraEnvironmentInfoRKN5Eigen6MatrixIfLi3ELi1ELi0ELi3ELi1EEEfi\");\n        x(-1);\n      },\n      Z: Ua,\n      U: function U() {\n        return Va.apply(null, arguments);\n      },\n      v: function v() {},\n      x: function x(a) {\n        c.___errno_location && (w[c.___errno_location() >> 2] = a);\n        return a;\n      },\n      M: function M(a, b) {\n        _L = b;\n\n        try {\n          return Ya.Yb(), _M(), _M(), _M(), _M(), 0;\n        } catch (d) {\n          return x(d), -d.Tb;\n        }\n      },\n      L: function L(a, b) {\n        _L = b;\n\n        try {\n          var d = Ya.Yb(),\n              e = _M(),\n              f = _M();\n\n          return Ya.sc(d, e, f);\n        } catch (g) {\n          return x(g), -g.Tb;\n        }\n      },\n      K: function K(a, b) {\n        _L = b;\n\n        try {\n          var d = _M(),\n              e = _M(),\n              f = _M();\n\n          for (b = a = 0; b < f; b++) {\n            for (var g = w[e + 8 * b >> 2], k = w[e + (8 * b + 4) >> 2], h = 0; h < k; h++) {\n              Xa(d, C[g + h]);\n            }\n\n            a += k;\n          }\n\n          return a;\n        } catch (l) {\n          return x(l), -l.Tb;\n        }\n      },\n      ea: function ea(a, b) {\n        _L = b;\n\n        try {\n          var d = _E(_M()),\n              e = _M();\n\n          return Ya.tc((void 0).stat, d, e);\n        } catch (f) {\n          return x(f), -f.Tb;\n        }\n      },\n      J: function J(a, b) {\n        _L = b;\n        return 0;\n      },\n      da: function da(a, b) {\n        _L = b;\n\n        try {\n          var d = _E(_M()),\n              e = _M(),\n              f = _M();\n\n          return (void 0).open(d, e, f).vc;\n        } catch (g) {\n          return x(g), -g.Tb;\n        }\n      },\n      I: function I(a, b) {\n        _L = b;\n        return 0;\n      },\n      H: function H(a, b) {\n        _L = b;\n\n        try {\n          return Ya.Yb(), 0;\n        } catch (d) {\n          return x(d), -d.Tb;\n        }\n      },\n      w: function w() {},\n      G: function G(a) {\n        var b = Za[a];\n        delete Za[a];\n        var d = b.jc,\n            e = b.kc,\n            f = b.Xb,\n            g = f.map(function (a) {\n          return a.ec;\n        }).concat(f.map(function (a) {\n          return a.mc;\n        }));\n        gb([a], g, function (a) {\n          var g = {};\n          f.forEach(function (b, d) {\n            var e = a[d],\n                h = b.cc,\n                k = b.dc,\n                l = a[d + f.length],\n                n = b.lc,\n                Da = b.nc;\n            g[b.bc] = {\n              read: function read(a) {\n                return e.fromWireType(h(k, a));\n              },\n              write: function write(a, b) {\n                var d = [];\n                n(Da, a, l.toWireType(d, b));\n                $a(d);\n              }\n            };\n          });\n          return [{\n            name: b.name,\n            fromWireType: function fromWireType(a) {\n              var b = {},\n                  d;\n\n              for (d in g) {\n                b[d] = g[d].read(a);\n              }\n\n              e(a);\n              return b;\n            },\n            toWireType: function toWireType(a, b) {\n              for (var f in g) {\n                if (!(f in b)) throw new TypeError(\"Missing field\");\n              }\n\n              var h = d();\n\n              for (f in g) {\n                g[f].write(h, b[f]);\n              }\n\n              null !== a && a.push(e, h);\n              return h;\n            },\n            argPackAdvance: 8,\n            readValueFromPointer: ab,\n            Rb: e\n          }];\n        });\n      },\n      ca: function ca(a, b, d, e, f) {\n        var g = hb(d);\n        b = Q(b);\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return !!a;\n          },\n          toWireType: function toWireType(a, b) {\n            return b ? e : f;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: function readValueFromPointer(a) {\n            if (1 === d) var e = D;else if (2 === d) e = va;else if (4 === d) e = w;else throw new TypeError(\"Unknown boolean type size: \" + b);\n            return this.fromWireType(e[a >> g]);\n          },\n          Rb: null\n        });\n      },\n      p: function p(a, b, d) {\n        a = Q(a);\n        gb([], [b], function (b) {\n          b = b[0];\n          c[a] = b.fromWireType(d);\n          return [];\n        });\n      },\n      aa: function aa(a, b) {\n        b = Q(b);\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = S[a].value;\n            lb(a);\n            return b;\n          },\n          toWireType: function toWireType(a, b) {\n            return U(b);\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: ab,\n          Rb: null\n        });\n      },\n      F: function F(a, b, d) {\n        d = hb(d);\n        b = Q(b);\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return a;\n          },\n          toWireType: function toWireType(a, b) {\n            if (\"number\" !== typeof b && \"boolean\" !== typeof b) throw new TypeError('Cannot convert \"' + mb(b) + '\" to ' + this.name);\n            return b;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: nb(b, d),\n          Rb: null\n        });\n      },\n      j: function j(a, b, d, e, f, g) {\n        var k = rb(b, d);\n        a = Q(a);\n        f = sb(e, f);\n        qb(a, function () {\n          wb(\"Cannot call \" + a + \" due to unbound types\", k);\n        }, b - 1);\n        gb([], k, function (d) {\n          var e = a,\n              h = a;\n          d = [d[0], null].concat(d.slice(1));\n          var k = f,\n              q = d.length;\n          2 > q && R(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n\n          for (var t = null !== d[1] && !1, y = !1, p = 1; p < d.length; ++p) {\n            if (null !== d[p] && void 0 === d[p].Rb) {\n              y = !0;\n              break;\n            }\n          }\n\n          var Da = \"void\" !== d[0].name,\n              T = \"\",\n              ca = \"\";\n\n          for (p = 0; p < q - 2; ++p) {\n            T += (0 !== p ? \", \" : \"\") + \"arg\" + p, ca += (0 !== p ? \", \" : \"\") + \"arg\" + p + \"Wired\";\n          }\n\n          h = \"return function \" + cb(h) + \"(\" + T + \") {\\nif (arguments.length !== \" + (q - 2) + \") {\\nthrowBindingError('function \" + h + \" called with ' + arguments.length + ' arguments, expected \" + (q - 2) + \" args!');\\n}\\n\";\n          y && (h += \"var destructors = [];\\n\");\n          var Wb = y ? \"destructors\" : \"null\";\n          T = \"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");\n          k = [R, k, g, $a, d[0], d[1]];\n          t && (h += \"var thisWired = classParam.toWireType(\" + Wb + \", this);\\n\");\n\n          for (p = 0; p < q - 2; ++p) {\n            h += \"var arg\" + p + \"Wired = argType\" + p + \".toWireType(\" + Wb + \", arg\" + p + \"); // \" + d[p + 2].name + \"\\n\", T.push(\"argType\" + p), k.push(d[p + 2]);\n          }\n\n          t && (ca = \"thisWired\" + (0 < ca.length ? \", \" : \"\") + ca);\n          h += (Da ? \"var rv = \" : \"\") + \"invoker(fn\" + (0 < ca.length ? \", \" : \"\") + ca + \");\\n\";\n          if (y) h += \"runDestructors(destructors);\\n\";else for (p = t ? 1 : 2; p < d.length; ++p) {\n            q = 1 === p ? \"thisWired\" : \"arg\" + (p - 2) + \"Wired\", null !== d[p].Rb && (h += q + \"_dtor(\" + q + \"); // \" + d[p].name + \"\\n\", T.push(q + \"_dtor\"), k.push(d[p].Rb));\n          }\n          Da && (h += \"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");\n          T.push(h + \"}\\n\");\n          d = ob(T).apply(null, k);\n          p = b - 1;\n          if (!c.hasOwnProperty(e)) throw new fb(\"Replacing nonexistant public symbol\");\n          void 0 !== c[e].Qb && void 0 !== p ? c[e].Qb[p] = d : (c[e] = d, c[e].$b = p);\n          return [];\n        });\n      },\n      s: function s(a, b, d, e, f) {\n        function g(a) {\n          return a;\n        }\n\n        b = Q(b);\n        -1 === f && (f = 4294967295);\n        var k = hb(d);\n\n        if (0 === e) {\n          var h = 32 - 8 * d;\n\n          g = function g(a) {\n            return a << h >>> h;\n          };\n        }\n\n        var l = -1 != b.indexOf(\"unsigned\");\n        P(a, {\n          name: b,\n          fromWireType: g,\n          toWireType: function toWireType(a, d) {\n            if (\"number\" !== typeof d && \"boolean\" !== typeof d) throw new TypeError('Cannot convert \"' + mb(d) + '\" to ' + this.name);\n            if (d < e || d > f) throw new TypeError('Passing a number \"' + mb(d) + '\" from JS side to C/C++ side to an argument of type \"' + b + '\", which is outside the valid range [' + e + \", \" + f + \"]!\");\n            return l ? d >>> 0 : d | 0;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: xb(b, k, 0 !== e),\n          Rb: null\n        });\n      },\n      o: function o(a, b, d) {\n        function e(a) {\n          a >>= 2;\n          var b = H;\n          return new f(b.buffer, b[a + 1], b[a]);\n        }\n\n        var f = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array][b];\n        d = Q(d);\n        P(a, {\n          name: d,\n          fromWireType: e,\n          argPackAdvance: 8,\n          readValueFromPointer: e\n        }, {\n          gc: !0\n        });\n      },\n      E: function E(a, b) {\n        b = Q(b);\n        var d = \"std::string\" === b;\n        P(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = H[a >> 2];\n\n            if (d) {\n              var e = C[a + 4 + b],\n                  k = 0;\n              0 != e && (k = e, C[a + 4 + b] = 0);\n              var h = a + 4;\n\n              for (e = 0; e <= b; ++e) {\n                var l = a + 4 + e;\n\n                if (0 == C[l]) {\n                  h = _E(h);\n                  if (void 0 === n) var n = h;else n += String.fromCharCode(0), n += h;\n                  h = l + 1;\n                }\n              }\n\n              0 != k && (C[a + 4 + b] = k);\n            } else {\n              n = Array(b);\n\n              for (e = 0; e < b; ++e) {\n                n[e] = String.fromCharCode(C[a + 4 + e]);\n              }\n\n              n = n.join(\"\");\n            }\n\n            V(a);\n            return n;\n          },\n          toWireType: function toWireType(a, b) {\n            b instanceof ArrayBuffer && (b = new Uint8Array(b));\n            var e = \"string\" === typeof b;\n            e || b instanceof Uint8Array || b instanceof Uint8ClampedArray || b instanceof Int8Array || R(\"Cannot pass non-string to std::string\");\n            var f = (d && e ? function () {\n              return ta(b);\n            } : function () {\n              return b.length;\n            })(),\n                h = F(4 + f + 1);\n            H[h >> 2] = f;\n            if (d && e) na(b, C, h + 4, f + 1);else if (e) for (e = 0; e < f; ++e) {\n              var l = b.charCodeAt(e);\n              255 < l && (V(h), R(\"String has UTF-16 code units that do not fit in 8 bits\"));\n              C[h + 4 + e] = l;\n            } else for (e = 0; e < f; ++e) {\n              C[h + 4 + e] = b[e];\n            }\n            null !== a && a.push(V, h);\n            return h;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: ab,\n          Rb: function Rb(a) {\n            V(a);\n          }\n        });\n      },\n      $: function $(a, b, d) {\n        d = Q(d);\n\n        if (2 === b) {\n          var e = function e() {\n            return wa;\n          };\n\n          var f = 1;\n        } else 4 === b && (e = function e() {\n          return H;\n        }, f = 2);\n\n        P(a, {\n          name: d,\n          fromWireType: function fromWireType(a) {\n            for (var b = e(), d = H[a >> 2], g = Array(d), n = a + 4 >> f, u = 0; u < d; ++u) {\n              g[u] = String.fromCharCode(b[n + u]);\n            }\n\n            V(a);\n            return g.join(\"\");\n          },\n          toWireType: function toWireType(a, d) {\n            var g = e(),\n                k = d.length,\n                n = F(4 + k * b);\n            H[n >> 2] = k;\n\n            for (var u = n + 4 >> f, q = 0; q < k; ++q) {\n              g[u + q] = d.charCodeAt(q);\n            }\n\n            null !== a && a.push(V, n);\n            return n;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: ab,\n          Rb: function Rb(a) {\n            V(a);\n          }\n        });\n      },\n      D: function D(a, b, d, e, f, g) {\n        Za[a] = {\n          name: Q(b),\n          jc: sb(d, e),\n          kc: sb(f, g),\n          Xb: []\n        };\n      },\n      t: function t(a, b, d, e, f, g, k, h, l, n) {\n        Za[a].Xb.push({\n          bc: Q(b),\n          ec: d,\n          cc: sb(e, f),\n          dc: g,\n          mc: k,\n          lc: sb(h, l),\n          nc: n\n        });\n      },\n      _: function _(a, b) {\n        b = Q(b);\n        P(a, {\n          hc: !0,\n          name: b,\n          argPackAdvance: 0,\n          fromWireType: function fromWireType() {},\n          toWireType: function toWireType() {}\n        });\n      },\n      i: function i(a, b, d) {\n        a = W(a);\n        b = yb(b, \"emval::as\");\n        var e = [],\n            f = U(e);\n        w[d >> 2] = f;\n        return b.toWireType(e, a);\n      },\n      m: function m(a, b, d, e) {\n        a = Bb[a];\n        b = W(b);\n        d = Ab(d);\n        a(b, d, null, e);\n      },\n      c: lb,\n      l: function l(a, b) {\n        b = Db(a, b);\n\n        for (var d = b[0], e = d.name + \"_$\" + b.slice(1).map(function (a) {\n          return a.name;\n        }).join(\"_\") + \"$\", f = [\"retType\"], g = [d], k = \"\", h = 0; h < a - 1; ++h) {\n          k += (0 !== h ? \", \" : \"\") + \"arg\" + h, f.push(\"argType\" + h), g.push(b[1 + h]);\n        }\n\n        e = \"return function \" + cb(\"methodCaller_\" + e) + \"(handle, name, destructors, args) {\\n\";\n        var l = 0;\n\n        for (h = 0; h < a - 1; ++h) {\n          e += \"    var arg\" + h + \" = argType\" + h + \".readValueFromPointer(args\" + (l ? \"+\" + l : \"\") + \");\\n\", l += b[h + 1].argPackAdvance;\n        }\n\n        e += \"    var rv = handle[name](\" + k + \");\\n\";\n\n        for (h = 0; h < a - 1; ++h) {\n          b[h + 1].deleteObject && (e += \"    argType\" + h + \".deleteObject(arg\" + h + \");\\n\");\n        }\n\n        d.hc || (e += \"    return retType.toWireType(destructors, rv);\\n\");\n        f.push(e + \"};\\n\");\n        a = ob(f).apply(null, g);\n        return Cb(a);\n      },\n      g: function g(a, b) {\n        a = W(a);\n        b = W(b);\n        return U(a[b]);\n      },\n      u: function u(a) {\n        4 < a && (S[a].Wb += 1);\n      },\n      r: function r() {\n        return U([]);\n      },\n      e: function e(a) {\n        return U(Ab(a));\n      },\n      q: function q() {\n        return U({});\n      },\n      h: function h(a) {\n        $a(S[a].value);\n        lb(a);\n      },\n      f: function f(a, b, d) {\n        a = W(a);\n        b = W(b);\n        d = W(d);\n        a[b] = d;\n      },\n      d: function d(a, b) {\n        a = yb(a, \"_emval_take_value\");\n        a = a.readValueFromPointer(b);\n        return U(a);\n      },\n      Y: function Y() {\n        c.abort();\n      },\n      B: function B(a) {\n        return Sa[a]();\n      },\n      X: function X(a, b, d, e, f, g, k, h, l, n, u, q) {\n        return Sa[a](b, d, e, f, g, k, h, l, n, u, q);\n      },\n      A: function A(a) {\n        (a = pc[a]) && a.abort();\n      },\n      W: fa,\n      n: Y,\n      z: function z(a, b, d, e, f) {\n        wc(_E(a), _E(b), function (a, b) {\n          a ? f && Ic(f, d) : (a = F(b.length), C.set(b, a), Jc(e, d, a, b.length), V(a));\n        });\n      },\n      V: function V(a, b, d, e, f, g, k) {\n        xc(_E(a), _E(b), new Uint8Array(C.subarray(d, d + e)), function (a) {\n          a ? k && Ic(k, f) : g && Ic(g, f);\n        });\n      },\n      T: function T(a, b, d) {\n        C.set(C.subarray(b, b + d), a);\n      },\n      S: function S(a) {\n        if (2147418112 < a) return !1;\n\n        for (var b = Math.max(fa(), 16777216); b < a;) {\n          536870912 >= b ? b = ua(2 * b) : b = Math.min(ua((3 * b + 2147483648) / 4), 2147418112);\n        }\n\n        if (!Fc(b)) return !1;\n        za();\n        return !0;\n      },\n      R: yc,\n      Q: function Q() {\n        x(\"trap!\");\n      },\n      P: function P(a) {\n        zc();\n        a = new Date(1E3 * w[a >> 2]);\n        w[4244] = a.getSeconds();\n        w[4245] = a.getMinutes();\n        w[4246] = a.getHours();\n        w[4247] = a.getDate();\n        w[4248] = a.getMonth();\n        w[4249] = a.getFullYear() - 1900;\n        w[4250] = a.getDay();\n        var b = new Date(a.getFullYear(), 0, 1);\n        w[4251] = (a.getTime() - b.getTime()) / 864E5 | 0;\n        w[4253] = -(60 * a.getTimezoneOffset());\n        var d = new Date(2E3, 6, 1).getTimezoneOffset();\n        b = b.getTimezoneOffset();\n        a = (d != b && a.getTimezoneOffset() == Math.min(b, d)) | 0;\n        w[4252] = a;\n        a = w[Ec() + (a ? 4 : 0) >> 2];\n        w[4254] = a;\n        return 16976;\n      },\n      O: function O(a) {\n        var b = Date.now() / 1E3 | 0;\n        a && (w[a >> 2] = b);\n        return b;\n      },\n      N: function N() {\n        x(\"OOM\");\n      },\n      a: ea,\n      b: 16960\n    }, G);\n    c.asm = Kc;\n\n    c._UmbraAssetLoadAbortRequested = function () {\n      return c.asm.ga.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadFinish = function () {\n      return c.asm.ha.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadGetType = function () {\n      return c.asm.ia.apply(null, arguments);\n    };\n\n    c._UmbraAssetLoadPrepare = function () {\n      return c.asm.ja.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadFinish = function () {\n      return c.asm.ka.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadGetType = function () {\n      return c.asm.la.apply(null, arguments);\n    };\n\n    c._UmbraAssetUnloadGetUserPointer = function () {\n      return c.asm.ma.apply(null, arguments);\n    };\n\n    c._UmbraClientCreate = function () {\n      return c.asm.na.apply(null, arguments);\n    };\n\n    c._UmbraClientDestroy = function () {\n      return c.asm.oa.apply(null, arguments);\n    };\n\n    c._UmbraConfigInit = function () {\n      return c.asm.pa.apply(null, arguments);\n    };\n\n    c._UmbraEcefToGeodetic = function () {\n      return c.asm.qa.apply(null, arguments);\n    };\n\n    c._UmbraEnvironmentInfoDefaults = function () {\n      return c.asm.ra.apply(null, arguments);\n    };\n\n    c._UmbraGeodeticToEcef = function () {\n      return c.asm.sa.apply(null, arguments);\n    };\n\n    c._UmbraGetLibraryInfo = function () {\n      return c.asm.ta.apply(null, arguments);\n    };\n\n    c._UmbraMaterialLoadGetInfo = function () {\n      return c.asm.ua.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadFinishExternal = function () {\n      return c.asm.va.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadGetData = function () {\n      return c.asm.wa.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadGetInfo = function () {\n      return c.asm.xa.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadGetSerializedSize = function () {\n      return c.asm.ya.apply(null, arguments);\n    };\n\n    c._UmbraMeshLoadSerialize = function () {\n      return c.asm.za.apply(null, arguments);\n    };\n\n    c._UmbraMeshStreamDone = function () {\n      return c.asm.Aa.apply(null, arguments);\n    };\n\n    c._UmbraMeshStreamNext = function () {\n      return c.asm.Ba.apply(null, arguments);\n    };\n\n    c._UmbraMeshStreamSetBuffers = function () {\n      return c.asm.Ca.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeCreate = function () {\n      return c.asm.Da.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeDestroy = function () {\n      return c.asm.Ea.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeGetStreamingState = function () {\n      return c.asm.Fa.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeNextAssetLoad = function () {\n      return c.asm.Ga.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeNextAssetUnload = function () {\n      return c.asm.Ha.apply(null, arguments);\n    };\n\n    c._UmbraRuntimeUpdate = function () {\n      return c.asm.Ia.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyCreate = function () {\n      return c.asm.Ja.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyDestroy = function () {\n      return c.asm.Ka.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyGetError = function () {\n      return c.asm.La.apply(null, arguments);\n    };\n\n    c._UmbraSceneCopyGetStatus = function () {\n      return c.asm.Ma.apply(null, arguments);\n    };\n\n    c._UmbraSceneCreate = function () {\n      return c.asm.Na.apply(null, arguments);\n    };\n\n    c._UmbraSceneCreateLocal = function () {\n      return c.asm.Oa.apply(null, arguments);\n    };\n\n    c._UmbraSceneCreatePublic = function () {\n      return c.asm.Pa.apply(null, arguments);\n    };\n\n    c._UmbraSceneDestroy = function () {\n      return c.asm.Qa.apply(null, arguments);\n    };\n\n    c._UmbraSceneGetConnectionStatus = function () {\n      return c.asm.Ra.apply(null, arguments);\n    };\n\n    c._UmbraSceneGetInfo = function () {\n      return c.asm.Sa.apply(null, arguments);\n    };\n\n    c._UmbraSceneSetTransform = function () {\n      return c.asm.Ta.apply(null, arguments);\n    };\n\n    c._UmbraSetAllocator = function () {\n      return c.asm.Ua.apply(null, arguments);\n    };\n\n    c._UmbraSetHttp = function () {\n      return c.asm.Va.apply(null, arguments);\n    };\n\n    c._UmbraSetLogger = function () {\n      return c.asm.Wa.apply(null, arguments);\n    };\n\n    c._UmbraTextureGetMipmapLevelByteSize = function () {\n      return c.asm.Xa.apply(null, arguments);\n    };\n\n    c._UmbraTextureGetMipmapLevelOffset = function () {\n      return c.asm.Ya.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadGetData = function () {\n      return c.asm.Za.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadGetInfo = function () {\n      return c.asm._a.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadGetSerializedSize = function () {\n      return c.asm.$a.apply(null, arguments);\n    };\n\n    c._UmbraTextureLoadSerialize = function () {\n      return c.asm.ab.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataGetClassification = function () {\n      return c.asm.bb.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataGetClassificationAmount = function () {\n      return c.asm.cb.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataGetClassificationCount = function () {\n      return c.asm.db.apply(null, arguments);\n    };\n\n    c._UmbraTextureMetaDataLoadGetData = function () {\n      return c.asm.eb.apply(null, arguments);\n    };\n\n    c._UmbraVertexAttributeGetElementByteSize = function () {\n      return c.asm.fb.apply(null, arguments);\n    };\n\n    c._UmbraViewCreate = function () {\n      return c.asm.gb.apply(null, arguments);\n    };\n\n    c._UmbraViewDestroy = function () {\n      return c.asm.hb.apply(null, arguments);\n    };\n\n    c._UmbraViewGetCompleted = function () {\n      return c.asm.ib.apply(null, arguments);\n    };\n\n    c._UmbraViewNextRenderables = function () {\n      return c.asm.jb.apply(null, arguments);\n    };\n\n    c._UmbraViewRayQuery = function () {\n      return c.asm.kb.apply(null, arguments);\n    };\n\n    c._UmbraViewResetRenderables = function () {\n      return c.asm.lb.apply(null, arguments);\n    };\n\n    c._UmbraViewUpdateFilter = function () {\n      return c.asm.mb.apply(null, arguments);\n    };\n\n    c._UmbraViewUpdateRendering = function () {\n      return c.asm.nb.apply(null, arguments);\n    };\n\n    c.___embind_register_native_and_builtin_types = function () {\n      return c.asm.ob.apply(null, arguments);\n    };\n\n    var vb = c.___getTypeName = function () {\n      return c.asm.pb.apply(null, arguments);\n    },\n        Cc = c.__get_daylight = function () {\n      return c.asm.qb.apply(null, arguments);\n    },\n        Bc = c.__get_timezone = function () {\n      return c.asm.rb.apply(null, arguments);\n    },\n        Ec = c.__get_tzname = function () {\n      return c.asm.sb.apply(null, arguments);\n    },\n        V = c._free = function () {\n      return c.asm.tb.apply(null, arguments);\n    },\n        F = c._malloc = function () {\n      return c.asm.ub.apply(null, arguments);\n    },\n        Ta = c.globalCtors = function () {\n      return c.asm.Mb.apply(null, arguments);\n    },\n        ma = c.stackAlloc = function () {\n      return c.asm.Nb.apply(null, arguments);\n    },\n        pa = c.stackRestore = function () {\n      return c.asm.Ob.apply(null, arguments);\n    },\n        oa = c.stackSave = function () {\n      return c.asm.Pb.apply(null, arguments);\n    };\n\n    c.dynCall_i = function () {\n      return c.asm.vb.apply(null, arguments);\n    };\n\n    c.dynCall_ii = function () {\n      return c.asm.wb.apply(null, arguments);\n    };\n\n    c.dynCall_iii = function () {\n      return c.asm.xb.apply(null, arguments);\n    };\n\n    c.dynCall_iiii = function () {\n      return c.asm.yb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiii = function () {\n      return c.asm.zb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiii = function () {\n      return c.asm.Ab.apply(null, arguments);\n    };\n\n    c.dynCall_iiiiiiiiii = function () {\n      return c.asm.Bb.apply(null, arguments);\n    };\n\n    c.dynCall_iiiji = function () {\n      return c.asm.Cb.apply(null, arguments);\n    };\n\n    c.dynCall_jiji = function () {\n      return c.asm.Db.apply(null, arguments);\n    };\n\n    c.dynCall_v = function () {\n      return c.asm.Eb.apply(null, arguments);\n    };\n\n    var Ic = c.dynCall_vi = function () {\n      return c.asm.Fb.apply(null, arguments);\n    };\n\n    c.dynCall_vii = function () {\n      return c.asm.Gb.apply(null, arguments);\n    };\n\n    var Jc = c.dynCall_viii = function () {\n      return c.asm.Hb.apply(null, arguments);\n    };\n\n    c.dynCall_viiii = function () {\n      return c.asm.Ib.apply(null, arguments);\n    };\n\n    c.dynCall_viiiii = function () {\n      return c.asm.Jb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiiii = function () {\n      return c.asm.Kb.apply(null, arguments);\n    };\n\n    c.dynCall_viiiiiiiii = function () {\n      return c.asm.Lb.apply(null, arguments);\n    };\n\n    c.asm = Kc;\n\n    c.cwrap = function (a, b, d, e) {\n      d = d || [];\n      var f = d.every(function (a) {\n        return \"number\" === a;\n      });\n      return \"string\" !== b && f && !e ? ka(a) : function () {\n        return la(a, b, d, arguments);\n      };\n    };\n\n    c.then = function (a) {\n      if (c.calledRun) a(c);else {\n        var b = c.onRuntimeInitialized;\n\n        c.onRuntimeInitialized = function () {\n          b && b();\n          a(c);\n        };\n      }\n      return c;\n    };\n\n    function Sb(a) {\n      this.name = \"ExitStatus\";\n      this.message = \"Program terminated with exit(\" + a + \")\";\n      this.status = a;\n    }\n\n    Sb.prototype = Error();\n    Sb.prototype.constructor = Sb;\n\n    La = function Lc() {\n      c.calledRun || Mc();\n      c.calledRun || (La = Lc);\n    };\n\n    function Mc() {\n      function a() {\n        if (!c.calledRun && (c.calledRun = !0, !A)) {\n          Ia = !0;\n          Ba(Ea);\n          Ba(Fa);\n          if (c.onRuntimeInitialized) c.onRuntimeInitialized();\n          if (c.postRun) for (\"function\" == typeof c.postRun && (c.postRun = [c.postRun]); c.postRun.length;) {\n            var a = c.postRun.shift();\n            Ha.unshift(a);\n          }\n          Ba(Ha);\n        }\n      }\n\n      if (!(0 < I)) {\n        if (c.preRun) for (\"function\" == typeof c.preRun && (c.preRun = [c.preRun]); c.preRun.length;) {\n          Ja();\n        }\n        Ba(Ca);\n        0 < I || c.calledRun || (c.setStatus ? (c.setStatus(\"Running...\"), setTimeout(function () {\n          setTimeout(function () {\n            c.setStatus(\"\");\n          }, 1);\n          a();\n        }, 1)) : a());\n      }\n    }\n\n    c.run = Mc;\n\n    function x(a) {\n      if (c.onAbort) c.onAbort(a);\n      ba(a);\n      v(a);\n      A = !0;\n      throw \"abort(\" + a + \"). Build with -s ASSERTIONS=1 for more info.\";\n    }\n\n    c.abort = x;\n    if (c.preInit) for (\"function\" == typeof c.preInit && (c.preInit = [c.preInit]); 0 < c.preInit.length;) {\n      c.preInit.pop()();\n    }\n    Mc();\n    c.maxBytesDownloaded = 0;\n    c.minBytesDownloaded = 0;\n    c.URLsDownloaded = new Set([]);\n    c.wgetRequests = pc;\n\n    function Ra(a, b, d, e, f, g, k, h, l, n, u) {\n      var q = _E(a);\n\n      b = _E(b);\n      g = _E(g);\n      var t = new XMLHttpRequest();\n      t.open(b, q, !0);\n      if (\"GET\" != b || 0 != g.length) t.withCredentials = !0;\n      t.responseType = \"arraybuffer\";\n      var y = rc();\n\n      t.onload = function () {\n        if (200 == t.status) {\n          var b = new Uint8Array(t.response),\n              g = c.URLsDownloaded;\n          c.maxBytesDownloaded += t.response.byteLength;\n          g.has(a) || (g.add(a), c.minBytesDownloaded += t.response.byteLength);\n          n ? b.length != u ? c.dynCall_viii(f, y, d, 0) : (C.set(b, n), c.dynCall_viiii(e, y, d, null, 0)) : (g = F(b.length), C.set(b, g), c.dynCall_viiii(e, y, d, g, b.length), V(g));\n        } else c.dynCall_viii(f, y, d, t.status);\n\n        delete pc[y];\n      };\n\n      t.onerror = function () {\n        c.dynCall_viii(f, y, d, t.status);\n        delete pc[y];\n      };\n\n      t.onabort = function () {\n        delete pc[y];\n      };\n\n      0 != g.length && t.setRequestHeader(\"Authorization\", \"Basic \" + btoa(g + \":\"));\n      l = _E(l).split(\"\\n\");\n      if (2 <= l.length) for (q = 0; q < l.length; q += 2) {\n        t.setRequestHeader(l[q], l[q + 1]);\n      }\n      \"POST\" == b ? t.send(D.slice(k, k + h)) : t.send(null);\n      pc[y] = t;\n      return y;\n    }\n    return UmbraNativeAPI;\n  };\n}();\n\n// Generated at 2020-03-06 16:29:11\nvar MatrixFormat;\n\n(function (MatrixFormat) {\n  MatrixFormat[MatrixFormat[\"ColumnMajor\"] = 0] = \"ColumnMajor\";\n  MatrixFormat[MatrixFormat[\"RowMajor\"] = 1] = \"RowMajor\";\n  MatrixFormat[MatrixFormat[\"Count\"] = 2] = \"Count\";\n})(MatrixFormat || (MatrixFormat = {}));\n\nvar TextureType;\n\n(function (TextureType) {\n  TextureType[TextureType[\"Diffuse\"] = 0] = \"Diffuse\";\n  TextureType[TextureType[\"Normal\"] = 1] = \"Normal\";\n  TextureType[TextureType[\"Specular\"] = 2] = \"Specular\";\n  TextureType[TextureType[\"MetaIndex\"] = 3] = \"MetaIndex\";\n  TextureType[TextureType[\"Count\"] = 4] = \"Count\";\n})(TextureType || (TextureType = {}));\n\nvar TextureFormat;\n\n(function (TextureFormat) {\n  TextureFormat[TextureFormat[\"RGBA32\"] = 0] = \"RGBA32\";\n  TextureFormat[TextureFormat[\"RGB24\"] = 1] = \"RGB24\";\n  TextureFormat[TextureFormat[\"BC1\"] = 2] = \"BC1\";\n  TextureFormat[TextureFormat[\"BC3\"] = 3] = \"BC3\";\n  TextureFormat[TextureFormat[\"BC4\"] = 4] = \"BC4\";\n  TextureFormat[TextureFormat[\"BC5\"] = 5] = \"BC5\";\n  TextureFormat[TextureFormat[\"ETC1_RGB\"] = 6] = \"ETC1_RGB\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT32\"] = 7] = \"RGBA_FLOAT32\";\n  TextureFormat[TextureFormat[\"UNC1\"] = 8] = \"UNC1\";\n  TextureFormat[TextureFormat[\"JPEG\"] = 9] = \"JPEG\";\n  TextureFormat[TextureFormat[\"PNG\"] = 10] = \"PNG\";\n  TextureFormat[TextureFormat[\"BMP\"] = 11] = \"BMP\";\n  TextureFormat[TextureFormat[\"PSD\"] = 12] = \"PSD\";\n  TextureFormat[TextureFormat[\"TGA\"] = 13] = \"TGA\";\n  TextureFormat[TextureFormat[\"GIF\"] = 14] = \"GIF\";\n  TextureFormat[TextureFormat[\"HDR\"] = 15] = \"HDR\";\n  TextureFormat[TextureFormat[\"PIC\"] = 16] = \"PIC\";\n  TextureFormat[TextureFormat[\"PNM\"] = 17] = \"PNM\";\n  TextureFormat[TextureFormat[\"ASTC_4X4\"] = 18] = \"ASTC_4X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X4\"] = 19] = \"ASTC_5X4\";\n  TextureFormat[TextureFormat[\"ASTC_5X5\"] = 20] = \"ASTC_5X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X5\"] = 21] = \"ASTC_6X5\";\n  TextureFormat[TextureFormat[\"ASTC_6X6\"] = 22] = \"ASTC_6X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X5\"] = 23] = \"ASTC_8X5\";\n  TextureFormat[TextureFormat[\"ASTC_8X6\"] = 24] = \"ASTC_8X6\";\n  TextureFormat[TextureFormat[\"ASTC_10X5\"] = 25] = \"ASTC_10X5\";\n  TextureFormat[TextureFormat[\"ASTC_10X6\"] = 26] = \"ASTC_10X6\";\n  TextureFormat[TextureFormat[\"ASTC_8X8\"] = 27] = \"ASTC_8X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X8\"] = 28] = \"ASTC_10X8\";\n  TextureFormat[TextureFormat[\"ASTC_10X10\"] = 29] = \"ASTC_10X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X10\"] = 30] = \"ASTC_12X10\";\n  TextureFormat[TextureFormat[\"ASTC_12X12\"] = 31] = \"ASTC_12X12\";\n  TextureFormat[TextureFormat[\"ARGB32\"] = 32] = \"ARGB32\";\n  TextureFormat[TextureFormat[\"R8\"] = 33] = \"R8\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGB4\"] = 34] = \"PVRTC1_RGB4\";\n  TextureFormat[TextureFormat[\"PVRTC1_RGBA4\"] = 35] = \"PVRTC1_RGBA4\";\n  TextureFormat[TextureFormat[\"UINT8\"] = 36] = \"UINT8\";\n  TextureFormat[TextureFormat[\"UINT16\"] = 37] = \"UINT16\";\n  TextureFormat[TextureFormat[\"UINT32\"] = 38] = \"UINT32\";\n  TextureFormat[TextureFormat[\"RGB565\"] = 39] = \"RGB565\";\n  TextureFormat[TextureFormat[\"RG8\"] = 40] = \"RG8\";\n  TextureFormat[TextureFormat[\"RG16F\"] = 41] = \"RG16F\";\n  TextureFormat[TextureFormat[\"OPENEXR\"] = 42] = \"OPENEXR\";\n  TextureFormat[TextureFormat[\"RGBA_FLOAT16\"] = 43] = \"RGBA_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT16\"] = 44] = \"RGB_FLOAT16\";\n  TextureFormat[TextureFormat[\"RGB_FLOAT32\"] = 45] = \"RGB_FLOAT32\";\n  TextureFormat[TextureFormat[\"Count\"] = 46] = \"Count\";\n})(TextureFormat || (TextureFormat = {}));\n\nvar ColorSpace;\n\n(function (ColorSpace) {\n  ColorSpace[ColorSpace[\"Linear\"] = 0] = \"Linear\";\n  ColorSpace[ColorSpace[\"SRGB\"] = 1] = \"SRGB\";\n  ColorSpace[ColorSpace[\"Count\"] = 2] = \"Count\";\n})(ColorSpace || (ColorSpace = {}));\n\nvar VertexAttribute;\n\n(function (VertexAttribute) {\n  VertexAttribute[VertexAttribute[\"Position\"] = 0] = \"Position\";\n  VertexAttribute[VertexAttribute[\"TextureCoordinate\"] = 1] = \"TextureCoordinate\";\n  VertexAttribute[VertexAttribute[\"Normal\"] = 2] = \"Normal\";\n  VertexAttribute[VertexAttribute[\"Tangent\"] = 3] = \"Tangent\";\n  VertexAttribute[VertexAttribute[\"Count\"] = 4] = \"Count\";\n})(VertexAttribute || (VertexAttribute = {}));\n\nvar BufferFlags;\n\n(function (BufferFlags) {\n  BufferFlags[BufferFlags[\"UncachedMemory\"] = 1] = \"UncachedMemory\";\n})(BufferFlags || (BufferFlags = {}));\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n  LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n  LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n  LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n  LogLevel[LogLevel[\"Count\"] = 4] = \"Count\";\n})(LogLevel || (LogLevel = {}));\n\nvar TransferStatus;\n\n(function (TransferStatus) {\n  TransferStatus[TransferStatus[\"Inactive\"] = 0] = \"Inactive\";\n  TransferStatus[TransferStatus[\"Active\"] = 1] = \"Active\";\n  TransferStatus[TransferStatus[\"Complete\"] = 2] = \"Complete\";\n  TransferStatus[TransferStatus[\"Error\"] = 3] = \"Error\";\n  TransferStatus[TransferStatus[\"Count\"] = 4] = \"Count\";\n})(TransferStatus || (TransferStatus = {}));\n\nvar HeaderError;\n\n(function (HeaderError) {\n  HeaderError[HeaderError[\"Found\"] = 0] = \"Found\";\n  HeaderError[HeaderError[\"Not_Found\"] = 1] = \"Not_Found\";\n  HeaderError[HeaderError[\"Transfer_Not_Complete\"] = 2] = \"Transfer_Not_Complete\";\n  HeaderError[HeaderError[\"Buffer_Too_Small\"] = 3] = \"Buffer_Too_Small\";\n  HeaderError[HeaderError[\"Count\"] = 4] = \"Count\";\n})(HeaderError || (HeaderError = {}));\n\nvar HttpMethod;\n\n(function (HttpMethod) {\n  HttpMethod[HttpMethod[\"Get\"] = 0] = \"Get\";\n  HttpMethod[HttpMethod[\"Post\"] = 1] = \"Post\";\n  HttpMethod[HttpMethod[\"Put\"] = 2] = \"Put\";\n  HttpMethod[HttpMethod[\"Delete\"] = 3] = \"Delete\";\n  HttpMethod[HttpMethod[\"Count\"] = 4] = \"Count\";\n})(HttpMethod || (HttpMethod = {}));\n\nvar LibraryInfo;\n\n(function (LibraryInfo) {\n  LibraryInfo[LibraryInfo[\"Version\"] = 0] = \"Version\";\n  LibraryInfo[LibraryInfo[\"Copyright\"] = 1] = \"Copyright\";\n  LibraryInfo[LibraryInfo[\"BuildTime\"] = 2] = \"BuildTime\";\n  LibraryInfo[LibraryInfo[\"BuildId\"] = 3] = \"BuildId\";\n  LibraryInfo[LibraryInfo[\"Count\"] = 4] = \"Count\";\n})(LibraryInfo || (LibraryInfo = {}));\n\nvar InvalidUserPointer;\n\n(function (InvalidUserPointer) {\n  InvalidUserPointer[InvalidUserPointer[\"InvalidUserPointer\"] = 0] = \"InvalidUserPointer\";\n})(InvalidUserPointer || (InvalidUserPointer = {}));\n\nvar TextureSupportFlags;\n\n(function (TextureSupportFlags) {\n  TextureSupportFlags[TextureSupportFlags[\"None\"] = 0] = \"None\";\n  TextureSupportFlags[TextureSupportFlags[\"BC1\"] = 1] = \"BC1\";\n  TextureSupportFlags[TextureSupportFlags[\"BC2\"] = 2] = \"BC2\";\n  TextureSupportFlags[TextureSupportFlags[\"BC3\"] = 4] = \"BC3\";\n  TextureSupportFlags[TextureSupportFlags[\"BC4\"] = 8] = \"BC4\";\n  TextureSupportFlags[TextureSupportFlags[\"BC5\"] = 16] = \"BC5\";\n  TextureSupportFlags[TextureSupportFlags[\"BC6H\"] = 32] = \"BC6H\";\n  TextureSupportFlags[TextureSupportFlags[\"BC7\"] = 64] = \"BC7\";\n  TextureSupportFlags[TextureSupportFlags[\"ASTC\"] = 128] = \"ASTC\";\n  TextureSupportFlags[TextureSupportFlags[\"ETC1\"] = 256] = \"ETC1\";\n  TextureSupportFlags[TextureSupportFlags[\"ETC2\"] = 512] = \"ETC2\";\n  TextureSupportFlags[TextureSupportFlags[\"EAC_R\"] = 1024] = \"EAC_R\";\n  TextureSupportFlags[TextureSupportFlags[\"EAC_RG\"] = 2048] = \"EAC_RG\";\n  TextureSupportFlags[TextureSupportFlags[\"PVRTC1\"] = 4096] = \"PVRTC1\";\n  TextureSupportFlags[TextureSupportFlags[\"PVRTC2\"] = 8192] = \"PVRTC2\";\n  TextureSupportFlags[TextureSupportFlags[\"ATC\"] = 16384] = \"ATC\";\n  TextureSupportFlags[TextureSupportFlags[\"HalfFloat\"] = 32768] = \"HalfFloat\";\n  TextureSupportFlags[TextureSupportFlags[\"Float\"] = 65536] = \"Float\";\n  TextureSupportFlags[TextureSupportFlags[\"All\"] = 2147483647] = \"All\";\n})(TextureSupportFlags || (TextureSupportFlags = {}));\n\nvar RuntimeFlags;\n\n(function (RuntimeFlags) {\n  RuntimeFlags[RuntimeFlags[\"NeverUnload\"] = 1] = \"NeverUnload\";\n  RuntimeFlags[RuntimeFlags[\"ExclusiveRendering\"] = 2] = \"ExclusiveRendering\";\n  RuntimeFlags[RuntimeFlags[\"EnableRayQueries\"] = 4] = \"EnableRayQueries\";\n  RuntimeFlags[RuntimeFlags[\"UmbraDebug\"] = -2147483648] = \"UmbraDebug\";\n})(RuntimeFlags || (RuntimeFlags = {}));\n\nvar ConnectionStatus;\n\n(function (ConnectionStatus) {\n  ConnectionStatus[ConnectionStatus[\"Connected\"] = 0] = \"Connected\";\n  ConnectionStatus[ConnectionStatus[\"Connecting\"] = 1] = \"Connecting\";\n  ConnectionStatus[ConnectionStatus[\"ConnectionError\"] = 2] = \"ConnectionError\";\n  ConnectionStatus[ConnectionStatus[\"Count\"] = 3] = \"Count\";\n})(ConnectionStatus || (ConnectionStatus = {}));\n\nvar DepthRange;\n\n(function (DepthRange) {\n  DepthRange[DepthRange[\"ZeroToOne\"] = 0] = \"ZeroToOne\";\n  DepthRange[DepthRange[\"MinusOneToOne\"] = 1] = \"MinusOneToOne\";\n  DepthRange[DepthRange[\"Count\"] = 2] = \"Count\";\n})(DepthRange || (DepthRange = {}));\n\nvar FilterShapeType;\n\n(function (FilterShapeType) {\n  FilterShapeType[FilterShapeType[\"Sphere\"] = 0] = \"Sphere\";\n  FilterShapeType[FilterShapeType[\"Cylinder\"] = 1] = \"Cylinder\";\n  FilterShapeType[FilterShapeType[\"Count\"] = 2] = \"Count\";\n})(FilterShapeType || (FilterShapeType = {}));\n\nvar SceneCopyStatus;\n\n(function (SceneCopyStatus) {\n  SceneCopyStatus[SceneCopyStatus[\"InProgress\"] = 0] = \"InProgress\";\n  SceneCopyStatus[SceneCopyStatus[\"Done\"] = 1] = \"Done\";\n  SceneCopyStatus[SceneCopyStatus[\"Error\"] = 2] = \"Error\";\n  SceneCopyStatus[SceneCopyStatus[\"Count\"] = 3] = \"Count\";\n})(SceneCopyStatus || (SceneCopyStatus = {}));\n\nvar SceneCopyDestinationType;\n\n(function (SceneCopyDestinationType) {\n  SceneCopyDestinationType[SceneCopyDestinationType[\"File\"] = 0] = \"File\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Directory\"] = 1] = \"Directory\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Cloud\"] = 2] = \"Cloud\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"FormatObj\"] = 3] = \"FormatObj\";\n  SceneCopyDestinationType[SceneCopyDestinationType[\"Count\"] = 4] = \"Count\";\n})(SceneCopyDestinationType || (SceneCopyDestinationType = {}));\n\nvar SceneCopySourceType;\n\n(function (SceneCopySourceType) {\n  SceneCopySourceType[SceneCopySourceType[\"Directory\"] = 0] = \"Directory\";\n  SceneCopySourceType[SceneCopySourceType[\"Cloud\"] = 1] = \"Cloud\";\n  SceneCopySourceType[SceneCopySourceType[\"Count\"] = 2] = \"Count\";\n})(SceneCopySourceType || (SceneCopySourceType = {}));\n\nvar AssetType;\n\n(function (AssetType) {\n  AssetType[AssetType[\"Material\"] = 0] = \"Material\";\n  AssetType[AssetType[\"Texture\"] = 1] = \"Texture\";\n  AssetType[AssetType[\"Mesh\"] = 2] = \"Mesh\";\n  AssetType[AssetType[\"Count\"] = 3] = \"Count\";\n})(AssetType || (AssetType = {}));\n\nvar AssetLoadResult;\n\n(function (AssetLoadResult) {\n  AssetLoadResult[AssetLoadResult[\"Failure\"] = 0] = \"Failure\";\n  AssetLoadResult[AssetLoadResult[\"OutOfMemory\"] = 1] = \"OutOfMemory\";\n  AssetLoadResult[AssetLoadResult[\"Aborted\"] = 2] = \"Aborted\";\n  AssetLoadResult[AssetLoadResult[\"Success\"] = 3] = \"Success\";\n  AssetLoadResult[AssetLoadResult[\"Count\"] = 4] = \"Count\";\n})(AssetLoadResult || (AssetLoadResult = {}));\n\nvar RayQueryFlags;\n\n(function (RayQueryFlags) {\n  RayQueryFlags[RayQueryFlags[\"BackfaceCulling\"] = 1] = \"BackfaceCulling\";\n})(RayQueryFlags || (RayQueryFlags = {}));\n\n\n\nvar Assets = /*#__PURE__*/Object.freeze({\n  get AssetType () { return AssetType; },\n  get AssetLoadResult () { return AssetLoadResult; }\n});\n\nvar MAX_LIGHTS = 32;\nvar arrayToHeap = new Map([[Float32Array, 'HEAPF32'], [Uint32Array, 'HEAPU32'], [Uint16Array, 'HEAPU16'], [Uint8Array, 'HEAPU8']]);\n\nfunction assertInteger(x) {\n  if (!Number.isInteger(x)) {\n    throw new Error('Value was not integer: ' + x.toString());\n  }\n}\n/**\n * We need to use a factory here since the native API classes depend on the Emscripten generated wasm code\n * that can't be loaded as a regular ES6 module. The \"Module\" object allows access to C++ functions and the\n * Emscripten heap.\n */\n\n\nvar create = function create(Module) {\n  /**\n   * A Buffer is a block of memory in the Emscripten heap. Typed arrays may get detached when Emscripten\n   * memory growth happens, so any JS code that wants to read from the heap needs to create its typed views\n   * right before they are used.\n   *\n   * The views are safe to use during synchronous execution, but for example a 'yield' in a generator may\n   * trigger memory growth before the caller gets the returned value.\n   */\n  class Buffer {\n    constructor(size) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Float32Array;\n      this.ofs = void 0;\n      this.size = void 0;\n      this.type = void 0;\n      assertInteger(size / type.BYTES_PER_ELEMENT);\n\n      if (size === 0) {\n        throw new Error('Buffer size was zero');\n      }\n\n      this.ofs = Module._malloc(size);\n\n      if (this.ofs === 0) {\n        throw new Error(\"Allocation of \".concat(size, \" bytes failed.\"));\n      }\n\n      this.size = size; // In bytes\n\n      this.type = type;\n    }\n\n    destroy() {\n      Module._free(this.ofs);\n\n      this.ofs = 0;\n      this.size = 0;\n    }\n    /**\n     * A destructive resize operation that never shrinks the buffer.\n     * NOTE: Does *not* copy the old data over.\n     */\n\n\n    ensureSize(newSize) {\n      if (this.size < newSize) {\n        this.destroy();\n        this.ofs = Module._malloc(newSize);\n\n        if (this.ofs === 0) {\n          throw new Error(\"Buffer growth to \".concat(newSize, \" bytes failed.\"));\n        }\n\n        this.size = newSize;\n      }\n    }\n\n    floats() {\n      return new Float32Array(Module.HEAPF32.buffer, this.ofs, this.size / 4);\n    }\n\n    bytes() {\n      return new Uint8Array(Module.HEAPU8.buffer, this.ofs, this.size);\n    }\n\n  }\n\n  class BufferView {\n    constructor(buffer) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : buffer.size;\n      var type = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : buffer.type;\n      this.ofs = void 0;\n      this.start = void 0;\n      this.size = void 0;\n      this.type = void 0;\n      this.heapName = void 0;\n      this.ofs = buffer.ofs;\n      this.start = start;\n      this.size = size;\n      this.type = type;\n      this.heapName = arrayToHeap.get(type);\n    }\n\n    getArray() {\n      // eslint-disable-next-line new-cap\n      return new this.type(Module[this.heapName].buffer, this.ofs + this.start, this.size / this.type.BYTES_PER_ELEMENT);\n    }\n\n  } // Struct field offsets are required for zero-copy interop\n\n\n  var renderableStructOffsets = Module.getRenderableMemberOffsets(); // Used by MeshLoader to copy over mesh AABB without extra allocs\n\n  var boundsBuffer = new Buffer(2 * 3 * 4);\n\n  function copyMat4(buf, elements) {\n    for (var i = 0; i < 16; i++) {\n      buf[i] = elements[i];\n    }\n  }\n\n  function copyVec3(buf, elements) {\n    buf[0] = elements[0];\n    buf[1] = elements[1];\n    buf[2] = elements[2];\n  }\n\n  class Client {\n    constructor() {\n      this.ptr = void 0;\n      this.configPtr = void 0;\n      this.configPtr = Module._malloc(Module.CONFIG_SIZE);\n      Module.configInit(this.configPtr);\n      this.ptr = Module.clientCreate('UmbraJS', this.configPtr);\n    }\n\n    destroy() {\n      Module.clientDestroy(this.ptr);\n\n      Module._free(this.configPtr);\n\n      this.ptr = 0;\n    }\n\n  }\n\n  class NativeScene {\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.matrixBuffer = new Buffer(16 * 4);\n      this.infoBuffer = new Buffer(Module.sceneInfoSize);\n      this.ptr = ptr;\n    }\n\n    destroy() {\n      this.matrixBuffer.destroy();\n      Module.sceneDestroy(this.ptr);\n    }\n\n    connectionStatus() {\n      return Module.sceneGetConnectionStatus(this.ptr);\n    }\n\n    getInfo() {\n      Module.sceneGetInfo(this.ptr, this.infoBuffer.ofs);\n      return Module.deserializeSceneInfo(this.infoBuffer.ofs);\n    }\n\n    isConnected() {\n      return this.connectionStatus() === ConnectionStatus.Connected;\n    }\n\n    setTransform(matrix) {\n      if (!Array.isArray(matrix)) {\n        throw new TypeError('Matrix should be an array');\n      }\n\n      if (matrix.length !== 16) {\n        throw new TypeError('Matrix should be of size 4x4');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), matrix);\n      Module.sceneSetTransform(this.ptr, this.matrixBuffer.ofs);\n    }\n\n  }\n\n  class View {\n    constructor(ptr, runtimeAssets) {\n      this.ptr = void 0;\n      this.matrixBuffer = void 0;\n      this.vectorBuffer = void 0;\n      this.lightBuffer = void 0;\n      this.temp = void 0;\n      this.runtimeAssets = void 0;\n      this.ptr = ptr;\n      this.matrixBuffer = new Buffer(16 * 4);\n      this.vectorBuffer = new Buffer(4 * 4);\n      this.lightBuffer = new Buffer(MAX_LIGHTS * 3 * 4);\n      this.temp = undefined;\n      this.runtimeAssets = runtimeAssets;\n    }\n\n    destroy() {\n      this.matrixBuffer.destroy();\n      this.vectorBuffer.destroy();\n      this.lightBuffer.destroy();\n\n      if (this.temp) {\n        this.temp.destroy();\n      }\n\n      Module.viewDestroy(this.ptr);\n    }\n\n    setCamera(worldToClip, positionVector, quality) {\n      var lights = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var depthRange = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : DepthRange.MinusOneToOne;\n      var matrixFormat = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : MatrixFormat.ColumnMajor;\n\n      if (!Array.isArray(worldToClip)) {\n        throw new TypeError('Camera matrix should be an array');\n      }\n\n      if (!Array.isArray(positionVector)) {\n        throw new TypeError('Position should be an array');\n      }\n\n      if (typeof quality !== 'number') {\n        throw new TypeError('Quality should be a number');\n      }\n\n      if (worldToClip.length !== 16) {\n        throw new TypeError('WorldToClip matrix should be of size 4x4');\n      }\n\n      if (positionVector.length !== 3) {\n        throw new TypeError('Position vector should be of length 3');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), worldToClip);\n      copyVec3(this.vectorBuffer.floats(), positionVector);\n\n      if (lights) {\n        if (lights.length > MAX_LIGHTS) {\n          throw new Error('Too many lights given');\n        }\n\n        var buffer = this.lightBuffer.floats();\n\n        for (var i = 0; i < lights.length; i++) {\n          buffer[3 * i + 0] = lights[i][0];\n          buffer[3 * i + 1] = lights[i][1];\n          buffer[3 * i + 2] = lights[i][2];\n        }\n      }\n\n      Module.viewUpdateRendering(this.ptr, this.matrixBuffer.ofs, this.vectorBuffer.ofs, depthRange, matrixFormat, quality, this.lightBuffer.ofs, lights.length);\n    }\n\n    getVisible(batchSize) {\n      assertInteger(batchSize);\n      var bufferSize = batchSize * Module.renderableSize; // Check if we should enlarge or allocate the temp buffer\n\n      if (!this.temp || this.temp.size < bufferSize) {\n        if (this.temp) {\n          this.temp.destroy();\n        }\n\n        this.temp = new Buffer(bufferSize);\n      }\n\n      var temp = this.temp;\n      var strideInWords = Module.renderableSize / 4;\n      var bufferWordSize = bufferSize / 4;\n      assertInteger(strideInWords);\n      assertInteger(bufferWordSize);\n\n      var getView = function getView(arrayType, heap, ptr, ofs) {\n        assertInteger(ofs / 4); // eslint-disable-next-line new-cap\n\n        return new arrayType(heap.buffer, ptr + ofs, bufferWordSize - ofs / 4);\n      };\n\n      var meshIDs = getView(Uint32Array, Module.HEAPU32, temp.ofs, renderableStructOffsets['mesh']);\n      var lodLevels = getView(Int32Array, Module.HEAP32, temp.ofs, renderableStructOffsets['lodLevel']);\n      var masks = getView(Uint32Array, Module.HEAPU32, temp.ofs, renderableStructOffsets['visibilityMask']); // const transforms = getView(Float32Array, Module.HEAPF32, temp.ofs, offsets['transform'])\n\n      var scenePointers = getView(Uint32Array, Module.HEAPU32, temp.ofs, renderableStructOffsets['scene']);\n      var count = Module.viewNextRenderables(this.ptr, temp.ofs, batchSize);\n      var output = [];\n\n      for (var i = 0; i < count; i++) {\n        var id = meshIDs[strideInWords * i];\n        var lod = lodLevels[strideInWords * i];\n        var mask = masks[strideInWords * i];\n        var scenePtr = scenePointers[strideInWords * i]; // TODO extract individual transforms too\n\n        output.push({\n          id: id,\n          mesh: this.runtimeAssets.get(id),\n          lod: lod,\n          mask: mask,\n          scenePtr: scenePtr\n        });\n      }\n\n      return output;\n    }\n\n  }\n\n  class AssetLoad {\n    // TODO: Replace with a union container data types\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.assetType = void 0;\n      this.type = void 0;\n      this.data = void 0;\n      this.ptr = ptr;\n      this.assetType = Module.assetLoadGetType(this.ptr);\n      this.type = 'Load' + AssetType[this.assetType];\n      this.data = {}; // Type specific asset data set from the outside\n    }\n\n    prepare(userPtr) {\n      Module.assetLoadPrepare(this.ptr, userPtr);\n    }\n\n    finish(result) {\n      Module.assetLoadFinish(this.ptr, result);\n    }\n\n  }\n\n  class AssetUnload {\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.assetType = void 0;\n      this.type = void 0;\n      this.data = void 0;\n      this.ptr = ptr;\n      this.assetType = Module.assetUnloadGetType(this.ptr);\n      this.type = 'Unload' + AssetType[this.assetType];\n    }\n\n    finish() {\n      Module.assetUnloadFinish(this.ptr);\n    }\n\n    get userPointer() {\n      return Module.assetUnloadGetUserPointer(this.ptr);\n    }\n\n  }\n\n  var vertexBufferMap = new Map([['position', new Buffer(4)], ['normal', new Buffer(4)], ['uv', new Buffer(4)], ['tangent', new Buffer(4)], ['index', new Buffer(4)]]);\n\n  function getBufferForAttribute(name, newSize, type) {\n    var buffer = vertexBufferMap.get(name);\n\n    if (buffer.size < newSize) {\n      if (buffer.size > 0) {\n        buffer.destroy();\n      }\n\n      buffer = new Buffer(newSize, type);\n      vertexBufferMap.set(name, buffer);\n    } else if (type) {\n      buffer.type = type;\n    }\n\n    return buffer;\n  }\n\n  class Loader {\n    // NOTE: These buffers get leaked but it doesn't matter since we will delete Emscripten's heap on shutdown anyway.\n    constructor(load) {\n      this.load = void 0;\n      this.info = void 0;\n      this.vertexBuffers = void 0;\n      this.load = load;\n      Module.meshLoadGetInfo(this.load.ptr, Loader.meshInfoBuffer.ofs);\n      this.info = Module.deserializeMeshInfo(Loader.meshInfoBuffer.ofs);\n    }\n\n    setBuffers(buffers) {\n      Loader.structBuffer.bytes().fill(0);\n      Loader.tempDataBuffer.bytes().fill(0);\n      Module.serializeElementBuffer(buffers.position.desc, Loader.structBuffer.ofs);\n      Module.serializeElementBuffer(buffers.index.desc, Loader.tempDataBuffer.ofs);\n\n      if ('uv' in buffers) {\n        Module.serializeElementBuffer(buffers.uv.desc, Loader.structBuffer.ofs + Module.elementBufferSize * 1);\n      }\n\n      if ('normal' in buffers) {\n        Module.serializeElementBuffer(buffers.normal.desc, Loader.structBuffer.ofs + Module.elementBufferSize * 2);\n      }\n\n      if ('tangent' in buffers) {\n        Module.serializeElementBuffer(buffers.tangent.desc, Loader.structBuffer.ofs + Module.elementBufferSize * 3);\n      }\n\n      if (!Module.meshStreamSetBuffers(this.load.ptr, Loader.structBuffer.ofs, Loader.tempDataBuffer.ofs)) {\n        console.log(buffers);\n        throw new Error('setBuffers failed');\n      }\n    }\n\n    loadNext() {\n      return Module.meshStreamNext(this.load.ptr, 0, 0);\n    }\n\n    done() {\n      return Module.meshStreamDone(this.load.ptr);\n    }\n\n    allocateBuffers() {\n      var _this = this;\n\n      var indexBytes = this.info.numUniqueVertices < 1 << 16 ? 2 : 4; // prettier-ignore\n\n      var attrInfo = {\n        position: {\n          elemSize: Module.vertexAttributeGetElementByteSize(VertexAttribute.Position),\n          count: this.info.numUniqueVertices,\n          mask: 1 << VertexAttribute.Position,\n          type: Float32Array\n        },\n        uv: {\n          elemSize: Module.vertexAttributeGetElementByteSize(VertexAttribute.TextureCoordinate),\n          count: this.info.numUniqueVertices,\n          mask: 1 << VertexAttribute.TextureCoordinate,\n          type: Float32Array\n        },\n        normal: {\n          elemSize: Module.vertexAttributeGetElementByteSize(VertexAttribute.Normal),\n          count: this.info.numUniqueVertices,\n          mask: 1 << VertexAttribute.Normal,\n          type: Float32Array\n        },\n        tangent: {\n          elemSize: Module.vertexAttributeGetElementByteSize(VertexAttribute.Tangent),\n          count: this.info.numUniqueVertices,\n          mask: 1 << VertexAttribute.Tangent,\n          type: Float32Array\n        },\n        index: {\n          elemSize: indexBytes,\n          count: this.info.numIndices,\n          mask: 0xffffffff,\n          type: indexBytes === 2 ? Uint16Array : Uint32Array\n        }\n      };\n      var bufferSizes = {};\n      Object.keys(attrInfo).forEach(function (name) {\n        var byteSize = attrInfo[name].count * attrInfo[name].elemSize;\n        assertInteger(byteSize / attrInfo[name].type.BYTES_PER_ELEMENT);\n        bufferSizes[name] = byteSize;\n      });\n      var meshBuffers = {};\n      Object.keys(attrInfo).forEach(function (name) {\n        // Skip vertex attributes that aren't needed\n        if (!(_this.info.attributes & attrInfo[name].mask)) {\n          return;\n        }\n\n        var buffer = getBufferForAttribute(name, bufferSizes[name], attrInfo[name].type);\n        var desc = {};\n        desc.ptr = buffer.ofs; // Emscripten heap offset\n\n        desc.elementByteSize = attrInfo[name].elemSize; // Size of a single element\n\n        desc.elementCapacity = attrInfo[name].count; // Number of elements\n\n        desc.elementStride = attrInfo[name].elemSize; // Distance (in bytes) between consecutive elements\n\n        desc.flags = 0; // 0: cached memory, 1: uncached memory\n\n        meshBuffers[name] = {\n          data: new BufferView(buffer, 0, bufferSizes[name]),\n          desc: desc\n        };\n      });\n      return meshBuffers;\n    }\n\n  }\n\n  Loader.structBuffer = new Buffer(Module.elementBufferSize * VertexAttribute.Count, Uint8Array);\n  Loader.meshInfoBuffer = new Buffer(Module.meshInfoSize, Uint8Array);\n  Loader.tempDataBuffer = new Buffer(Module.elementBufferSize, Uint8Array);\n\n  class Runtime {\n    constructor(client, platformFeatures) {\n      var runtimeFlags = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      this.assets = new Map();\n      this.client = void 0;\n      this.ptr = void 0;\n      this.platformFeatures = void 0;\n      this.nextId = 1;\n      this.loader = undefined;\n      this.tempTextureBuffer = new Buffer(1024 * 1024, Uint8Array);\n      this.tempTranscodedBuffer = new Buffer(4, Uint8Array);\n      this.tempStreamingStateBuffer = new Buffer(Module.streamingStateSize, Uint8Array);\n      this.scratch = void 0;\n      this.debug = void 0;\n\n      /**\n       * If no normal map formats are supported then force support for\n       * BC5 so that textures get transcoded into an uncompressed format.\n       */\n      var normalFormats = TextureSupportFlags.ETC1 | TextureSupportFlags.ASTC | TextureSupportFlags.PVRTC1 | TextureSupportFlags.BC5;\n      var textureSupportMask = platformFeatures.textureSupportMask;\n\n      if (!(textureSupportMask & normalFormats)) {\n        textureSupportMask |= TextureSupportFlags.BC5 | TextureSupportFlags.BC4;\n      }\n\n      this.client = client;\n      var infoPtr = Module.serializeEnvironmentInfo({\n        textureSupportFlags: textureSupportMask,\n        localCacheDirectory: null,\n        localCacheMaximumByteSize: 0\n      }, 0);\n      this.ptr = Module.runtimeCreate(client.ptr, infoPtr, runtimeFlags);\n\n      Module._free(infoPtr);\n\n      this.platformFeatures = platformFeatures;\n      var size = Math.max(Module.meshInfoSize, Module.materialInfoSize, Module.textureInfoSize, Module.byteBufferSize);\n      this.scratch = new Buffer(size, Uint8Array);\n      this.debug = {\n        textureFormatsInUse: new Set(),\n        platformFeatures: platformFeatures\n      };\n    }\n\n    destroy() {\n      this.tempTextureBuffer.destroy();\n      this.scratch.destroy();\n      Module.runtimeDestroy(this.ptr);\n      this.client.destroy();\n      this.ptr = 0;\n    }\n\n    createScenePublic(publicKey) {\n      var scenePtr = Module.sceneCreatePublic(this.ptr, publicKey);\n\n      if (!scenePtr) {\n        return undefined;\n      }\n\n      return new NativeScene(scenePtr);\n    }\n\n    createSceneLocal(url) {\n      var scenePtr = Module.sceneCreateLocal(this.ptr, url);\n\n      if (!scenePtr) {\n        return undefined;\n      }\n\n      return new NativeScene(scenePtr);\n    }\n\n    createView() {\n      var viewPtr = Module.viewCreate(this.ptr);\n      return new View(viewPtr, this.assets);\n    }\n\n    update() {\n      Module.runtimeUpdate(this.ptr);\n    }\n\n    *getAssetUnloads() {\n      var p = Module.runtimeNextAssetUnload(this.ptr);\n\n      while (p !== 0) {\n        var unload = new AssetUnload(p);\n        unload.data = this.assets.get(unload.userPointer);\n        yield unload;\n        p = Module.runtimeNextAssetUnload(this.ptr);\n      }\n    }\n\n    *getAssetLoads() {\n      var _this2 = this;\n\n      while (true) {\n        if (this.loader) {\n          if (this.loader.done()) {\n            var job = this.loader.load; // The buffers allocated by MeshLoader are handed over to the caller.\n\n            job.data.buffers = this.loader.vertexBuffers;\n            job.data.material = this.assets.get(this.loader.info.material);\n            job.data.bounds = [this.loader.info.bounds.mn, this.loader.info.bounds.mx];\n            this.loader = undefined;\n            yield job;\n          } else {\n            /**\n             * A mesh is still decompressing so we'll advance the decompression\n             * one step further and return the control to the caller for a timeout check.\n             */\n            if (!this.loader.loadNext()) {\n              throw new Error('loadNext failed');\n            }\n\n            yield undefined; // This processing step might have finished the decompression already, so loop back.\n\n            continue;\n          }\n        }\n\n        var loadPtr = Module.runtimeNextAssetLoad(this.ptr); // Terminate the generator when there are no more jobs to process.\n\n        if (loadPtr === 0) {\n          return undefined;\n        }\n\n        var load = new AssetLoad(loadPtr);\n\n        if (load.type === 'LoadMaterial') {\n          Module.materialLoadGetInfo(load.ptr, this.scratch.ofs);\n          var info = Module.deserializeMaterialInfo(this.scratch.ofs);\n          var textureObjects = info.textures.filter(function (ptr) {\n            return ptr !== Module.INVALID_USERPOINTER;\n          });\n          textureObjects = textureObjects.map(function (id) {\n            return _this2.assets.get(id);\n          });\n          load.data = {\n            transparent: info.transparent,\n            textures: textureObjects\n          };\n          yield load;\n        } else if (load.type === 'LoadTexture') {\n          var infoPtr = this.scratch.ofs;\n          Module.textureLoadGetInfo(load.ptr, infoPtr);\n          var texture = Module.deserializeTextureInfo(infoPtr);\n          texture['mipByteSizes'] = [Module.textureGetMipmapLevelByteSize(infoPtr, 0)];\n          texture['mipByteOffsets'] = [Module.textureGetMipmapLevelOffset(infoPtr, 0)];\n          var buffer = this.tempTextureBuffer;\n          buffer.ensureSize(texture.dataByteSize);\n          Module.serializeByteBuffer({\n            ptr: buffer.ofs,\n            byteSize: texture.dataByteSize,\n            // The output buffer size must match the texture data size\n            flags: 0\n          }, this.scratch.ofs);\n\n          if (!Module.textureLoadGetData(load.ptr, this.scratch.ofs)) {\n            throw new Error(\"textureLoadGetData failed: \".concat(load.ptr, \", \").concat(buffer.ofs, \", \").concat(texture.dataByteSize, \"/\").concat(buffer.size));\n          }\n\n          var bufferView = new BufferView(buffer, 0, texture.dataByteSize);\n\n          if (this.formatNeedsTranscoding(texture.format)) {\n            var _formatToArrayType;\n\n            texture = this.downsampleAndTranscodeTexture(texture, buffer, this.tempTranscodedBuffer);\n            var formatToArrayType = (_formatToArrayType = {}, _defineProperty(_formatToArrayType, TextureFormat.RGBA32, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RGB565, Uint16Array), _defineProperty(_formatToArrayType, TextureFormat.RG8, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RG16F, Uint16Array), _formatToArrayType);\n            bufferView = new BufferView(this.tempTranscodedBuffer, 0, texture.dataByteSize);\n            bufferView.type = formatToArrayType[texture.format];\n          } // Convert internal enums to string constants\n          // info.format = Native.TextureFormat[info.format]\n          // info.colorSpace = Native.ColorSpace[info.colorSpace]\n          // info.textureType = Native.TextureType[info.textureType]\n\n\n          this.debug.textureFormatsInUse.add(texture.format);\n          load.data = {\n            info: texture,\n            buffer: bufferView\n          };\n          yield load;\n        } else if (load.type === 'LoadMesh') {\n          // Mesh jobs create decompression work that needs to be done first.\n          this.loader = new Loader(load);\n          this.loader.vertexBuffers = this.loader.allocateBuffers();\n          this.loader.setBuffers(this.loader.vertexBuffers);\n          yield undefined;\n        } else {\n          throw new Error(\"Job wasn't handled correctly\");\n        }\n      }\n    }\n\n    loadAssets(handlers, timeLimit) {\n      var startTime = performance.now(); // First go and free up all pending assets\n\n      for (var unload of this.getAssetUnloads()) {\n        handlers[unload.type](unload);\n\n        if (performance.now() - startTime > timeLimit) {\n          break;\n        }\n      } // Process load jobs if there's still time left\n\n\n      for (var load of this.getAssetLoads()) {\n        // If job is 'undefined' it means a mesh is still decompressing\n        if (load) {\n          try {\n            handlers[load.type](load);\n          } catch (error) {\n            load.finish(AssetLoadResult.Failure);\n            throw error;\n          }\n        } // We always process at least one job before checking the time\n\n\n        if (performance.now() - startTime > timeLimit) {\n          break;\n        }\n      }\n    }\n\n    addAsset(asset) {\n      // AssetJob IDs are just an increasing 32-bit series\n      var userPtr = this.nextId;\n      this.nextId = this.nextId + 1 | 0;\n\n      if (this.nextId === 0) {\n        this.nextId = 1;\n      }\n\n      this.assets.set(userPtr, asset);\n      return userPtr;\n    }\n    /**\n     * Removes the asset reference of the stream out job.\n     * Assumes the caller has already freed their own asset resources.\n     */\n\n\n    removeAsset(job, asset) {\n      var id = job.userPointer;\n\n      if (this.assets.has(id)) {\n        this.assets[\"delete\"](id);\n      }\n\n      return id;\n    }\n\n    formatNeedsTranscoding(format) {\n      var flags = this.platformFeatures.textureSupportMask;\n\n      switch (format) {\n        case TextureFormat.BC1:\n          if (flags & TextureSupportFlags.BC1) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC3:\n          if (flags & TextureSupportFlags.BC3) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC4:\n          if (flags & TextureSupportFlags.BC4) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC5:\n          if (flags & TextureSupportFlags.BC5) {\n            return false;\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      return true;\n    }\n\n    downsampleAndTranscodeTexture(info, buffer, outputBuffer) {\n      var newFormat = Module.getUncompressedFromBCFormat(info.format);\n\n      if (newFormat === TextureFormat.Count) {\n        throw new Error(\"Couldn't find a matching BC format\");\n      } // If half float is not supported on this platform we need to make do with an 8-bit texture.\n\n\n      if (newFormat === TextureFormat.RG16F && !this.platformFeatures.halfFloat) {\n        newFormat = TextureFormat.RG8;\n      }\n\n      var outputSize = Module.getTextureByteSize(info.width, info.height, newFormat);\n      outputBuffer.ensureSize(outputSize);\n      var result = Module.downsampleAndTranscodeTexture(info.format, newFormat, info.width, info.height, buffer.ofs, info.dataByteSize, outputBuffer.ofs, outputBuffer.size);\n\n      if (!result.success) {\n        throw new Error(\"Texture transcoding failed. Input: \".concat(info.format, \", output: \").concat(newFormat, \", output size: \").concat(outputSize));\n      }\n\n      if (result.texture.format !== newFormat) {\n        throw new Error(\"Transcoded texture format was \".concat(result.texture.format, \" instead of the expected \").concat(newFormat));\n      } // Create a new texture descriptor with updated properties and return it.\n\n\n      var info2 = Object.assign({}, info);\n      var desc = result.texture;\n      info2 = Object.assign(info2, {\n        format: desc.format,\n        width: desc.width,\n        height: desc.height,\n        dataByteSize: desc.dataByteSize,\n        mipByteSizes: [desc.dataByteSize]\n      });\n      return info2;\n    }\n\n    getStreamingState() {\n      Module.runtimeGetStreamingState(this.ptr, this.tempStreamingStateBuffer.ofs);\n      return Module.deserializeStreamingState(this.tempStreamingStateBuffer.ofs);\n    }\n\n    getStreamingProgress() {\n      var state = this.getStreamingState();\n\n      if (state.numResidentTiles == 0) {\n        return 0.0;\n      }\n\n      return state.numResidentTilesLoaded / state.numResidentTiles;\n    }\n\n  } // Expose only runtime for instantiation\n\n\n  return {\n    createRuntime: function createRuntime(features) {\n      return new Runtime(new Client(), features);\n    }\n  };\n};\n\n// Generated at 2020-03-06 16:29:11\nfunction wrapNativeFunctions(Module) {\n  Object.assign(Module, {\n    configInit: Module.cwrap('UmbraConfigInit', null, ['number']),\n    clientCreate: Module.cwrap('UmbraClientCreate', 'number', ['string', 'number']),\n    clientDestroy: Module.cwrap('UmbraClientDestroy', null, ['number']),\n    getLibraryInfo: Module.cwrap('UmbraGetLibraryInfo', 'string', ['number']),\n    environmentInfoDefaults: Module.cwrap('UmbraEnvironmentInfoDefaults', null, ['number']),\n    runtimeCreate: Module.cwrap('UmbraRuntimeCreate', 'number', ['number', 'number', 'number']),\n    runtimeUpdate: Module.cwrap('UmbraRuntimeUpdate', null, ['number']),\n    runtimeGetStreamingState: Module.cwrap('UmbraRuntimeGetStreamingState', null, ['number', 'number']),\n    runtimeDestroy: Module.cwrap('UmbraRuntimeDestroy', null, ['number']),\n    sceneCreate: Module.cwrap('UmbraSceneCreate', 'number', ['number', 'string', 'string']),\n    sceneCreatePublic: Module.cwrap('UmbraSceneCreatePublic', 'number', ['number', 'string']),\n    sceneCreateLocal: Module.cwrap('UmbraSceneCreateLocal', 'number', ['number', 'string']),\n    sceneGetConnectionStatus: Module.cwrap('UmbraSceneGetConnectionStatus', 'number', ['number']),\n    sceneGetInfo: Module.cwrap('UmbraSceneGetInfo', 'number', ['number', 'number']),\n    sceneSetTransform: Module.cwrap('UmbraSceneSetTransform', null, ['number', 'number']),\n    sceneDestroy: Module.cwrap('UmbraSceneDestroy', null, ['number']),\n    viewCreate: Module.cwrap('UmbraViewCreate', 'number', ['number']),\n    viewUpdateRendering: Module.cwrap('UmbraViewUpdateRendering', null, ['number', 'number', 'number', 'number', 'number', 'number', 'number', 'number']),\n    viewUpdateFilter: Module.cwrap('UmbraViewUpdateFilter', null, ['number', 'number']),\n    viewGetCompleted: Module.cwrap('UmbraViewGetCompleted', 'number', ['number']),\n    viewNextRenderables: Module.cwrap('UmbraViewNextRenderables', 'number', ['number', 'number', 'number']),\n    viewResetRenderables: Module.cwrap('UmbraViewResetRenderables', null, ['number']),\n    viewDestroy: Module.cwrap('UmbraViewDestroy', null, ['number']),\n    viewRayQuery: Module.cwrap('UmbraViewRayQuery', 'number', ['number', 'number', 'number', 'number', 'number', 'number']),\n    sceneCopyCreate: Module.cwrap('UmbraSceneCopyCreate', 'number', ['number', 'number', 'number', 'number', 'number']),\n    sceneCopyGetStatus: Module.cwrap('UmbraSceneCopyGetStatus', 'number', ['number', 'number']),\n    sceneCopyGetError: Module.cwrap('UmbraSceneCopyGetError', 'string', ['number']),\n    sceneCopyDestroy: Module.cwrap('UmbraSceneCopyDestroy', null, ['number']),\n    vertexAttributeGetElementByteSize: Module.cwrap('UmbraVertexAttributeGetElementByteSize', 'number', ['number']),\n    runtimeNextAssetLoad: Module.cwrap('UmbraRuntimeNextAssetLoad', 'number', ['number']),\n    assetLoadGetType: Module.cwrap('UmbraAssetLoadGetType', 'number', ['number']),\n    assetLoadPrepare: Module.cwrap('UmbraAssetLoadPrepare', null, ['number', 'number']),\n    assetLoadAbortRequested: Module.cwrap('UmbraAssetLoadAbortRequested', 'number', ['number']),\n    assetLoadFinish: Module.cwrap('UmbraAssetLoadFinish', null, ['number', 'number']),\n    meshLoadFinishExternal: Module.cwrap('UmbraMeshLoadFinishExternal', null, ['number', 'number', 'number', 'number']),\n    meshLoadGetInfo: Module.cwrap('UmbraMeshLoadGetInfo', null, ['number', 'number']),\n    meshLoadGetData: Module.cwrap('UmbraMeshLoadGetData', 'number', ['number', 'number', 'number']),\n    meshStreamSetBuffers: Module.cwrap('UmbraMeshStreamSetBuffers', 'number', ['number', 'number', 'number']),\n    meshStreamDone: Module.cwrap('UmbraMeshStreamDone', 'number', ['number']),\n    meshStreamNext: Module.cwrap('UmbraMeshStreamNext', 'number', ['number', 'number', 'number']),\n    meshLoadGetSerializedSize: Module.cwrap('UmbraMeshLoadGetSerializedSize', 'number', ['number']),\n    textureGetMipmapLevelByteSize: Module.cwrap('UmbraTextureGetMipmapLevelByteSize', 'number', ['number', 'number']),\n    textureGetMipmapLevelOffset: Module.cwrap('UmbraTextureGetMipmapLevelOffset', 'number', ['number', 'number']),\n    textureLoadGetInfo: Module.cwrap('UmbraTextureLoadGetInfo', null, ['number', 'number']),\n    textureLoadGetData: Module.cwrap('UmbraTextureLoadGetData', 'number', ['number', 'number']),\n    textureLoadGetSerializedSize: Module.cwrap('UmbraTextureLoadGetSerializedSize', 'number', ['number']),\n    textureMetaDataLoadGetData: Module.cwrap('UmbraTextureMetaDataLoadGetData', 'number', ['number', 'number']),\n    textureMetaDataGetClassificationCount: Module.cwrap('UmbraTextureMetaDataGetClassificationCount', 'number', ['number', 'number']),\n    textureMetaDataGetClassification: Module.cwrap('UmbraTextureMetaDataGetClassification', 'number', ['number', 'number', 'number']),\n    textureMetaDataGetClassificationAmount: Module.cwrap('UmbraTextureMetaDataGetClassificationAmount', 'number', ['number', 'number', 'number']),\n    materialLoadGetInfo: Module.cwrap('UmbraMaterialLoadGetInfo', null, ['number', 'number']),\n    runtimeNextAssetUnload: Module.cwrap('UmbraRuntimeNextAssetUnload', 'number', ['number']),\n    assetUnloadGetType: Module.cwrap('UmbraAssetUnloadGetType', 'number', ['number']),\n    assetUnloadGetUserPointer: Module.cwrap('UmbraAssetUnloadGetUserPointer', 'number', ['number']),\n    assetUnloadFinish: Module.cwrap('UmbraAssetUnloadFinish', null, ['number'])\n  });\n}\n\n\n\nvar _Math = /*#__PURE__*/Object.freeze({\n\n});\n\n/**\n * These definitions are exported in 'index.ts'.\n * See the API reference for more details:\n *\n *     https://github.com/UmbraSoftware/umbrajs/wiki/API-reference\n *\n */\n\n/**\n * Returns a library instance that uses the Emscripten resources of \"Module\".\n */\nfunction instantiate(Module) {\n  var lib = {};\n  /**\n   * Queries supported texture formats and also enables the relevant WebGL extensions.\n   */\n\n  lib.getPlatformFeatures = function (gl) {\n    var flags = 0; // We accumulate a texture format bitmask here\n\n    var formats = new Set(); // Will hold all supported format names\n\n    var supportsSRGB = false;\n    var supportsHalfFloat = false;\n    /**\n     * We fetch all extension strings and strip off possible vendor prefixes of WEBGL\n     * extensions. However, when we enable the extension we need the original full string.\n     * Here 'extStrings' holds a mapping from a shortened to a full extension string.\n     */\n\n    var extStrings = new Map([]); // Full strings\n\n    var extNames = []; // Shortened strings\n\n    var allExtensions = gl.getSupportedExtensions();\n\n    for (var full of allExtensions) {\n      var shortened = full.replace(/^(.*)_WEBGL_/, 'WEBGL_');\n      extStrings.set(shortened, full);\n      extNames.push(shortened);\n    }\n\n    var mapping = new Map([['WEBGL_compressed_texture_s3tc', {\n      mask: TextureSupportFlags.BC1 | TextureSupportFlags.BC2 | TextureSupportFlags.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_s3tc_srgb', {\n      mask: TextureSupportFlags.BC1 | TextureSupportFlags.BC2 | TextureSupportFlags.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_rgtc', {\n      mask: TextureSupportFlags.BC4 | TextureSupportFlags.BC5,\n      names: ['bc4', 'bc5']\n    }], ['WEBGL_compressed_texture_pvrtc', {\n      mask: TextureSupportFlags.PVRTC1,\n      names: ['pvrtc1_rgb4', 'pvrtc1_rgba4']\n    }], ['WEBGL_compressed_texture_etc1', {\n      mask: TextureSupportFlags.ETC1,\n      names: ['etc1_rgb']\n    }], ['WEBGL_compressed_texture_astc', {\n      mask: TextureSupportFlags.ASTC,\n      names: ['astc_4x4']\n    }]]);\n\n    for (var key of mapping.keys()) {\n      if (extNames.includes(key)) {\n        gl.getExtension(extStrings.get(key));\n        var value = mapping.get(key);\n        flags |= value.mask;\n        value.names.forEach(function (name) {\n          return formats.add(name);\n        });\n      }\n    }\n\n    if (extNames.includes('WEBGL_compressed_texture_s3tc_srgb')) {\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('EXT_sRGB')) {\n      gl.getExtension(extStrings.get('EXT_sRGB'));\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('OES_texture_half_float')) {\n      gl.getExtension(extStrings.get('OES_texture_half_float'));\n      supportsHalfFloat = true;\n    }\n\n    return {\n      textureSupportMask: flags,\n      formats: _toConsumableArray(formats),\n      srgb: supportsSRGB,\n      halfFloat: supportsHalfFloat\n    };\n  }; // Access to the Emscripten module is needed for deinitialization\n\n\n  lib.nativeModule = Module; // Allow access to Runtime class\n\n  lib.createRuntime = create(Module).createRuntime;\n\n  lib.getStreamingInfo = function () {\n    return {\n      minBytesDownloaded: lib.nativeModule.minBytesDownloaded,\n      maxBytesDownloaded: lib.nativeModule.maxBytesDownloaded\n    };\n  };\n\n  lib.getLibraryInfo = function () {\n    return {\n      version: Module.getLibraryInfo(LibraryInfo.Version),\n      copyright: Module.getLibraryInfo(LibraryInfo.Copyright),\n      buildTime: Module.getLibraryInfo(LibraryInfo.BuildTime),\n      buildID: Module.getLibraryInfo(LibraryInfo.BuildId)\n    };\n  };\n\n  lib.abortDownloads = function () {\n    Object.values(Module.wgetRequests).forEach(function (req) {\n      req.abort();\n    });\n  };\n\n  return lib;\n}\n/**\n * Compiles the WebAssembly and code and initializes the Emscripten environment.\n * Returns a Promise that resolves with the library instance ready for use.\n */\n\n\nvar initUmbra = function initUmbra(config) {\n\n  var defaults = {\n    wasmURL: ''\n  };\n  config = Object.assign(defaults, config);\n  return new Promise(function (resolve, reject) {\n    try {\n      var redirectWasmURL = function redirectWasmURL(path, prefix) {\n        // If it's our wasm file, return a custom URL\n        if (path.endsWith('umbra.wasm') && config.wasmURL !== '') {\n          return config.wasmURL;\n        }\n\n        return prefix + path;\n      };\n\n      UmbraNativeAPI({\n        locateFile: redirectWasmURL\n      }).then(function (Module) {\n        // A workaround for https://github.com/emscripten-core/emscripten/issues/5820\n        delete Module['then'];\n\n        Module['onAbort'] = function (what) {\n          reject(what);\n        };\n\n        wrapNativeFunctions(Module);\n        resolve(instantiate(Module));\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n/**\n * Deinitializes the Emscripten environment.\n *\n * NOTE: We assume here that async IndexedDB loads and stores have already finished.\n * This is the case if Umbra.update() was *not* called before deinitUmbra() on the\n * same frame.\n */\n\nvar deinitUmbra = function deinitUmbra(Umbra) {\n  // Pending requests must be aborted so that native handlers won't get called\n  Umbra.abortDownloads();\n  var privateUmbra = Umbra; // Emscripten's exit(0) call throws an ExitStatus exception\n\n  try {\n    privateUmbra.nativeModule._exit(0);\n  } catch (e) {\n    if (e.name !== 'ExitStatus') {\n      throw e;\n    }\n  }\n};\n\nexport { Assets, ColorSpace, ConnectionStatus, DepthRange, _Math as Math, MatrixFormat, TextureFormat, TextureSupportFlags, TextureType, deinitUmbra, initUmbra };\n//# sourceMappingURL=umbra.esm.js.map\n","/* eslint  @typescript-eslint/camelcase: 0 */\r\n\r\nimport * as THREE from './ThreeWrapper'\r\nimport { TextureFormat } from '@umbra3d/umbrajs'\r\n\r\nfunction makeFormat(format, type, compressed) {\r\n  return { format, type, compressed }\r\n}\r\n\r\n// prettier-ignore\r\nconst ThreeFormats = {\r\n  [TextureFormat.RGB24]: makeFormat(THREE.RGBFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RGBA32]: makeFormat(THREE.RGBAFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RGB565]: makeFormat(THREE.RGBFormat, THREE.UnsignedShort565Type, false),\r\n  [TextureFormat.RG8]: makeFormat(THREE.LuminanceAlphaFormat, THREE.UnsignedByteType, false),\r\n  [TextureFormat.RG16F]: makeFormat(THREE.LuminanceAlphaFormat, THREE.HalfFloatType, false),\r\n  [TextureFormat.BC1]: makeFormat(THREE.RGBA_S3TC_DXT1_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.BC3]: makeFormat(THREE.RGBA_S3TC_DXT5_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.ETC1_RGB]: makeFormat(THREE.RGB_ETC1_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.ASTC_4X4]: makeFormat(THREE.RGBA_ASTC_4x4_Format, THREE.UnsignedByteType, true),\r\n  [TextureFormat.PVRTC1_RGB4]: makeFormat(THREE.RGB_PVRTC_4BPPV1_Format, THREE.UnsignedByteType, true),\r\n}\r\n\r\nexport { ThreeFormats }\r\n","const normalmapChunk = `\r\n#ifdef USE_NORMALMAP\r\n#ifdef USE_TANGENT\r\n\r\nvec3 tangentToWorld2 = normal;\r\nvec3 tangentToWorld0 = normalize(tangent - tangentToWorld2 * dot(tangentToWorld2, tangent));\r\n\r\n#ifdef UMBRA_FLIP_TANGENT\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld0, tangentToWorld2));\r\n#else\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld2, tangentToWorld0));\r\n#endif\r\n\r\n#if defined(UMBRA_TEXTURE_SUPPORT_BC5) || defined(UMBRA_TEXTURE_SUPPORT_ASTC)\r\nnormal.xy = texture2D(normalMap, vUv).xy * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#elif defined(UMBRA_TEXTURE_SUPPORT_BC3)\r\nnormal.xy = texture2D(normalMap, vUv).yw * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#else\r\nnormal.xyz = texture2D(normalMap, vUv).xyz;\r\nnormal.xy *= 2.0;\r\nnormal.xy -= 1.0;\r\nnormal = normalize(normal);\r\n#endif\r\n\r\nnormal = tangentToWorld0 * normal.x + tangentToWorld1 * normal.y + tangentToWorld2 * normal.z;\r\nnormal = normalize(normal);\r\n#endif\r\n#endif\r\n\r\n`\r\n\r\nconst metalnessMapChunk = `\r\nfloat metalnessFactor = metalness;\r\n#ifdef USE_METALNESSMAP\r\nvec4 texelMetalness = texture2D( metalnessMap, vUv );\r\nmetalnessFactor *= texelMetalness.r;\r\n#endif\r\n`\r\n\r\n// The BSDF function (see 'bsdfs.glsl') squares the roughness so we don't need to do it here.\r\nconst roughnessMapChunk = `\r\nfloat roughnessFactor = roughness;\r\n#ifdef USE_ROUGHNESSMAP\r\nvec4 texelRoughness = texture2D( roughnessMap, vUv );\r\nfloat roughness = 1.0 - texelRoughness.g;\r\nroughnessFactor *= roughness;\r\n#endif\r\n`\r\n\r\n/**\r\n * ShaderPatcher is a preprocessor class that replaces the default PBR texture read\r\n * shader chunks with the correct Umbra versions. Doing it this way instead of completely\r\n * custom shaders allows the application to use its own materials with Umbra scenes.\r\n */\r\nclass ShaderPatcher {\r\n  flipTangent: boolean\r\n  defines: string\r\n\r\n  constructor(formats: string[]) {\r\n    /*\r\n     * World space transform can swap handedness which isn't handled by three.js in tangent space\r\n     * normal maps so we need to be able to flip them ourselves.\r\n     */\r\n    this.flipTangent = false\r\n\r\n    // Texture format feature flags\r\n    this.defines = ''\r\n\r\n    if (formats.indexOf('bc3') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC3\\n'\r\n    }\r\n    if (formats.indexOf('bc5') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC5\\n'\r\n    }\r\n    if (formats.indexOf('astc_4x4') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_ASTC\\n'\r\n    }\r\n  }\r\n\r\n  process(shader: THREE.Shader, renderer: THREE.WebGLRenderer) {\r\n    let frag = shader.fragmentShader\r\n\r\n    if (this.flipTangent) {\r\n      frag = '#define UMBRA_FLIP_TANGENT\\n' + frag\r\n    }\r\n\r\n    frag = this.defines + frag\r\n    frag = frag.replace('#include <normal_fragment_maps>', normalmapChunk)\r\n    frag = frag.replace('#include <metalnessmap_fragment>', metalnessMapChunk)\r\n    frag = frag.replace('#include <roughnessmap_fragment>', roughnessMapChunk)\r\n\r\n    shader.fragmentShader = frag\r\n  }\r\n}\r\n\r\nexport { ShaderPatcher }\r\n","export class ObjectPool<T> {\r\n  usedList: Array<T> = []\r\n  freeList: Array<T> = []\r\n\r\n  // Tries to find an object matching \"predicate\", if any given.\r\n  // Constructs a new object with \"makeFunc\" if none were found.\r\n  allocate(makeFunc: () => T, predicate?: (x: T) => boolean) {\r\n    let obj: T\r\n\r\n    if (this.freeList.length > 0) {\r\n      // If no predicate given we always take the last one\r\n      if (typeof predicate === 'undefined') {\r\n        obj = this.freeList.pop()\r\n      } else {\r\n        for (let i = 0; i < this.freeList.length; i++) {\r\n          const elem: T = this.freeList[i]\r\n          if (predicate(elem)) {\r\n            obj = elem\r\n            this.freeList.splice(i, 1)\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!obj) {\r\n      obj = makeFunc()\r\n    }\r\n\r\n    this.usedList.push(obj)\r\n    return obj\r\n  }\r\n\r\n  freeAll(clearFunc?: (obj: T) => void) {\r\n    for (let i = 0; i < this.usedList.length; i++) {\r\n      if (clearFunc) {\r\n        clearFunc(this.usedList[i])\r\n      }\r\n      this.freeList.push(this.usedList[i])\r\n    }\r\n    this.usedList.length = 0\r\n  }\r\n\r\n  clear() {\r\n    this.usedList.length = 0\r\n    this.freeList.length = 0\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\n\r\nimport {\r\n  TextureType,\r\n  PlatformFeatures,\r\n  Runtime,\r\n  NativeScene,\r\n  View,\r\n  Renderable,\r\n  ConnectionStatus,\r\n} from '@umbra3d/umbrajs'\r\nimport { SharedFrameState } from './SharedFrameState'\r\nimport { PublicLink } from './PublicLink'\r\nimport { ShaderPatcher } from './ShaderPatcher'\r\nimport { ObjectPool } from './ObjectPool'\r\n\r\nexport interface SceneFactory {\r\n  createScene(link: string | PublicLink): UmbraScene\r\n  createSceneWithURL(url: string): UmbraScene\r\n}\r\n\r\ntype UmbraMesh = THREE.Mesh & { isUmbraMesh: true }\r\n\r\ninterface SceneStatus {\r\n  connected: boolean\r\n  sceneInfo?\r\n  numVisible: number\r\n  numShadowCasters: number\r\n  numCachedMaterials: number\r\n  numAssets: number\r\n}\r\n\r\n/**\r\n * A wrapper type for mesh geometry and its material. Only UmbraScene instantiates the\r\n * THREE.Mesh objects that are passed to the renderer. UmbraScene also creates the final\r\n * THREE.Material instance using the textures and transparency flag in 'materialDesc'\r\n */\r\nexport interface MeshDescriptor {\r\n  geometry\r\n  materialDesc\r\n}\r\n\r\ntype DisposeCallback = (m: UmbraScene) => void\r\n\r\nexport class UmbraScene extends THREE.Object3D {\r\n  // User editable config\r\n  material: THREE.Material = new THREE.MeshBasicMaterial()\r\n  wireframe = false\r\n  freeze = false\r\n\r\n  // Event callbacks\r\n  onConnected: () => void\r\n  onConnectionError: (error: string) => void\r\n  onDisconnected: () => void\r\n  onConnectionChanged: (connected: ConnectionStatus) => void\r\n  onMeshChanged: () => void\r\n\r\n  // We need to present ourselves as a LOD object to get the update() call\r\n  readonly isLOD = true\r\n  readonly autoUpdate = true\r\n  readonly name = 'UmbraScene'\r\n\r\n  set quality(value: number) {\r\n    console.error(\r\n      `Setting UmbraScene.quality is not supported any more. Set camera.umbraQuality = ${value} instead.`,\r\n    )\r\n  }\r\n\r\n  private renderer: THREE.WebGLRenderer\r\n\r\n  private materialPool = new ObjectPool<THREE.Material>()\r\n  private shaderPatcher: ShaderPatcher\r\n  private sharedState: SharedFrameState\r\n\r\n  private stats = {\r\n    numVisible: 0,\r\n    numShadowCasters: 0,\r\n    numCachedMaterials: 0,\r\n    numAssets: 0,\r\n  }\r\n\r\n  private diagnostics = {\r\n    missingNormals: {\r\n      checked: false,\r\n      message:\r\n        'Property umbraScene.opaqueMaterial has been deprecated. Use umbraScene.material instead.',\r\n    },\r\n    deprecatedMaterial: {\r\n      checked: false,\r\n      message: 'UmbraScene has no normals so it will appear black.',\r\n    },\r\n    report: (field: string) => {\r\n      if (!this.diagnostics[field].checked) {\r\n        this.diagnostics[field].checked = true\r\n        console.warn(this.diagnostics[field].message)\r\n      }\r\n    },\r\n  }\r\n\r\n  private umbra: {\r\n    runtime: NonNullable<Runtime>\r\n    nativeScene: NonNullable<NativeScene>\r\n  }\r\n\r\n  private onDispose: DisposeCallback\r\n\r\n  // We need to keep track of changes to emit events\r\n  private oldState = {\r\n    status: undefined,\r\n    visibleIDs: new Set<number>(),\r\n  }\r\n\r\n  // UmbraScene should be instantiated using Umbra.createScene()\r\n  constructor(\r\n    runtime: Runtime,\r\n    scene: NativeScene,\r\n    sharedState: SharedFrameState,\r\n    renderer: THREE.WebGLRenderer,\r\n    features: PlatformFeatures,\r\n    onDispose: DisposeCallback = undefined,\r\n  ) {\r\n    super()\r\n\r\n    this.renderer = renderer\r\n    this.sharedState = sharedState\r\n    this.shaderPatcher = new ShaderPatcher(features.formats)\r\n    this.onDispose = onDispose\r\n\r\n    // We need to flip the Z-axis since scenes are stored in \"left-handed Y is up\" coordinate system\r\n    this.scale.set(1.0, 1.0, -1.0)\r\n\r\n    // Add API objects under their own object for clarity\r\n    this.umbra = {\r\n      runtime: runtime,\r\n      nativeScene: scene,\r\n    }\r\n  }\r\n\r\n  get opaqueMaterial() {\r\n    this.diagnostics.report('deprecatedMaterial')\r\n    return this.material\r\n  }\r\n\r\n  set opaqueMaterial(mat) {\r\n    this.diagnostics.report('deprecatedMaterial')\r\n    this.material = mat\r\n  }\r\n\r\n  getInfo(): SceneStatus {\r\n    const info = { connected: this.umbra.nativeScene.isConnected() }\r\n    if (info.connected) {\r\n      info['sceneInfo'] = this.umbra.nativeScene.getInfo()\r\n    }\r\n    Object.assign(info, this.stats)\r\n    return info as SceneStatus\r\n  }\r\n\r\n  getBounds(): THREE.Box3 {\r\n    if (!this.umbra.nativeScene.isConnected()) {\r\n      return undefined\r\n    }\r\n\r\n    const info = this.umbra.nativeScene.getInfo()\r\n    const bounds = info.bounds\r\n    const min = bounds.mn\r\n    const max = bounds.mx\r\n    const box = new THREE.Box3(\r\n      new THREE.Vector3(min[0], min[1], min[2]),\r\n      new THREE.Vector3(max[0], max[1], max[2]),\r\n    )\r\n    return box\r\n  }\r\n\r\n  getCenter(): THREE.Vector3 {\r\n    const bounds = this.getBounds()\r\n    bounds.applyMatrix4(this.matrixWorld)\r\n    const center = new THREE.Vector3()\r\n    bounds.getCenter(center)\r\n    return center\r\n  }\r\n\r\n  private updateStreamingEvents(visibleIDs: Set<number>) {\r\n    const then = this.oldState.visibleIDs\r\n    const now = visibleIDs\r\n\r\n    if (this.onMeshChanged) {\r\n      if (then.size !== now.size) {\r\n        this.onMeshChanged()\r\n      } else {\r\n        for (const id of now) {\r\n          if (!then.has(id)) {\r\n            this.onMeshChanged()\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.oldState.visibleIDs = visibleIDs\r\n  }\r\n\r\n  // This gets called by ThreejsIntegration's periodic update handler\r\n  private updateNetworkEvents() {\r\n    const status = this.umbra.nativeScene.connectionStatus()\r\n\r\n    if (this.oldState.status !== status) {\r\n      if (this.onConnectionChanged) {\r\n        this.onConnectionChanged(status)\r\n      }\r\n\r\n      switch (status) {\r\n        case ConnectionStatus.ConnectionError:\r\n          if (this.onConnectionError) {\r\n            this.onConnectionError('Could not connect')\r\n          }\r\n          break\r\n        case ConnectionStatus.Connected:\r\n          if (this.onConnected) {\r\n            this.onConnected()\r\n          }\r\n          break\r\n        case ConnectionStatus.Connecting:\r\n          if (this.onDisconnected) {\r\n            this.onDisconnected()\r\n          }\r\n          break\r\n      }\r\n    }\r\n\r\n    this.oldState.status = status\r\n  }\r\n\r\n  update = function(camera: THREE.Camera) {\r\n    if (this.freeze) {\r\n      return\r\n    }\r\n\r\n    let view: View = this.sharedState.cameraToView.get(camera)\r\n\r\n    if (!view) {\r\n      view = this.umbra.runtime.createView()\r\n      this.sharedState.cameraToView.set(camera, view)\r\n    }\r\n\r\n    this.sharedState.viewLastUseFrame.set(view, this.renderer.info.render.frame)\r\n\r\n    this.umbra.nativeScene.setTransform(this.matrixWorld.elements)\r\n\r\n    // If we are using a PBR material then we might need to flip the tangent vector\r\n    if (this.isPBREnabled()) {\r\n      // TODO(pvaananen): Would be nice to avoid recalculating the determinant every frame.\r\n      const flip = this.matrixWorld.determinant() < 0\r\n\r\n      if (flip !== this.shaderPatcher.flipTangent) {\r\n        this.shaderPatcher.flipTangent = flip\r\n        this.materialPool.clear()\r\n      }\r\n    }\r\n\r\n    this.stats.numVisible = 0\r\n    this.stats.numAssets = this.umbra.runtime.assets.size\r\n\r\n    /**\r\n     * Next we find the visible Umbra meshes and add them to the scene graph.\r\n     * This is pretty tricky, because we want more meshes to show up in the shadow map pass\r\n     * than in the main camera render pass. This is why 'mesh.castShadow' doesn't help here\r\n     * since it does the exact opposite.\r\n     *\r\n     * We use a workaround that first adds the common meshes as children of the Umbra scene\r\n     * object but stashes the shadow caster meshes (visible only from lights) to an extra\r\n     * list 'shadowCasters'.\r\n     *\r\n     * The trick is that after the children, we add a 'proxy' object that presents itself\r\n     * as a 'LOD' object. As a consequence it gets its own update() call, and there we go\r\n     * and add the shadow casters also to the children list. At this point the opaque\r\n     * renderable objects were already collected to their own render list, so 'children'\r\n     * is safe to modify.\r\n     *\r\n     * In essence, the flow is the following.\r\n     *\r\n     *    three.js                           scene object (this)\r\n     *    --------                           ------------------\r\n     *    Starts traversing three.js scene graph\r\n     *    Calls scene.update(cam) ---------> Updates views\r\n     *                                       Fetches a list of renderables\r\n     *                                       Adds common meshes to this.children\r\n     *    Adds scene.children to\r\n     *      the render list\r\n     *    Starts rendering scene.children\r\n     *    Calls proxy.update(cam) ---------> Proxy goes and adds shadow casters to this.children\r\n     *    Starts the shadow pass\r\n     *    Adds scene.children to shadow\r\n     *      render list\r\n     *    Renders the shadow pass\r\n     *    Renders the opaque pass\r\n     *    Renders the transparent pass\r\n     *\r\n     * As you can see, the 'this.children' list is mutated halfway through the renderer's\r\n     * scene graph traversal so that different object list ends up to the shadow pass render code.\r\n     */\r\n\r\n    // First filter away last frame's meshes\r\n    const newChildren = []\r\n    for (let i = 0; i < this.children.length; i++) {\r\n      if (!this.children[i].isUmbraMesh) {\r\n        newChildren.push(this.children[i])\r\n      }\r\n    }\r\n\r\n    this.children = newChildren\r\n\r\n    const shadowCasters = []\r\n\r\n    const proxy = new THREE.Object3D() as any\r\n    proxy.isLOD = true\r\n    proxy.autoUpdate = true\r\n    proxy.update = cam => {\r\n      // Remove the proxy itself\r\n      this.children.pop()\r\n\r\n      // Add the shadow casters\r\n      for (let i = 0; i < shadowCasters.length; i++) {\r\n        this.children.push(shadowCasters[i])\r\n      }\r\n    }\r\n\r\n    this.materialPool.freeAll(mat => {\r\n      // Remove references to textures so GC can release the three.js objects\r\n      delete mat.map\r\n      delete mat.normalMap\r\n      delete mat.metalnessMap\r\n      delete mat.roughnessMap\r\n    })\r\n\r\n    let visible: Renderable[] = []\r\n    const visibleIDs: Set<number> = new Set()\r\n\r\n    // On the first frame the view didn't yet exist when UmbrajsThreeInternal collected a list of renderables,\r\n    // so the list in \"viewRenderables\" may be missing.\r\n    if (this.sharedState.viewRenderables.has(view)) {\r\n      visible = this.sharedState.viewRenderables.get(view)\r\n    }\r\n\r\n    for (let i = 0; i < visible.length; i++) {\r\n      // Each view's list includes renderables of all UmbraScenes, so we need to pick only the relevant ones here.\r\n      if (visible[i].scenePtr !== this.umbra.nativeScene.ptr) {\r\n        continue\r\n      }\r\n\r\n      const { materialDesc, geometry } = visible[i].mesh as MeshDescriptor\r\n      visibleIDs.add(visible[i].id)\r\n      this.stats.numVisible += 1\r\n\r\n      const isTransparent =\r\n        materialDesc.transparent || this.material.transparent\r\n\r\n      // Fetch a new material from the pool if we already have free ones. This avoids\r\n      // extra allocations and more importantly 'onBeforeCompile' calls.\r\n      const material = this.materialPool.allocate(\r\n        () => this.material.clone(),\r\n        (mat: THREE.Material) => {\r\n          return mat.transparent === isTransparent\r\n        },\r\n      )\r\n\r\n      material.wireframe = this.wireframe\r\n      material.opacity = this.material.opacity\r\n      material.transparent = isTransparent\r\n\r\n      material.onBeforeCompile = (shader, renderer) => {\r\n        /**\r\n         * If the original material already had a custom preprocessor callback we need to call\r\n         * that first. We need to use 'apply' in case the callback uses 'this' reference to\r\n         * access some material properties.\r\n         */\r\n        if (this.material.onBeforeCompile) {\r\n          this.material.onBeforeCompile.apply(material, [shader, renderer])\r\n        }\r\n\r\n        this.shaderPatcher.process(shader, renderer)\r\n      }\r\n\r\n      const diffuseMap = materialDesc.textures[TextureType.Diffuse]\r\n      const normalMap = materialDesc.textures[TextureType.Normal]\r\n      const metalglossMap = materialDesc.textures[TextureType.Specular]\r\n\r\n      if (diffuseMap && diffuseMap.isTexture) {\r\n        material.map = diffuseMap\r\n      }\r\n\r\n      if (normalMap && normalMap.isTexture) {\r\n        material.normalMap = normalMap\r\n        material.vertexTangents = true\r\n        material.normalMapType = THREE.TangentSpaceNormalMap\r\n      }\r\n\r\n      if (metalglossMap && metalglossMap.isTexture) {\r\n        material.metalnessMap = metalglossMap\r\n        material.metalness = 1.0\r\n        material.roughnessMap = metalglossMap\r\n        material.roughness = 1.0\r\n      }\r\n\r\n      /**\r\n       * We instatiate new Mesh objects each frame but the constructor is very cheap\r\n       * and the references should live for a very short time since 'this.children'\r\n       * gets cleared every frame.\r\n       */\r\n      const mesh = new THREE.Mesh(geometry, material) as UmbraMesh\r\n      mesh.isUmbraMesh = true\r\n      mesh.matrixWorld.copy(this.matrixWorld)\r\n      mesh.castShadow = this.castShadow\r\n      mesh.receiveShadow = this.receiveShadow\r\n      mesh.visible = true\r\n      this.children.push(mesh)\r\n\r\n      // TODO(pvaananen): Does this check work with multiple cameras?\r\n      if ((visible[i].mask & 0x01) === 0) {\r\n        shadowCasters.push(mesh)\r\n        mesh.frustumCulled = true\r\n      } else {\r\n        this.children.push(mesh)\r\n        mesh.frustumCulled = false\r\n      }\r\n    }\r\n\r\n    // Emit a warning if normals are required but missing\r\n    if (!this.diagnostics.missingNormals.checked && this.isPBREnabled()) {\r\n      for (let i = 0; i < this.children.length; i++) {\r\n        if (!this.children[i].isUmbraMesh) {\r\n          continue\r\n        }\r\n        if (!('normal' in this.children[i].geometry.attributes)) {\r\n          this.diagnostics.report('missingNormals')\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    this.stats.numShadowCasters = shadowCasters.length\r\n    this.stats.numCachedMaterials =\r\n      this.materialPool.usedList.length + this.materialPool.freeList.length\r\n\r\n    if (shadowCasters.length > 0) {\r\n      this.children.push(proxy)\r\n    }\r\n\r\n    this.updateStreamingEvents(visibleIDs)\r\n  }\r\n\r\n  dispose() {\r\n    if (this.onDispose) {\r\n      this.onDispose(this)\r\n    }\r\n\r\n    // Remove all Umbra meshes from children\r\n    this.children = this.children.filter((x: UmbraMesh) => !x.isUmbraMesh)\r\n\r\n    // Dispose all cached materials\r\n    this.materialPool.freeAll(mat => mat.dispose())\r\n\r\n    // We don't dispose mesh geometries here because they are managed by the Runtime, and\r\n    // Views are managed by UmbrajsThreeInternal.\r\n\r\n    this.umbra.nativeScene.destroy()\r\n    // Runtime must be manually freed by the user with .dispose() of the API object\r\n  }\r\n\r\n  private isPBREnabled() {\r\n    return 'normalMapType' in this.material\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\nimport { SceneFactory } from './Scene'\r\n\r\nexport class Loader extends THREE.Loader {\r\n  private Umbra: SceneFactory\r\n  constructor(Umbra: SceneFactory, manager?: THREE.LoadingManager) {\r\n    super(manager)\r\n    this.Umbra = Umbra\r\n  }\r\n\r\n  load(url: string, onLoad, onProgress, onError) {\r\n    const model = this.Umbra.createScene(url)\r\n\r\n    if (onError) {\r\n      model.onConnectionError = err => {\r\n        onError(err)\r\n      }\r\n    }\r\n    model.onConnected = () => {\r\n      delete model.onConnectionError\r\n      if (onProgress) {\r\n        onProgress(1.0)\r\n      }\r\n      onLoad(model)\r\n    }\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\nimport {\r\n  initUmbra,\r\n  deinitUmbra,\r\n  Math as UmbraMath,\r\n  Assets,\r\n  UmbraInstance,\r\n  PlatformFeatures,\r\n  TextureSupportFlags,\r\n  TextureType,\r\n  ColorSpace,\r\n  Runtime,\r\n  View,\r\n  Renderable,\r\n  VertexBuffer,\r\n} from '@umbra3d/umbrajs'\r\nimport { ThreeFormats } from './ThreeFormats'\r\nimport { PublicLink } from './PublicLink'\r\nimport { SharedFrameState } from './SharedFrameState'\r\nimport { UmbraScene, SceneFactory, MeshDescriptor } from './Scene'\r\nimport { WebGLRenderer } from 'three'\r\nimport { HeapBufferView } from '@umbra3d/umbrajs/dist/Heap'\r\n\r\nexport type UmbraCamera = THREE.Camera & {\r\n  umbraStreamingPosition?: THREE.Vector3\r\n  umbraQuality?: number\r\n}\r\n\r\nfunction makeBoundingSphere(aabb: UmbraMath.BoundingBox) {\r\n  const min = aabb[0]\r\n  const max = aabb[1]\r\n  const size = new THREE.Vector3(\r\n    max[0] - min[0],\r\n    max[1] - min[1],\r\n    max[2] - min[2],\r\n  )\r\n  const pos = new THREE.Vector3(\r\n    min[0] + size.x * 0.5,\r\n    min[1] + size.y * 0.5,\r\n    min[2] + size.z * 0.5,\r\n  )\r\n  return new THREE.Sphere(pos, size.length())\r\n}\r\n\r\nclass UmbrajsThreeInternal implements SceneFactory {\r\n  // Upper VRAM memory use limit in bytes\r\n  memoryLimit = 500 * 1024 * 1024\r\n  // Upper total download size limit in bytes. Turned off by default.\r\n  downloadLimit = 0\r\n  // This gets lowered automatically if memory limit is hit\r\n  qualityFactor = 1.0\r\n\r\n  onStreamingUpdate: (progress: number) => void\r\n  onStreamingComplete: () => void\r\n\r\n  // An instance of the umbrajs library for debugging\r\n  umbrajs: UmbraInstance\r\n\r\n  private runtime: Runtime\r\n  private features: PlatformFeatures\r\n  private renderer: WebGLRenderer\r\n  private updateTask: number = undefined\r\n\r\n  private assetSizes = new Map<any, number>()\r\n  private textureMemoryUsed = 0\r\n  private meshMemoryUsed = 0\r\n  private lastQualityLowerFrame = -1\r\n\r\n  private get memoryUsed() {\r\n    return this.textureMemoryUsed + this.meshMemoryUsed\r\n  }\r\n\r\n  private umbraScenes = new Set<UmbraScene>()\r\n\r\n  private oldState = {\r\n    progress: 0,\r\n    downloadLimitReached: false,\r\n  }\r\n\r\n  private sharedState: SharedFrameState = {\r\n    cameraToView: new Map<THREE.Camera, View>(),\r\n    viewRenderables: new Map<View, Renderable[]>(),\r\n    viewLastUseFrame: new Map<View, number>(),\r\n  }\r\n\r\n  // Temporary values we don't want to reallocate every frame\r\n  private tempVector = new THREE.Vector3()\r\n  private dirVector = new THREE.Vector3()\r\n  private matrixWorldInverse = new THREE.Matrix4()\r\n  private projScreenMatrix = new THREE.Matrix4()\r\n  private cameraWorldPosition = new THREE.Vector3()\r\n\r\n  // This class should be instantiated via initUmbra()\r\n  constructor(umbrajs: UmbraInstance, renderer: WebGLRenderer) {\r\n    let context: WebGLRenderingContext\r\n    // three.js r106 has no 'getContext'\r\n    if ('getContext' in renderer) {\r\n      context = renderer.getContext()\r\n    } else {\r\n      context = (renderer as any).context\r\n    }\r\n    const features = umbrajs.getPlatformFeatures(context)\r\n\r\n    // Three.js does not support BC5 compressed formats so we manually disable them.\r\n    features.textureSupportMask &= ~TextureSupportFlags.BC5\r\n\r\n    this.umbrajs = umbrajs\r\n    this.runtime = umbrajs.createRuntime(features)\r\n    this.renderer = renderer\r\n    this.features = features\r\n\r\n    this.startEventUpdate(1000 / 60)\r\n  }\r\n\r\n  startEventUpdate(interval: number) {\r\n    this.stopEventUpdate()\r\n    this.updateTask = window.setInterval(() => {\r\n      this.updateEvents()\r\n      this.umbraScenes.forEach(m => (m as any).updateNetworkEvents())\r\n    }, interval)\r\n  }\r\n\r\n  stopEventUpdate() {\r\n    if (typeof this.updateTask !== 'undefined') {\r\n      window.clearInterval(this.updateTask)\r\n      delete this.updateTask\r\n    }\r\n  }\r\n\r\n  private findLights(umbraScene: UmbraScene): Set<THREE.DirectionalLight> {\r\n    let parentScene\r\n    umbraScene.traverseAncestors(obj => {\r\n      if (obj['isScene']) {\r\n        parentScene = obj\r\n      }\r\n    })\r\n\r\n    if (!parentScene || (parentScene && !parentScene.isScene)) {\r\n      return new Set()\r\n    }\r\n\r\n    const lights: Set<THREE.DirectionalLight> = new Set()\r\n    parentScene.traverseVisible((obj: THREE.Object3D) => {\r\n      if (obj['isDirectionalLight'] && obj['castShadow']) {\r\n        lights.add(obj as THREE.DirectionalLight)\r\n      }\r\n    })\r\n\r\n    return lights\r\n  }\r\n\r\n  private pruneOldViews(frame: number): void {\r\n    /**\r\n     * We get no notification when cameras are removed from the scene graph\r\n     * so we'll go and remove views based on their age.\r\n     */\r\n    for (const [view, lastUsed] of this.sharedState.viewLastUseFrame) {\r\n      if (frame - lastUsed < 600) {\r\n        continue\r\n      }\r\n\r\n      for (const [cam, view2] of this.sharedState.cameraToView) {\r\n        if (view2 === view) {\r\n          this.sharedState.cameraToView.delete(cam)\r\n          break\r\n        }\r\n      }\r\n      view.destroy()\r\n      this.sharedState.viewLastUseFrame.delete(view)\r\n    }\r\n  }\r\n\r\n  private updateViews(): void {\r\n    const shared = this.sharedState\r\n\r\n    const lights: Set<THREE.DirectionalLight> = new Set()\r\n\r\n    if (this.renderer.shadowMap.enabled) {\r\n      for (const umbraScene of this.umbraScenes) {\r\n        for (const light of this.findLights(umbraScene)) {\r\n          lights.add(light)\r\n        }\r\n      }\r\n    }\r\n\r\n    const dir = this.dirVector\r\n    const vector3 = this.tempVector\r\n\r\n    const lightDirections = Array.from(lights).map(light => {\r\n      dir.setFromMatrixPosition(light.target.matrixWorld)\r\n      vector3.setFromMatrixPosition(light.matrixWorld)\r\n      dir.sub(vector3)\r\n      return [dir.x, dir.y, dir.z]\r\n    }, lights)\r\n\r\n    this.pruneOldViews(this.renderer.info.render.frame)\r\n\r\n    for (const [threeCamera, view] of shared.cameraToView) {\r\n      const camera: UmbraCamera = threeCamera\r\n\r\n      this.matrixWorldInverse.getInverse(camera.matrixWorld)\r\n      this.projScreenMatrix.multiplyMatrices(\r\n        camera.projectionMatrix,\r\n        this.matrixWorldInverse,\r\n      )\r\n\r\n      // By default we stream in meshes around the camera, but user can override it.\r\n      if ('umbraStreamingPosition' in camera) {\r\n        this.cameraWorldPosition.copy(camera.umbraStreamingPosition)\r\n      } else {\r\n        camera.getWorldPosition(this.cameraWorldPosition)\r\n      }\r\n\r\n      let quality = 0.5\r\n      if ('umbraQuality' in camera) {\r\n        quality = camera.umbraQuality\r\n      }\r\n\r\n      const pos = this.cameraWorldPosition\r\n      view.setCamera(\r\n        this.projScreenMatrix.elements,\r\n        [pos.x, pos.y, pos.z],\r\n        quality * this.qualityFactor,\r\n        lightDirections,\r\n      )\r\n\r\n      let list: Renderable[] = []\r\n      if (shared.viewRenderables.has(view)) {\r\n        list = shared.viewRenderables.get(view)\r\n        list.length = 0\r\n      } else {\r\n        shared.viewRenderables.set(view, list)\r\n      }\r\n\r\n      const batchSize = 500\r\n      let visible: Renderable[] = []\r\n      do {\r\n        visible = view.getVisible(batchSize)\r\n        list.push(...visible)\r\n      } while (visible.length === batchSize)\r\n    }\r\n  }\r\n\r\n  update(timeBudget = 7) {\r\n    const downloadLimitReached =\r\n      this.downloadLimit !== 0 &&\r\n      this.getStats().maxBytesDownloaded >= this.downloadLimit\r\n\r\n    // If the limit is reached we freeze all updates. View frustum culling\r\n    // will still work, but the streaming set is kept static.\r\n    if (downloadLimitReached) {\r\n      if (!this.oldState.downloadLimitReached) {\r\n        this.umbrajs.abortDownloads()\r\n      }\r\n    } else {\r\n      const start = performance.now()\r\n      this.runtime.update()\r\n      const updateTook = performance.now() - start\r\n      this.runtime.loadAssets(this.handlers, timeBudget - updateTook)\r\n      this.updateViews()\r\n    }\r\n\r\n    this.oldState.downloadLimitReached = downloadLimitReached\r\n\r\n    if (this.memoryUsed / this.memoryLimit < 0.25) {\r\n      this.adjustQuality(1.1)\r\n    }\r\n  }\r\n\r\n  createScene(link: string | PublicLink): UmbraScene {\r\n    let url: string\r\n    if (typeof link === 'string') {\r\n      url = link\r\n    } else if (typeof link === 'object') {\r\n      if (('token' in link) as any) {\r\n        console.warn(\r\n          'Connection with {token, projectID, modelID} is deprecated. Use {key, project, model} or a string locator instad.',\r\n        )\r\n        link.key = link['token']\r\n        link.project = link['projectID']\r\n        link.model = link['modelID']\r\n      }\r\n\r\n      if (!('key' in link && 'project' in link && 'model' in link)) {\r\n        throw new Error(\r\n          'createScene() expects an object with properties \"key\", \"project\", and \"model\"',\r\n        )\r\n      }\r\n      url = `key=${link.key}&project=${link.project}&model=${link.model}`\r\n    } else {\r\n      throw new TypeError('expected either string or an object argument')\r\n    }\r\n\r\n    const umbraScene = new UmbraScene(\r\n      this.runtime,\r\n      this.runtime.createScenePublic(url),\r\n      this.sharedState,\r\n      this.renderer,\r\n      this.features,\r\n      s => this.umbraScenes.delete(s),\r\n    )\r\n    this.umbraScenes.add(umbraScene)\r\n    return umbraScene\r\n  }\r\n\r\n  createSceneWithURL(url: string): UmbraScene {\r\n    const scene = this.runtime.createSceneLocal(url)\r\n    const umbraScene = new UmbraScene(\r\n      this.runtime,\r\n      scene,\r\n      this.sharedState,\r\n      this.renderer,\r\n      this.features,\r\n      s => this.umbraScenes.delete(s),\r\n    )\r\n    this.umbraScenes.add(umbraScene)\r\n    return umbraScene\r\n  }\r\n\r\n  /**\r\n   * Returns streaming information. We can't tell which files came from the browser cache\r\n   * so we report lower and upper limits of the true download size.\r\n   *\r\n   * The returned object has the following fields:\r\n   *\r\n   *  'maxBytesDownloaded' an upper limit assuming no file was cached,\r\n   *  'minBytesDownloaded' the corresponding lower limit assuming all duplicates came from cache.\r\n   *  'textureMemoryUse' the number of bytes used by texture assets\r\n   *  'meshMemoryUse' the number of bytes used by mesh assets\r\n   *\r\n   */\r\n  getStats() {\r\n    return Object.assign(this.umbrajs.getStreamingInfo(), {\r\n      textureMemoryUsed: this.textureMemoryUsed,\r\n      meshMemoryUsed: this.meshMemoryUsed,\r\n    })\r\n  }\r\n\r\n  private canFitInMemory(bytes: number) {\r\n    return this.memoryUsed + bytes < this.memoryLimit\r\n  }\r\n\r\n  private adjustQuality(factor: number) {\r\n    if (this.renderer.info.render.frame == this.lastQualityLowerFrame) {\r\n      return\r\n    }\r\n    this.qualityFactor = Math.max(0, Math.min(1, this.qualityFactor * factor))\r\n    this.lastQualityLowerFrame = this.renderer.info.render.frame\r\n  }\r\n\r\n  // Converts a texture descriptor and a pixel buffer to a three.js compatible texture\r\n  private makeTexture(\r\n    info,\r\n    buffer: HeapBufferView,\r\n    glformat,\r\n  ): THREE.CompressedTexture | THREE.DataTexture {\r\n    const pixelData = buffer.getArray().slice() as THREE.TypedArray\r\n\r\n    let tex\r\n    if (glformat.compressed) {\r\n      const mip = {\r\n        width: info.width,\r\n        height: info.height,\r\n        data: pixelData as Uint8ClampedArray,\r\n      }\r\n      tex = new THREE.CompressedTexture([mip], info.width, info.height)\r\n    } else {\r\n      tex = new THREE.DataTexture(pixelData, info.width, info.height)\r\n    }\r\n\r\n    tex.format = glformat.format\r\n    tex.type = glformat.type\r\n    tex.magFilter = THREE.LinearFilter\r\n    tex.minFilter = THREE.LinearFilter\r\n    tex.anisotropy = 0\r\n\r\n    return tex\r\n  }\r\n\r\n  // AssetLoad handlers that create and remove materials, textures, and meshes\r\n  private handlers = {\r\n    LoadMaterial: (load: Assets.LoadMaterial) => {\r\n      const material = load.data\r\n      material.transparent = load.data.transparent ? true : false\r\n      load.prepare(this.runtime.addAsset(material))\r\n      load.finish(Assets.AssetLoadResult.Success)\r\n    },\r\n    UnloadMaterial: (unload: Assets.Unload) => {\r\n      this.runtime.removeAsset(unload, unload.data)\r\n      unload.finish()\r\n    },\r\n    LoadTexture: (load: Assets.LoadTexture) => {\r\n      const info = load.data.info\r\n      const buffer = load.data.buffer\r\n\r\n      let glformat\r\n\r\n      if (ThreeFormats.hasOwnProperty(info.format)) {\r\n        glformat = ThreeFormats[info.format]\r\n      }\r\n\r\n      if (!glformat) {\r\n        // Add a dummy object for unknown formats. They will appear as a solid black color.\r\n        console.log('Unknown texture format', info.format)\r\n        load.prepare(this.runtime.addAsset({ isTexture: false }))\r\n        load.finish(Assets.AssetLoadResult.Success)\r\n        return\r\n      }\r\n\r\n      if (!this.canFitInMemory(buffer.size)) {\r\n        load.finish(Assets.AssetLoadResult.OutOfMemory)\r\n        this.adjustQuality(0.8)\r\n        return\r\n      }\r\n\r\n      const tex = this.makeTexture(info, buffer, glformat)\r\n\r\n      /**\r\n       * A workaround for the case where we directly output colors in gamma space.\r\n       * We make diffuse textures linear to avoid gamma expansion at texture fetch time.\r\n       * This is slightly wrong because texture filtering and shading will be done\r\n       * in gamma space, but this behavior is what people usually expect.\r\n       */\r\n      let gammaOutput = false\r\n      if ('outputEncoding' in this.renderer) {\r\n        // three.js version 112 and after\r\n        gammaOutput = this.renderer['outputEncoding'] === THREE.sRGBEncoding\r\n      } else if ('gammaOutput' in this.renderer) {\r\n        // three.js prior to version 112\r\n        gammaOutput = this.renderer['gammaOutput']\r\n      }\r\n\r\n      if (info.type === TextureType.Diffuse && !gammaOutput) {\r\n        tex.encoding = THREE.LinearEncoding\r\n      } else {\r\n        tex.encoding =\r\n          info.colorSpace === ColorSpace.Linear\r\n            ? THREE.LinearEncoding\r\n            : THREE.sRGBEncoding\r\n      }\r\n\r\n      tex.needsUpdate = true\r\n\r\n      this.textureMemoryUsed += buffer.size\r\n      this.assetSizes.set(tex, buffer.size)\r\n      load.prepare(this.runtime.addAsset(tex))\r\n      load.finish(Assets.AssetLoadResult.Success)\r\n    },\r\n    UnloadTexture: (unload: Assets.Unload) => {\r\n      // Free texture data only if it's not a dummy texture\r\n      if (unload.data.isTexture) {\r\n        unload.data.dispose()\r\n      }\r\n\r\n      if (this.assetSizes.has(unload.data)) {\r\n        this.textureMemoryUsed -= this.assetSizes.get(unload.data)\r\n        this.assetSizes.delete(unload.data)\r\n      }\r\n\r\n      this.runtime.removeAsset(unload, unload.data)\r\n      unload.finish()\r\n    },\r\n    LoadMesh: (load: Assets.LoadMesh) => {\r\n      /**\r\n       * LoadMesh gives us all the vertex data in load.data.buffers.\r\n       * The buffers are only valid during this handler, and the memory will be\r\n       * reused for other meshes later. Therefore we make copies of the arrays\r\n       * for three.js which is something we would have to do anyway.\r\n       */\r\n\r\n      const attribs = {\r\n        position: { components: 3 },\r\n        normal: { components: 3 },\r\n        uv: { components: 2 },\r\n        tangent: { components: 3 },\r\n      }\r\n\r\n      let totalSize = 0\r\n      Object.keys(attribs)\r\n        .map(name => load.data.buffers[name])\r\n        .forEach(buffer => {\r\n          if (buffer) {\r\n            totalSize += buffer.data.size\r\n          }\r\n        })\r\n\r\n      if (!this.canFitInMemory(totalSize)) {\r\n        load.finish(Assets.AssetLoadResult.OutOfMemory)\r\n        this.adjustQuality(0.8)\r\n        return\r\n      }\r\n\r\n      const geometry = new THREE.BufferGeometry()\r\n      const indexArray = load.data.buffers['index'].data.getArray()\r\n      const indices = Array.from(indexArray as any)\r\n      geometry.setIndex(indices as number[])\r\n      geometry.boundingSphere = makeBoundingSphere(load.data.bounds)\r\n\r\n      Object.keys(attribs).forEach(name => {\r\n        const buffer = load.data.buffers[name] as VertexBuffer\r\n\r\n        if (buffer) {\r\n          const view = buffer.data\r\n          const array = view.getArray()\r\n          const attrib = new THREE.Float32BufferAttribute(\r\n            array.slice(),\r\n            attribs[name].components,\r\n          )\r\n\r\n          if ('setAttribute' in (geometry as any)) {\r\n            // three.js v112\r\n            geometry['setAttribute'](name, attrib)\r\n          } else {\r\n            // three.js prior to v112\r\n            geometry['addAttribute'](name, attrib)\r\n          }\r\n        }\r\n      })\r\n\r\n      const meshDescriptor: MeshDescriptor = {\r\n        geometry,\r\n        materialDesc: load.data.material,\r\n      }\r\n\r\n      this.meshMemoryUsed += totalSize\r\n      this.assetSizes.set(meshDescriptor, totalSize)\r\n      load.prepare(this.runtime.addAsset(meshDescriptor))\r\n      load.finish(Assets.AssetLoadResult.Success)\r\n    },\r\n    UnloadMesh: (unload: Assets.Unload) => {\r\n      const meshDesc = unload.data\r\n      if (this.assetSizes.has(unload.data)) {\r\n        this.meshMemoryUsed -= this.assetSizes.get(unload.data)\r\n        this.assetSizes.delete(unload.data)\r\n      }\r\n      // Tell Umbra's runtime that this asset doesn't exist anymore and finish the job\r\n      this.runtime.removeAsset(unload, meshDesc)\r\n      // Release three.js's resources\r\n      meshDesc.geometry.dispose()\r\n      unload.finish()\r\n    },\r\n  }\r\n\r\n  private updateEvents() {\r\n    const progress = this.getStreamingProgress()\r\n    if (this.oldState.progress != progress) {\r\n      if (this.onStreamingUpdate) {\r\n        this.onStreamingUpdate(progress)\r\n      }\r\n      if (progress === 1.0 && this.onStreamingComplete) {\r\n        this.onStreamingComplete()\r\n      }\r\n    }\r\n\r\n    this.oldState.progress = progress\r\n  }\r\n\r\n  getStreamingProgress(): number {\r\n    return this.runtime.getStreamingProgress()\r\n  }\r\n\r\n  dispose() {\r\n    this.stopEventUpdate()\r\n\r\n    for (const view of this.sharedState.cameraToView.values()) {\r\n      view.destroy()\r\n    }\r\n\r\n    this.umbraScenes.forEach((m: UmbraScene) => m.dispose())\r\n\r\n    this.sharedState.cameraToView.clear()\r\n    this.umbraScenes.clear()\r\n\r\n    this.runtime.assets.forEach((asset, userPtr) => {\r\n      if ('geometry' in asset) {\r\n        asset.geometry.dispose()\r\n      }\r\n      if ('dispose' in asset) {\r\n        asset.dispose()\r\n      }\r\n    })\r\n\r\n    this.assetSizes.clear()\r\n    this.textureMemoryUsed = 0\r\n    this.meshMemoryUsed = 0\r\n\r\n    this.runtime.destroy()\r\n    this.runtime = undefined\r\n\r\n    deinitUmbra(this.umbrajs)\r\n  }\r\n}\r\n\r\nexport function initWithThreeJS(\r\n  renderer: THREE.WebGLRenderer,\r\n  userConfig: { wasmURL?: string },\r\n) {\r\n  if (!renderer) {\r\n    throw new TypeError('\"renderer\" should be of type THREE.WebGLRenderer')\r\n  }\r\n\r\n  return initUmbra(userConfig).then(Umbra => {\r\n    return new UmbrajsThreeInternal(Umbra, renderer)\r\n  })\r\n}\r\n\r\n// Hide the library object constructor by wrapping it in an interface\r\ninterface UmbrajsThree extends UmbrajsThreeInternal {}\r\nexport { UmbraScene as Scene, UmbrajsThree }\r\nexport { Loader } from './Loader'\r\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","_scriptDir","MatrixFormat","TextureType","TextureFormat","ColorSpace","VertexAttribute","BufferFlags","LogLevel","TransferStatus","HeaderError","HttpMethod","LibraryInfo","InvalidUserPointer","TextureSupportFlags","RuntimeFlags","ConnectionStatus","DepthRange","FilterShapeType","SceneCopyStatus","SceneCopyDestinationType","SceneCopySourceType","AssetType","AssetLoadResult","RayQueryFlags","UmbraNativeAPI","document","currentScript","src","undefined","c","m","aa","hasOwnProperty","arguments","thisProgram","quit","a","b","preRun","postRun","r","indexOf","substr","lastIndexOf","ba","print","console","log","bind","v","printErr","warn","da","w","ea","fa","x","ia","ja","f64-rem","debugger","WebAssembly","z","A","B","ka","la","d","e","f","string","ma","na","C","array","D","set","g","k","h","l","oa","_E","apply","pa","qa","F","Math","max","subarray","slice","Uint8Array","G","va","wa","H","xa","ya","ra","TextDecoder","sa","decode","String","fromCharCode","charCodeAt","ta","ua","za","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","Aa","TOTAL_MEMORY","Ba","shift","Vb","Sb","dynCall_v","dynCall_vi","wasmMemory","Memory","initial","buffer","byteLength","Ca","Ea","Fa","Ga","Ha","Ia","Ja","unshift","I","La","Ma","J","startsWith","preloadedImages","preloadedAudios","Na","locateFile","Oa","wasmBinary","Qa","asm","exports","monitorRunDependencies","instance","fetch","Promise","credentials","then","ok","arrayBuffer","instantiate","env","global","NaN","Infinity","global.Math","asm2wasm","instantiateWasm","instantiateStreaming","memory","table","Table","maximum","element","__memory_base","__table_base","Sa","alert","n","u","q","t","XMLHttpRequest","open","withCredentials","responseType","y","qc","rc","onload","status","response","URLsDownloaded","maxBytesDownloaded","has","add","minBytesDownloaded","dynCall_viii","dynCall_viiii","V","pc","onerror","onabort","setRequestHeader","btoa","split","send","Ra","push","Ta","K","Va","Wa","Xa","_L","_M","Ya","Za","$a","pop","ab","this","fromWireType","N","O","bb","cb","replace","db","Function","eb","Error","name","message","stack","create","fb","gb","P","forEach","hb","ib","Q","jb","R","gc","kb","S","lb","Wb","U","mb","nb","ob","qb","Qb","$b","pb","zc","sb","FUNCTION_TABLE","join","tb","ub","vb","xb","W","yb","zb","Ab","Bb","Y","Ib","_Jb","X","Kb","Z","Hb","Nb","Fb","Gb","Rb","Ob","Tb","Ub","Xb","pointerLockElement","canvas","mozPointerLockElement","webkitPointerLockElement","msPointerLockElement","preloadPlugins","Yb","Zb","MozBlobBuilder","WebKitBlobBuilder","ac","window","URL","webkitURL","canHandle","test","handle","Blob","type","bc","size","ha","append","getBlob","createObjectURL","Image","complete","createElement","width","height","getContext","drawImage","revokeObjectURL","yc",".ogg",".wav",".mp3","Audio","addEventListener","noExitRuntime","setTimeout","cc","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","msRequestPointerLock","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","msExitPointerLock","elementPointerLock","preventDefault","ec","fc","hc","parentNode","fullscreenElement","mozFullScreenElement","msFullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","exitFullscreen","ic","SDL","screen","jc","kc","insertBefore","removeChild","onFullScreen","onFullscreen","appendChild","requestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","webkitRequestFullScreen","Bc","mc","cancelFullScreen","mozCancelFullScreen","msExitFullscreen","webkitCancelFullScreen","nc","Lb","requestAnimationFrame","Date","now","jpg","jpeg","png","bmp","ogg","wav","mp3","oc","forcedAspectRatio","round","min","style","removeProperty","setProperty","Ac","tc","uc","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","sc","onupgradeneeded","target","result","transaction","objectStoreNames","contains","objectStore","createObjectStore","onsuccess","error","vc","onExit","_exit","_fflush","InternalError","Gc","Hc","Dc","BindingError","count_emval_handles","get_first_emval","UnboundTypeError","requestFullScreen","setCanvasSize","pauseMainLoop","resumeMainLoop","setStatus","statusMessage","Pb","preMainLoop","postMainLoop","audio","Mb","setImmediate","data","stopPropagation","postMessage","Eb","getUserMedia","navigator","mozGetUserMedia","createContext","antialias","alpha","wc","GL","GLctx","xc","dc","dateNow","performance","Kc","Ua","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","_","___errno_location","M","L","stat","map","concat","lc","Da","read","write","toWireType","argPackAdvance","readValueFromPointer","ca","p","j","rb","wb","T","s","o","E","ArrayBuffer","Uint8ClampedArray","$","Db","deleteObject","Cb","abort","get","Ic","Jc","put","grow","Fc","toTimeString","match","getTimezoneOffset","Cc","Number","Ec","getSeconds","getMinutes","getHours","getDate","getMonth","getFullYear","getDay","getTime","_UmbraAssetLoadAbortRequested","ga","_UmbraAssetLoadFinish","_UmbraAssetLoadGetType","_UmbraAssetLoadPrepare","_UmbraAssetUnloadFinish","_UmbraAssetUnloadGetType","_UmbraAssetUnloadGetUserPointer","_UmbraClientCreate","_UmbraClientDestroy","_UmbraConfigInit","_UmbraEcefToGeodetic","_UmbraEnvironmentInfoDefaults","_UmbraGeodeticToEcef","_UmbraGetLibraryInfo","_UmbraMaterialLoadGetInfo","_UmbraMeshLoadFinishExternal","_UmbraMeshLoadGetData","_UmbraMeshLoadGetInfo","_UmbraMeshLoadGetSerializedSize","_UmbraMeshLoadSerialize","_UmbraMeshStreamDone","_UmbraMeshStreamNext","_UmbraMeshStreamSetBuffers","_UmbraRuntimeCreate","_UmbraRuntimeDestroy","_UmbraRuntimeGetStreamingState","_UmbraRuntimeNextAssetLoad","_UmbraRuntimeNextAssetUnload","_UmbraRuntimeUpdate","_UmbraSceneCopyCreate","_UmbraSceneCopyDestroy","Ka","_UmbraSceneCopyGetError","_UmbraSceneCopyGetStatus","_UmbraSceneCreate","_UmbraSceneCreateLocal","_UmbraSceneCreatePublic","Pa","_UmbraSceneDestroy","_UmbraSceneGetConnectionStatus","_UmbraSceneGetInfo","_UmbraSceneSetTransform","_UmbraSetAllocator","_UmbraSetHttp","_UmbraSetLogger","_UmbraTextureGetMipmapLevelByteSize","_UmbraTextureGetMipmapLevelOffset","_UmbraTextureLoadGetData","_UmbraTextureLoadGetInfo","_a","_UmbraTextureLoadGetSerializedSize","_UmbraTextureLoadSerialize","_UmbraTextureMetaDataGetClassification","_UmbraTextureMetaDataGetClassificationAmount","_UmbraTextureMetaDataGetClassificationCount","_UmbraTextureMetaDataLoadGetData","_UmbraVertexAttributeGetElementByteSize","_UmbraViewCreate","_UmbraViewDestroy","_UmbraViewGetCompleted","_UmbraViewNextRenderables","_UmbraViewRayQuery","_UmbraViewResetRenderables","_UmbraViewUpdateFilter","_UmbraViewUpdateRendering","___embind_register_native_and_builtin_types","___getTypeName","__get_daylight","__get_timezone","__get_tzname","_free","_malloc","globalCtors","stackAlloc","stackRestore","stackSave","dynCall_i","dynCall_ii","dynCall_iii","dynCall_iiii","dynCall_iiiii","dynCall_iiiiii","dynCall_iiiiiiiiii","dynCall_iiiji","dynCall_jiji","dynCall_vii","Mc","calledRun","onRuntimeInitialized","onAbort","dynCall_viiiii","Jb","dynCall_viiiiii","dynCall_viiiiiiiii","cwrap","every","Lc","run","preInit","Set","wgetRequests","Assets","freeze","arrayToHeap","Map","assertInteger","isInteger","Module","Buffer","[object Object]","ofs","BYTES_PER_ELEMENT","newSize","destroy","BufferView","start","heapName","renderableStructOffsets","getRenderableMemberOffsets","copyMat4","buf","elements","Client","ptr","configPtr","CONFIG_SIZE","configInit","clientCreate","clientDestroy","NativeScene","matrixBuffer","infoBuffer","sceneInfoSize","sceneDestroy","sceneGetConnectionStatus","sceneGetInfo","deserializeSceneInfo","connectionStatus","Connected","matrix","floats","sceneSetTransform","View","runtimeAssets","vectorBuffer","lightBuffer","temp","MAX_LIGHTS","viewDestroy","worldToClip","positionVector","quality","lights","depthRange","MinusOneToOne","matrixFormat","ColumnMajor","viewUpdateRendering","batchSize","bufferSize","renderableSize","strideInWords","bufferWordSize","getView","arrayType","heap","meshIDs","lodLevels","masks","scenePointers","count","viewNextRenderables","output","id","lod","mask","scenePtr","mesh","AssetLoad","assetType","assetLoadGetType","userPtr","assetLoadPrepare","assetLoadFinish","AssetUnload","assetUnloadGetType","assetUnloadFinish","userPointer","assetUnloadGetUserPointer","vertexBufferMap","Loader","load","info","vertexBuffers","meshLoadGetInfo","meshInfoBuffer","deserializeMeshInfo","buffers","structBuffer","bytes","fill","tempDataBuffer","serializeElementBuffer","position","desc","index","uv","elementBufferSize","normal","tangent","meshStreamSetBuffers","meshStreamNext","meshStreamDone","_this","indexBytes","numUniqueVertices","attrInfo","elemSize","vertexAttributeGetElementByteSize","Position","TextureCoordinate","Normal","Tangent","numIndices","bufferSizes","keys","byteSize","meshBuffers","attributes","getBufferForAttribute","elementByteSize","elementCapacity","elementStride","flags","Count","meshInfoSize","Runtime","client","platformFeatures","runtimeFlags","assets","nextId","loader","tempTextureBuffer","tempTranscodedBuffer","tempStreamingStateBuffer","streamingStateSize","scratch","debug","normalFormats","ETC1","ASTC","PVRTC1","BC5","textureSupportMask","BC4","infoPtr","serializeEnvironmentInfo","textureSupportFlags","localCacheDirectory","localCacheMaximumByteSize","runtimeCreate","materialInfoSize","textureInfoSize","byteBufferSize","textureFormatsInUse","runtimeDestroy","publicKey","sceneCreatePublic","url","sceneCreateLocal","viewPtr","viewCreate","runtimeUpdate","runtimeNextAssetUnload","unload","_this2","done","loadNext","job","material","bounds","mn","mx","loadPtr","runtimeNextAssetLoad","materialLoadGetInfo","deserializeMaterialInfo","textureObjects","textures","filter","INVALID_USERPOINTER","transparent","textureLoadGetInfo","texture","deserializeTextureInfo","textureGetMipmapLevelByteSize","textureGetMipmapLevelOffset","ensureSize","dataByteSize","serializeByteBuffer","textureLoadGetData","bufferView","formatNeedsTranscoding","format","_formatToArrayType","downsampleAndTranscodeTexture","formatToArrayType","RGBA32","RGB565","RG8","RG16F","allocateBuffers","setBuffers","handlers","timeLimit","startTime","getAssetUnloads","getAssetLoads","finish","Failure","asset","BC1","BC3","outputBuffer","newFormat","getUncompressedFromBCFormat","halfFloat","outputSize","getTextureByteSize","success","info2","assign","mipByteSizes","runtimeGetStreamingState","deserializeStreamingState","state","getStreamingState","numResidentTiles","numResidentTilesLoaded","createRuntime","features","initUmbra","config","wasmURL","resolve","reject","path","prefix","endsWith","what","getLibraryInfo","environmentInfoDefaults","sceneCreate","viewUpdateFilter","viewGetCompleted","viewResetRenderables","viewRayQuery","sceneCopyCreate","sceneCopyGetStatus","sceneCopyGetError","sceneCopyDestroy","assetLoadAbortRequested","meshLoadFinishExternal","meshLoadGetData","meshLoadGetSerializedSize","textureLoadGetSerializedSize","textureMetaDataLoadGetData","textureMetaDataGetClassificationCount","textureMetaDataGetClassification","textureMetaDataGetClassificationAmount","wrapNativeFunctions","lib","getPlatformFeatures","gl","formats","supportsSRGB","supportsHalfFloat","extStrings","extNames","allExtensions","getSupportedExtensions","full","shortened","mapping","BC2","names","includes","getExtension","srgb","nativeModule","getStreamingInfo","version","Version","copyright","Copyright","buildTime","BuildTime","buildID","BuildId","abortDownloads","values","req","makeFormat","compressed","ThreeFormats","RGB24","THREE","ETC1_RGB","ASTC_4X4","PVRTC1_RGB4","ShaderPatcher","flipTangent","defines","process","shader","renderer","frag","fragmentShader","ObjectPool","usedList","freeList","allocate","makeFunc","predicate","elem","splice","freeAll","clearFunc","clear","UmbraScene","runtime","scene","sharedState","onDispose","wireframe","onConnected","onConnectionError","onDisconnected","onConnectionChanged","onMeshChanged","isLOD","autoUpdate","materialPool","shaderPatcher","stats","numVisible","numShadowCasters","numCachedMaterials","numAssets","diagnostics","missingNormals","checked","deprecatedMaterial","report","field","umbra","oldState","visibleIDs","update","camera","view","cameraToView","createView","viewLastUseFrame","render","frame","nativeScene","setTransform","matrixWorld","isPBREnabled","flip","determinant","newChildren","children","isUmbraMesh","shadowCasters","proxy","cam","mat","normalMap","metalnessMap","roughnessMap","visible","viewRenderables","materialDesc","geometry","isTransparent","clone","opacity","onBeforeCompile","diffuseMap","Diffuse","metalglossMap","Specular","isTexture","vertexTangents","normalMapType","metalness","roughness","copy","castShadow","receiveShadow","frustumCulled","updateStreamingEvents","scale","getInfo","connected","isConnected","getBounds","getCenter","applyMatrix4","center","updateNetworkEvents","ConnectionError","Connecting","dispose","Umbra","manager","onLoad","onProgress","onError","model","createScene","err","UmbrajsThreeInternal","textureMemoryUsed","meshMemoryUsed","umbrajs","context","memoryLimit","downloadLimit","qualityFactor","onStreamingUpdate","onStreamingComplete","updateTask","assetSizes","lastQualityLowerFrame","umbraScenes","progress","downloadLimitReached","tempVector","dirVector","matrixWorldInverse","projScreenMatrix","cameraWorldPosition","LoadMaterial","prepare","addAsset","Success","UnloadMaterial","removeAsset","LoadTexture","glformat","canFitInMemory","OutOfMemory","adjustQuality","tex","makeTexture","gammaOutput","encoding","colorSpace","Linear","needsUpdate","UnloadTexture","LoadMesh","attribs","components","totalSize","aabb","pos","indexArray","getArray","indices","setIndex","boundingSphere","attrib","meshDescriptor","UnloadMesh","meshDesc","startEventUpdate","interval","stopEventUpdate","setInterval","updateEvents","clearInterval","findLights","umbraScene","parentScene","traverseAncestors","isScene","traverseVisible","pruneOldViews","updateViews","shared","shadowMap","enabled","light","dir","vector3","lightDirections","setFromMatrixPosition","sub","threeCamera","getInverse","multiplyMatrices","projectionMatrix","umbraStreamingPosition","getWorldPosition","umbraQuality","setCamera","list","getVisible","timeBudget","getStats","updateTook","loadAssets","memoryUsed","link","project","createScenePublic","_this3","createSceneWithURL","createSceneLocal","_this4","factor","pixelData","mip","magFilter","minFilter","anisotropy","getStreamingProgress","privateUmbra","deinitUmbra","initWithThreeJS","userConfig"],"mappings":"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"}