{"version":3,"file":"umbrajs-three.esm.min.js","sources":["../node_modules/@umbra3d/umbrajs/dist/umbra.esm.js","../src/ThreeFormats.ts","../src/ShaderPatcher.ts","../src/ObjectPool.ts","../src/Model.ts","../src/index.ts"],"sourcesContent":["function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar UmbraNativeAPI = function () {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n\n  return function (UmbraNativeAPI) {\n    UmbraNativeAPI = UmbraNativeAPI || {};\n    var e;\n    e || (e = typeof UmbraNativeAPI !== 'undefined' ? UmbraNativeAPI : {});\n    var aa = {},\n        m;\n\n    for (m in e) {\n      e.hasOwnProperty(m) && (aa[m] = e[m]);\n    }\n\n    e.arguments = [];\n    e.thisProgram = \"./this.program\";\n\n    e.quit = function (a, b) {\n      throw b;\n    };\n\n    e.preRun = [];\n    e.postRun = [];\n    var q = \"\";\n    document.currentScript && (q = document.currentScript.src);\n    _scriptDir && (q = _scriptDir);\n    0 !== q.indexOf(\"blob:\") ? q = q.substr(0, q.lastIndexOf(\"/\") + 1) : q = \"\";\n    var ba = e.print || (\"undefined\" !== typeof console ? console.log.bind(console) : \"undefined\" !== typeof print ? print : null),\n        v = e.printErr || (\"undefined\" !== typeof printErr ? printErr : \"undefined\" !== typeof console && console.warn.bind(console) || ba);\n\n    for (m in aa) {\n      aa.hasOwnProperty(m) && (e[m] = aa[m]);\n    }\n\n    aa = void 0;\n\n    function ca(a) {\n      var b = x[da >> 2];\n      a = b + a + 15 & -16;\n      a > fa() && _y();\n      x[da >> 2] = a;\n      return b;\n    }\n\n    function ha(a) {\n      ia || (ia = {});\n      ia[a] || (ia[a] = 1, v(a));\n    }\n\n    var ia,\n        ja = {\n      \"f64-rem\": function f64Rem(a, b) {\n        return a % b;\n      },\n      \"debugger\": function _debugger() {\n        debugger;\n      }\n    };\n    \"object\" !== (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) && v(\"no native wasm support detected\");\n    var z,\n        A = !1;\n\n    function ka(a, b) {\n      a || _y(\"Assertion failed: \" + b);\n    }\n\n    function la(a) {\n      if (\"number\" === typeof a) {\n        var b = !0;\n        var c = a;\n      } else b = !1, c = a.length;\n\n      var d = B(Math.max(c, 1));\n\n      if (b) {\n        a = d;\n        ka(0 == (d & 3));\n\n        for (b = d + (c & -4); a < b; a += 4) {\n          x[a >> 2] = 0;\n        }\n\n        for (b = d + c; a < b;) {\n          C[a++ >> 0] = 0;\n        }\n\n        return d;\n      }\n\n      a.subarray || a.slice ? D.set(a, d) : D.set(new Uint8Array(a), d);\n      return d;\n    }\n\n    var ma = \"undefined\" !== typeof TextDecoder ? new TextDecoder(\"utf8\") : void 0;\n\n    function na(a, b, c) {\n      var d = b + c;\n\n      for (c = b; a[c] && !(c >= d);) {\n        ++c;\n      }\n\n      if (16 < c - b && a.subarray && ma) return ma.decode(a.subarray(b, c));\n\n      for (d = \"\"; b < c;) {\n        var f = a[b++];\n\n        if (f & 128) {\n          var g = a[b++] & 63;\n          if (192 == (f & 224)) d += String.fromCharCode((f & 31) << 6 | g);else {\n            var k = a[b++] & 63;\n            f = 224 == (f & 240) ? (f & 15) << 12 | g << 6 | k : (f & 7) << 18 | g << 12 | k << 6 | a[b++] & 63;\n            65536 > f ? d += String.fromCharCode(f) : (f -= 65536, d += String.fromCharCode(55296 | f >> 10, 56320 | f & 1023));\n          }\n        } else d += String.fromCharCode(f);\n      }\n\n      return d;\n    }\n\n    function E(a) {\n      return a ? na(D, a, void 0) : \"\";\n    }\n\n    function oa(a, b, c, d) {\n      if (0 < d) {\n        d = c + d - 1;\n\n        for (var f = 0; f < a.length; ++f) {\n          var g = a.charCodeAt(f);\n\n          if (55296 <= g && 57343 >= g) {\n            var k = a.charCodeAt(++f);\n            g = 65536 + ((g & 1023) << 10) | k & 1023;\n          }\n\n          if (127 >= g) {\n            if (c >= d) break;\n            b[c++] = g;\n          } else {\n            if (2047 >= g) {\n              if (c + 1 >= d) break;\n              b[c++] = 192 | g >> 6;\n            } else {\n              if (65535 >= g) {\n                if (c + 2 >= d) break;\n                b[c++] = 224 | g >> 12;\n              } else {\n                if (c + 3 >= d) break;\n                b[c++] = 240 | g >> 18;\n                b[c++] = 128 | g >> 12 & 63;\n              }\n\n              b[c++] = 128 | g >> 6 & 63;\n            }\n\n            b[c++] = 128 | g & 63;\n          }\n        }\n\n        b[c] = 0;\n      }\n    }\n\n    function pa(a) {\n      for (var b = 0, c = 0; c < a.length; ++c) {\n        var d = a.charCodeAt(c);\n        55296 <= d && 57343 >= d && (d = 65536 + ((d & 1023) << 10) | a.charCodeAt(++c) & 1023);\n        127 >= d ? ++b : b = 2047 >= d ? b + 2 : 65535 >= d ? b + 3 : b + 4;\n      }\n\n      return b;\n    }\n\n    \"undefined\" !== typeof TextDecoder && new TextDecoder(\"utf-16le\");\n\n    function qa(a) {\n      0 < a % 65536 && (a += 65536 - a % 65536);\n      return a;\n    }\n\n    var F, C, D, ra, sa, x, G, ta, ua;\n\n    function va() {\n      e.HEAP8 = C = new Int8Array(F);\n      e.HEAP16 = ra = new Int16Array(F);\n      e.HEAP32 = x = new Int32Array(F);\n      e.HEAPU8 = D = new Uint8Array(F);\n      e.HEAPU16 = sa = new Uint16Array(F);\n      e.HEAPU32 = G = new Uint32Array(F);\n      e.HEAPF32 = ta = new Float32Array(F);\n      e.HEAPF64 = ua = new Float64Array(F);\n    }\n\n    var da = 18576,\n        wa = e.TOTAL_MEMORY || 134217728;\n    5242880 > wa && v(\"TOTAL_MEMORY should be larger than TOTAL_STACK, was \" + wa + \"! (TOTAL_STACK=5242880)\");\n    e.wasmMemory ? z = e.wasmMemory : z = new WebAssembly.Memory({\n      initial: wa / 65536\n    });\n    z && (F = z.buffer);\n    wa = F.byteLength;\n    va();\n    x[da >> 2] = 5261488;\n\n    function xa(a) {\n      for (; 0 < a.length;) {\n        var b = a.shift();\n        if (\"function\" == typeof b) b();else {\n          var c = b.eb;\n          \"number\" === typeof c ? void 0 === b.Wa ? e.dynCall_v(c) : e.dynCall_vi(c, b.Wa) : c(void 0 === b.Wa ? null : b.Wa);\n        }\n      }\n    }\n\n    var ya = [],\n        za = [],\n        Aa = [],\n        Ba = [],\n        Ca = [],\n        Da = !1;\n\n    function Ea() {\n      var a = e.preRun.shift();\n      ya.unshift(a);\n    }\n\n    var H = 0,\n        Fa = null,\n        Ga = null;\n    e.preloadedImages = {};\n    e.preloadedAudios = {};\n\n    function Ha() {\n      var a = I;\n      return String.prototype.startsWith ? a.startsWith(\"data:application/octet-stream;base64,\") : 0 === a.indexOf(\"data:application/octet-stream;base64,\");\n    }\n\n    var I = \"umbra.wasm\";\n\n    if (!Ha()) {\n      var Ia = I;\n      I = e.locateFile ? e.locateFile(Ia, q) : q + Ia;\n    }\n\n    function Ja() {\n      try {\n        if (e.wasmBinary) return new Uint8Array(e.wasmBinary);\n        throw \"both async and sync fetching of the wasm failed\";\n      } catch (a) {\n        _y(a);\n      }\n    }\n\n    function Ka() {\n      return e.wasmBinary || \"function\" !== typeof fetch ? new Promise(function (a) {\n        a(Ja());\n      }) : fetch(I, {\n        credentials: \"same-origin\"\n      }).then(function (a) {\n        if (!a.ok) throw \"failed to load wasm binary file at '\" + I + \"'\";\n        return a.arrayBuffer();\n      })[\"catch\"](function () {\n        return Ja();\n      });\n    }\n\n    function La(a) {\n      function b(a) {\n        e.asm = a.exports;\n        H--;\n        e.monitorRunDependencies && e.monitorRunDependencies(H);\n        0 == H && (null !== Fa && (clearInterval(Fa), Fa = null), Ga && (a = Ga, Ga = null, a()));\n      }\n\n      function c(a) {\n        b(a.instance);\n      }\n\n      function d(a) {\n        return Ka().then(function (a) {\n          return WebAssembly.instantiate(a, f);\n        }).then(a, function (a) {\n          v(\"failed to asynchronously prepare wasm: \" + a);\n\n          _y(a);\n        });\n      }\n\n      var f = {\n        env: a,\n        global: {\n          NaN: NaN,\n          Infinity: Infinity\n        },\n        \"global.Math\": Math,\n        asm2wasm: ja\n      };\n      H++;\n      e.monitorRunDependencies && e.monitorRunDependencies(H);\n      if (e.instantiateWasm) try {\n        return e.instantiateWasm(f, b);\n      } catch (g) {\n        return v(\"Module.instantiateWasm callback failed with error: \" + g), !1;\n      }\n\n      (function () {\n        if (e.wasmBinary || \"function\" !== typeof WebAssembly.instantiateStreaming || Ha() || \"function\" !== typeof fetch) return d(c);\n        fetch(I, {\n          credentials: \"same-origin\"\n        }).then(function (a) {\n          return WebAssembly.instantiateStreaming(a, f).then(c, function (a) {\n            v(\"wasm streaming compile failed: \" + a);\n            v(\"falling back to ArrayBuffer instantiation\");\n            d(c);\n          });\n        });\n      })();\n\n      return {};\n    }\n\n    e.asm = function (a, b) {\n      b.memory = z;\n      b.table = new WebAssembly.Table({\n        initial: 543,\n        maximum: 543,\n        element: \"anyfunc\"\n      });\n      b.__memory_base = 1024;\n      b.__table_base = 0;\n      return La(b);\n    };\n\n    var Na = [function () {\n      alert(\"Invalid http method.\");\n    }, function (a, b, c, d, f, g, k, h, l, n, p) {\n      return Ma(a, b, c, d, f, g, k, h, l, n, p);\n    }, function () {\n      alert(\"Uploads are not supported.\");\n    }];\n    za.push({\n      eb: function eb() {\n        Oa();\n      }\n    });\n    var J = {};\n\n    function Pa(a) {\n      if (Pa.pb) {\n        var b = x[a >> 2];\n        var c = x[b >> 2];\n      } else Pa.pb = !0, J.USER = J.LOGNAME = \"web_user\", J.PATH = \"/\", J.PWD = \"/\", J.HOME = \"/home/web_user\", J.LANG = \"C.UTF-8\", J.LANG = (\"object\" === (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) && navigator.languages && navigator.languages[0] || \"C\").replace(\"-\", \"_\") + \".UTF-8\", J._ = e.thisProgram, c = Da ? B(1024) : ca(1024), b = Da ? B(256) : ca(256), x[b >> 2] = c, x[a >> 2] = b;\n\n      a = [];\n      var d = 0,\n          f;\n\n      for (f in J) {\n        if (\"string\" === typeof J[f]) {\n          var g = f + \"=\" + J[f];\n          a.push(g);\n          d += g.length;\n        }\n      }\n\n      if (1024 < d) throw Error(\"Environment size exceeded TOTAL_ENV_SIZE!\");\n\n      for (f = 0; f < a.length; f++) {\n        d = g = a[f];\n\n        for (var k = c, h = 0; h < d.length; ++h) {\n          C[k++ >> 0] = d.charCodeAt(h);\n        }\n\n        C[k >> 0] = 0;\n        x[b + 4 * f >> 2] = c;\n        c += g.length + 1;\n      }\n\n      x[b + 4 * a.length >> 2] = 0;\n    }\n\n    function Qa(a, b) {\n      Ba.unshift({\n        eb: a,\n        Wa: b\n      });\n    }\n\n    var Sa = [null, [], []];\n\n    function Ta(a, b) {\n      var c = Sa[a];\n      0 === b || 10 === b ? ((1 === a ? ba : v)(na(c, 0)), c.length = 0) : c.push(b);\n    }\n\n    var _K = 0;\n\n    function L() {\n      _K += 4;\n      return x[_K - 4 >> 2];\n    }\n\n    var Ua = {},\n        Va = {};\n\n    function Wa(a) {\n      for (; a.length;) {\n        var b = a.pop();\n        a.pop()(b);\n      }\n    }\n\n    function Xa(a) {\n      return this.fromWireType(G[a >> 2]);\n    }\n\n    var M = {},\n        N = {},\n        Ya = {};\n\n    function Za(a) {\n      if (void 0 === a) return \"_unknown\";\n      a = a.replace(/[^a-zA-Z0-9_]/g, \"$\");\n      var b = a.charCodeAt(0);\n      return 48 <= b && 57 >= b ? \"_\" + a : a;\n    }\n\n    function $a(a, b) {\n      a = Za(a);\n      return new Function(\"body\", \"return function \" + a + '() {\\n    \"use strict\";    return body.apply(this, arguments);\\n};\\n')(b);\n    }\n\n    function ab(a) {\n      var b = Error,\n          c = $a(a, function (b) {\n        this.name = a;\n        this.message = b;\n        b = Error(b).stack;\n        void 0 !== b && (this.stack = this.toString() + \"\\n\" + b.replace(/^Error(:[^\\n]*)?\\n/, \"\"));\n      });\n      c.prototype = Object.create(b.prototype);\n      c.prototype.constructor = c;\n\n      c.prototype.toString = function () {\n        return void 0 === this.message ? this.name : this.name + \": \" + this.message;\n      };\n\n      return c;\n    }\n\n    var bb = void 0;\n\n    function cb(a) {\n      throw new bb(a);\n    }\n\n    function db(a, b, c) {\n      function d(b) {\n        b = c(b);\n        b.length !== a.length && cb(\"Mismatched type converter count\");\n\n        for (var d = 0; d < a.length; ++d) {\n          O(a[d], b[d]);\n        }\n      }\n\n      a.forEach(function (a) {\n        Ya[a] = b;\n      });\n      var f = Array(b.length),\n          g = [],\n          k = 0;\n      b.forEach(function (a, b) {\n        N.hasOwnProperty(a) ? f[b] = N[a] : (g.push(a), M.hasOwnProperty(a) || (M[a] = []), M[a].push(function () {\n          f[b] = N[a];\n          ++k;\n          k === g.length && d(f);\n        }));\n      });\n      0 === g.length && d(f);\n    }\n\n    function eb(a) {\n      switch (a) {\n        case 1:\n          return 0;\n\n        case 2:\n          return 1;\n\n        case 4:\n          return 2;\n\n        case 8:\n          return 3;\n\n        default:\n          throw new TypeError(\"Unknown type size: \" + a);\n      }\n    }\n\n    var fb = void 0;\n\n    function P(a) {\n      for (var b = \"\"; D[a];) {\n        b += fb[D[a++]];\n      }\n\n      return b;\n    }\n\n    var gb = void 0;\n\n    function Q(a) {\n      throw new gb(a);\n    }\n\n    function O(a, b, c) {\n      c = c || {};\n      if (!(\"argPackAdvance\" in b)) throw new TypeError(\"registerType registeredInstance requires argPackAdvance\");\n      var d = b.name;\n      a || Q('type \"' + d + '\" must have a positive integer typeid pointer');\n\n      if (N.hasOwnProperty(a)) {\n        if (c.zb) return;\n        Q(\"Cannot register type '\" + d + \"' twice\");\n      }\n\n      N[a] = b;\n      delete Ya[a];\n      M.hasOwnProperty(a) && (b = M[a], delete M[a], b.forEach(function (a) {\n        a();\n      }));\n    }\n\n    function hb(a) {\n      return {\n        count: a.count,\n        Va: a.Va,\n        Za: a.Za,\n        Ma: a.Ma,\n        Oa: a.Oa,\n        Pa: a.Pa,\n        Ra: a.Ra\n      };\n    }\n\n    function ib(a) {\n      Q(a.La.Oa.Na.name + \" instance already deleted\");\n    }\n\n    var jb = !1;\n\n    function kb() {}\n\n    function lb(a) {\n      --a.count.value;\n      0 === a.count.value && (a.Pa ? a.Ra.Ua(a.Pa) : a.Oa.Na.Ua(a.Ma));\n    }\n\n    function mb(a) {\n      if (\"undefined\" === typeof FinalizationGroup) return mb = function mb(a) {\n        return a;\n      }, a;\n      jb = new FinalizationGroup(function (a) {\n        for (var b = a.next(); !b.done; b = a.next()) {\n          b = b.value, b.Ma ? lb(b) : console.warn(\"object already deleted: \" + b.Ma);\n        }\n      });\n\n      mb = function mb(a) {\n        jb.register(a, a.La, a.La);\n        return a;\n      };\n\n      kb = function kb(a) {\n        jb.unregister(a.La);\n      };\n\n      return mb(a);\n    }\n\n    var nb = void 0,\n        ob = [];\n\n    function pb() {\n      for (; ob.length;) {\n        var a = ob.pop();\n        a.La.Va = !1;\n        a[\"delete\"]();\n      }\n    }\n\n    function R() {}\n\n    var qb = {};\n\n    function rb(a, b) {\n      var c = e;\n\n      if (void 0 === c[a].Ta) {\n        var d = c[a];\n\n        c[a] = function () {\n          c[a].Ta.hasOwnProperty(arguments.length) || Q(\"Function '\" + b + \"' called with an invalid number of arguments (\" + arguments.length + \") - expects one of (\" + c[a].Ta + \")!\");\n          return c[a].Ta[arguments.length].apply(this, arguments);\n        };\n\n        c[a].Ta = [];\n        c[a].Ta[d.ob] = d;\n      }\n    }\n\n    function sb(a, b, c) {\n      e.hasOwnProperty(a) ? ((void 0 === c || void 0 !== e[a].Ta && void 0 !== e[a].Ta[c]) && Q(\"Cannot register public name '\" + a + \"' twice\"), rb(a, a), e.hasOwnProperty(c) && Q(\"Cannot register multiple overloads of a function with the same number of arguments (\" + c + \")!\"), e[a].Ta[c] = b) : (e[a] = b, void 0 !== c && (e[a].Tb = c));\n    }\n\n    function tb(a, b, c, d, f, g, k, h) {\n      this.name = a;\n      this.constructor = b;\n      this.Ya = c;\n      this.Ua = d;\n      this.Sa = f;\n      this.tb = g;\n      this.$a = k;\n      this.rb = h;\n    }\n\n    function ub(a, b, c) {\n      for (; b !== c;) {\n        b.$a || Q(\"Expected null or instance of \" + c.name + \", got an instance of \" + b.name), a = b.$a(a), b = b.Sa;\n      }\n\n      return a;\n    }\n\n    function vb(a, b) {\n      if (null === b) return this.fb && Q(\"null is not a valid \" + this.name), 0;\n      b.La || Q('Cannot pass \"' + S(b) + '\" as a ' + this.name);\n      b.La.Ma || Q(\"Cannot pass deleted object as a pointer of type \" + this.name);\n      return ub(b.La.Ma, b.La.Oa.Na, this.Na);\n    }\n\n    function wb(a, b) {\n      if (null === b) {\n        this.fb && Q(\"null is not a valid \" + this.name);\n\n        if (this.bb) {\n          var c = this.gb();\n          null !== a && a.push(this.Ua, c);\n          return c;\n        }\n\n        return 0;\n      }\n\n      b.La || Q('Cannot pass \"' + S(b) + '\" as a ' + this.name);\n      b.La.Ma || Q(\"Cannot pass deleted object as a pointer of type \" + this.name);\n      !this.ab && b.La.Oa.ab && Q(\"Cannot convert argument of type \" + (b.La.Ra ? b.La.Ra.name : b.La.Oa.name) + \" to parameter type \" + this.name);\n      c = ub(b.La.Ma, b.La.Oa.Na, this.Na);\n      if (this.bb) switch (void 0 === b.La.Pa && Q(\"Passing raw pointer to smart pointer is illegal\"), this.Hb) {\n        case 0:\n          b.La.Ra === this ? c = b.La.Pa : Q(\"Cannot convert argument of type \" + (b.La.Ra ? b.La.Ra.name : b.La.Oa.name) + \" to parameter type \" + this.name);\n          break;\n\n        case 1:\n          c = b.La.Pa;\n          break;\n\n        case 2:\n          if (b.La.Ra === this) c = b.La.Pa;else {\n            var d = b.clone();\n            c = this.Db(c, T(function () {\n              d[\"delete\"]();\n            }));\n            null !== a && a.push(this.Ua, c);\n          }\n          break;\n\n        default:\n          Q(\"Unsupporting sharing policy\");\n      }\n      return c;\n    }\n\n    function xb(a, b) {\n      if (null === b) return this.fb && Q(\"null is not a valid \" + this.name), 0;\n      b.La || Q('Cannot pass \"' + S(b) + '\" as a ' + this.name);\n      b.La.Ma || Q(\"Cannot pass deleted object as a pointer of type \" + this.name);\n      b.La.Oa.ab && Q(\"Cannot convert argument of type \" + b.La.Oa.name + \" to parameter type \" + this.name);\n      return ub(b.La.Ma, b.La.Oa.Na, this.Na);\n    }\n\n    function yb(a, b, c) {\n      if (b === c) return a;\n      if (void 0 === c.Sa) return null;\n      a = yb(a, b, c.Sa);\n      return null === a ? null : c.rb(a);\n    }\n\n    var zb = {};\n\n    function Ab(a, b) {\n      for (void 0 === b && Q(\"ptr should not be undefined\"); a.Sa;) {\n        b = a.$a(b), a = a.Sa;\n      }\n\n      return zb[b];\n    }\n\n    function Bb(a, b) {\n      b.Oa && b.Ma || cb(\"makeClassHandle requires ptr and ptrType\");\n      !!b.Ra !== !!b.Pa && cb(\"Both smartPtrType and smartPtr must be specified\");\n      b.count = {\n        value: 1\n      };\n      return mb(Object.create(a, {\n        La: {\n          value: b\n        }\n      }));\n    }\n\n    function U(a, b, c, d) {\n      this.name = a;\n      this.Na = b;\n      this.fb = c;\n      this.ab = d;\n      this.bb = !1;\n      this.Ua = this.Db = this.gb = this.nb = this.Hb = this.Bb = void 0;\n      void 0 !== b.Sa ? this.toWireType = wb : (this.toWireType = d ? vb : xb, this.Qa = null);\n    }\n\n    function Cb(a, b, c) {\n      e.hasOwnProperty(a) || cb(\"Replacing nonexistant public symbol\");\n      void 0 !== e[a].Ta && void 0 !== c ? e[a].Ta[c] = b : (e[a] = b, e[a].ob = c);\n    }\n\n    function W(a, b) {\n      a = P(a);\n      if (void 0 !== e[\"FUNCTION_TABLE_\" + a]) var c = e[\"FUNCTION_TABLE_\" + a][b];else if (\"undefined\" !== typeof FUNCTION_TABLE) c = FUNCTION_TABLE[b];else {\n        c = e[\"dynCall_\" + a];\n        void 0 === c && (c = e[\"dynCall_\" + a.replace(/f/g, \"d\")], void 0 === c && Q(\"No dynCall invoker for signature: \" + a));\n\n        for (var d = [], f = 1; f < a.length; ++f) {\n          d.push(\"a\" + f);\n        }\n\n        f = \"return function \" + (\"dynCall_\" + a + \"_\" + b) + \"(\" + d.join(\", \") + \") {\\n\";\n        f += \"    return dynCall(rawFunction\" + (d.length ? \", \" : \"\") + d.join(\", \") + \");\\n\";\n        c = new Function(\"dynCall\", \"rawFunction\", f + \"};\\n\")(c, b);\n      }\n      \"function\" !== typeof c && Q(\"unknown function pointer with signature \" + a + \": \" + b);\n      return c;\n    }\n\n    var Db = void 0;\n\n    function Eb(a) {\n      a = Fb(a);\n      var b = P(a);\n      X(a);\n      return b;\n    }\n\n    function Gb(a, b) {\n      function c(a) {\n        f[a] || N[a] || (Ya[a] ? Ya[a].forEach(c) : (d.push(a), f[a] = !0));\n      }\n\n      var d = [],\n          f = {};\n      b.forEach(c);\n      throw new Db(a + \": \" + d.map(Eb).join([\", \"]));\n    }\n\n    var Hb = [],\n        Y = [{}, {\n      value: void 0\n    }, {\n      value: null\n    }, {\n      value: !0\n    }, {\n      value: !1\n    }];\n\n    function Ib(a) {\n      4 < a && 0 === --Y[a].hb && (Y[a] = void 0, Hb.push(a));\n    }\n\n    function T(a) {\n      switch (a) {\n        case void 0:\n          return 1;\n\n        case null:\n          return 2;\n\n        case !0:\n          return 3;\n\n        case !1:\n          return 4;\n\n        default:\n          var b = Hb.length ? Hb.pop() : Y.length;\n          Y[b] = {\n            hb: 1,\n            value: a\n          };\n          return b;\n      }\n    }\n\n    function Jb(a, b, c) {\n      switch (b) {\n        case 0:\n          return function (a) {\n            return this.fromWireType((c ? C : D)[a]);\n          };\n\n        case 1:\n          return function (a) {\n            return this.fromWireType((c ? ra : sa)[a >> 1]);\n          };\n\n        case 2:\n          return function (a) {\n            return this.fromWireType((c ? x : G)[a >> 2]);\n          };\n\n        default:\n          throw new TypeError(\"Unknown integer type: \" + a);\n      }\n    }\n\n    function Kb(a, b) {\n      var c = N[a];\n      void 0 === c && Q(b + \" has unknown type \" + Eb(a));\n      return c;\n    }\n\n    function S(a) {\n      if (null === a) return \"null\";\n\n      var b = _typeof(a);\n\n      return \"object\" === b || \"array\" === b || \"function\" === b ? a.toString() : \"\" + a;\n    }\n\n    function Lb(a, b) {\n      switch (b) {\n        case 2:\n          return function (a) {\n            return this.fromWireType(ta[a >> 2]);\n          };\n\n        case 3:\n          return function (a) {\n            return this.fromWireType(ua[a >> 3]);\n          };\n\n        default:\n          throw new TypeError(\"Unknown float type: \" + a);\n      }\n    }\n\n    function Mb(a) {\n      var b = Function;\n      if (!(b instanceof Function)) throw new TypeError(\"new_ called with constructor type \" + _typeof(b) + \" which is not a function\");\n      var c = $a(b.name || \"unknownFunctionName\", function () {});\n      c.prototype = b.prototype;\n      c = new c();\n      a = b.apply(c, a);\n      return a instanceof Object ? a : c;\n    }\n\n    function Nb(a, b) {\n      for (var c = [], d = 0; d < a; d++) {\n        c.push(x[(b >> 2) + d]);\n      }\n\n      return c;\n    }\n\n    function Ob(a, b, c) {\n      switch (b) {\n        case 0:\n          return c ? function (a) {\n            return C[a];\n          } : function (a) {\n            return D[a];\n          };\n\n        case 1:\n          return c ? function (a) {\n            return ra[a >> 1];\n          } : function (a) {\n            return sa[a >> 1];\n          };\n\n        case 2:\n          return c ? function (a) {\n            return x[a >> 2];\n          } : function (a) {\n            return G[a >> 2];\n          };\n\n        default:\n          throw new TypeError(\"Unknown integer type: \" + a);\n      }\n    }\n\n    var Pb = {};\n\n    function Qb(a) {\n      var b = Pb[a];\n      return void 0 === b ? P(a) : b;\n    }\n\n    var Rb = [];\n\n    function Sb(a) {\n      a || Q(\"Cannot use deleted val. handle = \" + a);\n      return Y[a].value;\n    }\n\n    function Tb(a) {\n      var b = Rb.length;\n      Rb.push(a);\n      return b;\n    }\n\n    function Ub(a, b) {\n      for (var c = Array(a), d = 0; d < a; ++d) {\n        c[d] = Kb(x[(b >> 2) + d], \"parameter \" + d);\n      }\n\n      return c;\n    }\n\n    function Vb(a, b) {\n      Wb = a;\n      Xb = b;\n      if (Yb) if (0 == a) Z = function Z() {\n        var a = Math.max(0, Zb + b - $b()) | 0;\n        setTimeout(_ac, a);\n      }, bc = \"timeout\";else if (1 == a) Z = function Z() {\n        cc(_ac);\n      }, bc = \"rAF\";else if (2 == a) {\n        if (\"undefined\" === typeof setImmediate) {\n          var c = [];\n          addEventListener(\"message\", function (a) {\n            if (\"setimmediate\" === a.data || \"setimmediate\" === a.data.target) a.stopPropagation(), c.shift()();\n          }, !0);\n\n          setImmediate = function setImmediate(a) {\n            c.push(a);\n            postMessage(\"setimmediate\", \"*\");\n          };\n        }\n\n        Z = function Z() {\n          setImmediate(_ac);\n        };\n\n        bc = \"immediate\";\n      }\n    }\n\n    function $b() {\n      _y();\n    }\n\n    function dc(a) {\n      var b = ec;\n      e.noExitRuntime = !0;\n      ka(!Yb, \"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters.\");\n      Yb = a;\n      ec = b;\n      var c = \"undefined\" !== typeof b ? function () {\n        e.dynCall_vi(a, b);\n      } : function () {\n        e.dynCall_v(a);\n      };\n      var d = fc;\n\n      _ac = function ac() {\n        if (!A) if (0 < gc.length) {\n          var a = Date.now(),\n              b = gc.shift();\n          b.eb(b.Wa);\n\n          if (hc) {\n            var k = hc,\n                h = 0 == k % 1 ? k - 1 : Math.floor(k);\n            hc = b.Kb ? h : (8 * k + (h + .5)) / 9;\n          }\n\n          console.log('main loop blocker \"' + b.name + '\" took ' + (Date.now() - a) + \" ms\");\n          e.setStatus && (a = e.statusMessage || \"Please wait...\", b = hc, k = ic.Ob, b ? b < k ? e.setStatus(a + \" (\" + (k - b) + \"/\" + k + \")\") : e.setStatus(a) : e.setStatus(\"\"));\n          d < fc || setTimeout(_ac, 0);\n        } else if (!(d < fc)) if (jc = jc + 1 | 0, 1 == Wb && 1 < Xb && 0 != jc % Xb) Z();else {\n          0 == Wb && (Zb = $b());\n          \"timeout\" === bc && e.cb && (v(\"Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!\"), bc = \"\");\n\n          a: if (!(A || e.preMainLoop && !1 === e.preMainLoop())) {\n            try {\n              c();\n            } catch (l) {\n              if (l instanceof kc) break a;\n              l && \"object\" === _typeof(l) && l.stack && v(\"exception thrown: \" + [l, l.stack]);\n              throw l;\n            }\n\n            e.postMainLoop && e.postMainLoop();\n          }\n\n          d < fc || (\"object\" === (typeof SDL === \"undefined\" ? \"undefined\" : _typeof(SDL)) && SDL.audio && SDL.audio.Cb && SDL.audio.Cb(), Z());\n        }\n      };\n    }\n\n    var Z = null,\n        bc = \"\",\n        fc = 0,\n        Yb = null,\n        ec = 0,\n        Wb = 0,\n        Xb = 0,\n        jc = 0,\n        gc = [],\n        ic = {},\n        Zb,\n        _ac,\n        hc,\n        mc = !1,\n        nc = !1,\n        oc = [];\n\n    function pc() {\n      function a() {\n        nc = document.pointerLockElement === e.canvas || document.mozPointerLockElement === e.canvas || document.webkitPointerLockElement === e.canvas || document.msPointerLockElement === e.canvas;\n      }\n\n      e.preloadPlugins || (e.preloadPlugins = []);\n\n      if (!qc) {\n        qc = !0;\n\n        try {\n          rc = !0;\n        } catch (c) {\n          rc = !1, console.log(\"warning: no blob constructor, cannot create blobs with mimetypes\");\n        }\n\n        sc = \"undefined\" != typeof MozBlobBuilder ? MozBlobBuilder : \"undefined\" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : rc ? null : console.log(\"warning: no BlobBuilder\");\n        tc = \"undefined\" != typeof window ? window.URL ? window.URL : window.webkitURL : void 0;\n        e.mb || \"undefined\" !== typeof tc || (console.log(\"warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available.\"), e.mb = !0);\n        e.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !e.mb && /\\.(jpg|jpeg|png|bmp)$/i.test(a);\n          },\n          handle: function handle(a, b, f, g) {\n            var c = null;\n            if (rc) try {\n              c = new Blob([a], {\n                type: uc(b)\n              }), c.size !== a.length && (c = new Blob([new Uint8Array(a).buffer], {\n                type: uc(b)\n              }));\n            } catch (n) {\n              ha(\"Blob constructor present but fails: \" + n + \"; falling back to blob builder\");\n            }\n            c || (c = new sc(), c.append(new Uint8Array(a).buffer), c = c.getBlob());\n            var d = tc.createObjectURL(c),\n                l = new Image();\n\n            l.onload = function () {\n              ka(l.complete, \"Image \" + b + \" could not be decoded\");\n              var c = document.createElement(\"canvas\");\n              c.width = l.width;\n              c.height = l.height;\n              c.getContext(\"2d\").drawImage(l, 0, 0);\n              e.preloadedImages[b] = c;\n              tc.revokeObjectURL(d);\n              f && f(a);\n            };\n\n            l.onerror = function () {\n              console.log(\"Image \" + d + \" could not be decoded\");\n              g && g();\n            };\n\n            l.src = d;\n          }\n        });\n        e.preloadPlugins.push({\n          canHandle: function canHandle(a) {\n            return !e.Sb && a.substr(-4) in {\n              \".ogg\": 1,\n              \".wav\": 1,\n              \".mp3\": 1\n            };\n          },\n          handle: function handle(a, b, f, g) {\n            function c(c) {\n              l || (l = !0, e.preloadedAudios[b] = c, f && f(a));\n            }\n\n            function d() {\n              l || (l = !0, e.preloadedAudios[b] = new Audio(), g && g());\n            }\n\n            var l = !1;\n\n            if (rc) {\n              try {\n                var n = new Blob([a], {\n                  type: uc(b)\n                });\n              } catch (t) {\n                return d();\n              }\n\n              n = tc.createObjectURL(n);\n              var p = new Audio();\n              p.addEventListener(\"canplaythrough\", function () {\n                c(p);\n              }, !1);\n\n              p.onerror = function () {\n                if (!l) {\n                  console.log(\"warning: browser could not fully decode audio \" + b + \", trying slower base64 approach\");\n\n                  for (var d = \"\", f = 0, g = 0, h = 0; h < a.length; h++) {\n                    for (f = f << 8 | a[h], g += 8; 6 <= g;) {\n                      var k = f >> g - 6 & 63;\n                      g -= 6;\n                      d += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[k];\n                    }\n                  }\n\n                  2 == g ? (d += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 3) << 4], d += \"==\") : 4 == g && (d += \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(f & 15) << 2], d += \"=\");\n                  p.src = \"data:audio/x-\" + b.substr(-3) + \";base64,\" + d;\n                  c(p);\n                }\n              };\n\n              p.src = n;\n              vc(function () {\n                c(p);\n              });\n            } else return d();\n          }\n        });\n        var b = e.canvas;\n        b && (b.requestPointerLock = b.requestPointerLock || b.mozRequestPointerLock || b.webkitRequestPointerLock || b.msRequestPointerLock || function () {}, b.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || document.msExitPointerLock || function () {}, b.exitPointerLock = b.exitPointerLock.bind(document), document.addEventListener(\"pointerlockchange\", a, !1), document.addEventListener(\"mozpointerlockchange\", a, !1), document.addEventListener(\"webkitpointerlockchange\", a, !1), document.addEventListener(\"mspointerlockchange\", a, !1), e.elementPointerLock && b.addEventListener(\"click\", function (a) {\n          !nc && e.canvas.requestPointerLock && (e.canvas.requestPointerLock(), a.preventDefault());\n        }, !1));\n      }\n    }\n\n    function wc(a, b, c, d) {\n      if (b && e.cb && a == e.canvas) return e.cb;\n      var f;\n\n      if (b) {\n        var g = {\n          antialias: !1,\n          alpha: !1,\n          Qb: 1\n        };\n        if (d) for (var k in d) {\n          g[k] = d[k];\n        }\n        if (\"undefined\" !== typeof GL && (f = GL.Lb(a, g))) var h = GL.getContext(f).Jb;\n      } else h = a.getContext(\"2d\");\n\n      if (!h) return null;\n      c && (b || ka(\"undefined\" === typeof GLctx, \"cannot set in module if GLctx is used, but we are a non-GL context that would replace it\"), e.cb = h, b && GL.Rb(f), e.Ub = b, oc.forEach(function (a) {\n        a();\n      }), pc());\n      return h;\n    }\n\n    var xc = !1,\n        yc = void 0,\n        zc = void 0;\n\n    function Ac(a, b, c) {\n      function d() {\n        mc = !1;\n        var a = f.parentNode;\n        (document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a ? (f.exitFullscreen = Bc, yc && f.requestPointerLock(), mc = !0, zc ? (\"undefined\" != typeof SDL && (x[SDL.screen >> 2] = G[SDL.screen >> 2] | 8388608), Cc(e.canvas), Dc()) : Cc(f)) : (a.parentNode.insertBefore(f, a), a.parentNode.removeChild(a), zc ? (\"undefined\" != typeof SDL && (x[SDL.screen >> 2] = G[SDL.screen >> 2] & -8388609), Cc(e.canvas), Dc()) : Cc(f));\n        if (e.onFullScreen) e.onFullScreen(mc);\n        if (e.onFullscreen) e.onFullscreen(mc);\n      }\n\n      yc = a;\n      zc = b;\n      \"undefined\" === typeof yc && (yc = !0);\n      \"undefined\" === typeof zc && (zc = !1);\n      var f = e.canvas;\n      xc || (xc = !0, document.addEventListener(\"fullscreenchange\", d, !1), document.addEventListener(\"mozfullscreenchange\", d, !1), document.addEventListener(\"webkitfullscreenchange\", d, !1), document.addEventListener(\"MSFullscreenChange\", d, !1));\n      var g = document.createElement(\"div\");\n      f.parentNode.insertBefore(g, f);\n      g.appendChild(f);\n      g.requestFullscreen = g.requestFullscreen || g.mozRequestFullScreen || g.msRequestFullscreen || (g.webkitRequestFullscreen ? function () {\n        g.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null) || (g.webkitRequestFullScreen ? function () {\n        g.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\n      } : null);\n      c ? g.requestFullscreen({\n        Vb: c\n      }) : g.requestFullscreen();\n    }\n\n    function Fc(a, b, c) {\n      v(\"Browser.requestFullScreen() is deprecated. Please call Browser.requestFullscreen instead.\");\n\n      Fc = function Fc(a, b, c) {\n        Ac(a, b, c);\n      };\n\n      Ac(a, b, c);\n    }\n\n    function Bc() {\n      if (!mc) return !1;\n      (document.exitFullscreen || document.cancelFullScreen || document.mozCancelFullScreen || document.msExitFullscreen || document.webkitCancelFullScreen || function () {}).apply(document, []);\n      return !0;\n    }\n\n    var Gc = 0;\n\n    function cc(a) {\n      if (\"function\" === typeof requestAnimationFrame) requestAnimationFrame(a);else {\n        var b = Date.now();\n        if (0 === Gc) Gc = b + 1E3 / 60;else for (; b + 2 >= Gc;) {\n          Gc += 1E3 / 60;\n        }\n        setTimeout(a, Math.max(Gc - b, 0));\n      }\n    }\n\n    function vc(a) {\n      e.noExitRuntime = !0;\n      setTimeout(function () {\n        A || a();\n      }, 1E4);\n    }\n\n    function uc(a) {\n      return {\n        jpg: \"image/jpeg\",\n        jpeg: \"image/jpeg\",\n        png: \"image/png\",\n        bmp: \"image/bmp\",\n        ogg: \"audio/ogg\",\n        wav: \"audio/wav\",\n        mp3: \"audio/mpeg\"\n      }[a.substr(a.lastIndexOf(\".\") + 1)];\n    }\n\n    var Hc = [];\n\n    function Dc() {\n      var a = e.canvas;\n      Hc.forEach(function (b) {\n        b(a.width, a.height);\n      });\n    }\n\n    function Cc(a, b, c) {\n      b && c ? (a.Ib = b, a.yb = c) : (b = a.Ib, c = a.yb);\n      var d = b,\n          f = c;\n      e.forcedAspectRatio && 0 < e.forcedAspectRatio && (d / f < e.forcedAspectRatio ? d = Math.round(f * e.forcedAspectRatio) : f = Math.round(d / e.forcedAspectRatio));\n\n      if ((document.fullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || document.webkitFullscreenElement || document.webkitCurrentFullScreenElement) === a.parentNode && \"undefined\" != typeof screen) {\n        var g = Math.min(screen.width / d, screen.height / f);\n        d = Math.round(d * g);\n        f = Math.round(f * g);\n      }\n\n      zc ? (a.width != d && (a.width = d), a.height != f && (a.height = f), \"undefined\" != typeof a.style && (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))) : (a.width != b && (a.width = b), a.height != c && (a.height = c), \"undefined\" != typeof a.style && (d != b || f != c ? (a.style.setProperty(\"width\", d + \"px\", \"important\"), a.style.setProperty(\"height\", f + \"px\", \"important\")) : (a.style.removeProperty(\"width\"), a.style.removeProperty(\"height\"))));\n    }\n\n    var Ic = {},\n        Jc = 0;\n\n    function Kc() {\n      var a = Jc;\n      Jc++;\n      return a;\n    }\n\n    var qc, rc, sc, tc;\n\n    function fa() {\n      return C.length;\n    }\n\n    function Lc() {\n      if (\"undefined\" !== typeof indexedDB) return indexedDB;\n      var a = null;\n      \"object\" === (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) && (a = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB);\n      ka(a, \"IDBStore used, but indexedDB not supported\");\n      return a;\n    }\n\n    var Mc = {};\n\n    function Nc(a, b) {\n      var c = Mc[a];\n      if (c) b(null, c);else {\n        try {\n          var d = Lc().open(a, 22);\n        } catch (f) {\n          b(f);\n          return;\n        }\n\n        d.onupgradeneeded = function (a) {\n          var b = a.target.result;\n          a = a.target.transaction;\n          b.objectStoreNames.contains(\"FILE_DATA\") ? a.objectStore(\"FILE_DATA\") : b.createObjectStore(\"FILE_DATA\");\n        };\n\n        d.onsuccess = function () {\n          c = d.result;\n          Mc[a] = c;\n          b(null, c);\n        };\n\n        d.onerror = function (a) {\n          b(this.error);\n          a.preventDefault();\n        };\n      }\n    }\n\n    function Oc(a, b, c) {\n      Nc(a, function (a, f) {\n        if (a) return c(a);\n        a = f.transaction([\"FILE_DATA\"], b);\n\n        a.onerror = function (a) {\n          c(this.error || \"unknown error\");\n          a.preventDefault();\n        };\n\n        a = a.objectStore(\"FILE_DATA\");\n        c(null, a);\n      });\n    }\n\n    function Pc(a, b, c) {\n      Oc(a, \"readonly\", function (a, f) {\n        if (a) return c(a);\n        a = f.get(b);\n\n        a.onsuccess = function (a) {\n          return (a = a.target.result) ? c(null, a) : c(\"file \" + b + \" not found\");\n        };\n\n        a.onerror = function (a) {\n          c(a);\n        };\n      });\n    }\n\n    function Qc(a, b, c, d) {\n      Oc(a, \"readwrite\", function (a, g) {\n        if (a) return d(a);\n        a = g.put(c, b);\n\n        a.onsuccess = function () {\n          d();\n        };\n\n        a.onerror = function (a) {\n          d(a);\n        };\n      });\n    }\n\n    oa(\"GMT\", D, 18480, 4);\n\n    function Rc() {\n      function a(a) {\n        return (a = a.toTimeString().match(/\\(([A-Za-z ]+)\\)$/)) ? a[1] : \"GMT\";\n      }\n\n      if (!Sc) {\n        Sc = !0;\n        x[Tc() >> 2] = 60 * new Date().getTimezoneOffset();\n        var b = new Date(2E3, 0, 1),\n            c = new Date(2E3, 6, 1);\n        x[Uc() >> 2] = Number(b.getTimezoneOffset() != c.getTimezoneOffset());\n        var d = a(b),\n            f = a(c);\n        d = la(Vc(d));\n        f = la(Vc(f));\n        c.getTimezoneOffset() < b.getTimezoneOffset() ? (x[Wc() >> 2] = d, x[Wc() + 4 >> 2] = f) : (x[Wc() >> 2] = f, x[Wc() + 4 >> 2] = d);\n      }\n    }\n\n    var Sc;\n\n    function Xc(a) {\n      a = qa(a);\n      var b = F.byteLength;\n\n      try {\n        return -1 !== z.grow((a - b) / 65536) ? (F = z.buffer, !0) : !1;\n      } catch (c) {\n        return !1;\n      }\n    }\n\n    Ba.push(function () {\n      var a = e._fflush;\n      a && a(0);\n      Sa[1].length && Ta(1, 10);\n      Sa[2].length && Ta(2, 10);\n    });\n    bb = e.InternalError = ab(\"InternalError\");\n\n    for (var Yc = Array(256), Zc = 0; 256 > Zc; ++Zc) {\n      Yc[Zc] = String.fromCharCode(Zc);\n    }\n\n    fb = Yc;\n    gb = e.BindingError = ab(\"BindingError\");\n\n    R.prototype.isAliasOf = function (a) {\n      if (!(this instanceof R && a instanceof R)) return !1;\n      var b = this.La.Oa.Na,\n          c = this.La.Ma,\n          d = a.La.Oa.Na;\n\n      for (a = a.La.Ma; b.Sa;) {\n        c = b.$a(c), b = b.Sa;\n      }\n\n      for (; d.Sa;) {\n        a = d.$a(a), d = d.Sa;\n      }\n\n      return b === d && c === a;\n    };\n\n    R.prototype.clone = function () {\n      this.La.Ma || ib(this);\n      if (this.La.Za) return this.La.count.value += 1, this;\n      var a = mb(Object.create(Object.getPrototypeOf(this), {\n        La: {\n          value: hb(this.La)\n        }\n      }));\n      a.La.count.value += 1;\n      a.La.Va = !1;\n      return a;\n    };\n\n    R.prototype[\"delete\"] = function () {\n      this.La.Ma || ib(this);\n      this.La.Va && !this.La.Za && Q(\"Object already scheduled for deletion\");\n      kb(this);\n      lb(this.La);\n      this.La.Za || (this.La.Pa = void 0, this.La.Ma = void 0);\n    };\n\n    R.prototype.isDeleted = function () {\n      return !this.La.Ma;\n    };\n\n    R.prototype.deleteLater = function () {\n      this.La.Ma || ib(this);\n      this.La.Va && !this.La.Za && Q(\"Object already scheduled for deletion\");\n      ob.push(this);\n      1 === ob.length && nb && nb(pb);\n      this.La.Va = !0;\n      return this;\n    };\n\n    U.prototype.ub = function (a) {\n      this.nb && (a = this.nb(a));\n      return a;\n    };\n\n    U.prototype.jb = function (a) {\n      this.Ua && this.Ua(a);\n    };\n\n    U.prototype.argPackAdvance = 8;\n    U.prototype.readValueFromPointer = Xa;\n\n    U.prototype.deleteObject = function (a) {\n      if (null !== a) a[\"delete\"]();\n    };\n\n    U.prototype.fromWireType = function (a) {\n      function b() {\n        return this.bb ? Bb(this.Na.Ya, {\n          Oa: this.Bb,\n          Ma: c,\n          Ra: this,\n          Pa: a\n        }) : Bb(this.Na.Ya, {\n          Oa: this,\n          Ma: a\n        });\n      }\n\n      var c = this.ub(a);\n      if (!c) return this.jb(a), null;\n      var d = Ab(this.Na, c);\n\n      if (void 0 !== d) {\n        if (0 === d.La.count.value) return d.La.Ma = c, d.La.Pa = a, d.clone();\n        d = d.clone();\n        this.jb(a);\n        return d;\n      }\n\n      d = this.Na.tb(c);\n      d = qb[d];\n      if (!d) return b.call(this);\n      d = this.ab ? d.qb : d.pointerType;\n      var f = yb(c, this.Na, d.Na);\n      return null === f ? b.call(this) : this.bb ? Bb(d.Na.Ya, {\n        Oa: d,\n        Ma: f,\n        Ra: this,\n        Pa: a\n      }) : Bb(d.Na.Ya, {\n        Oa: d,\n        Ma: f\n      });\n    };\n\n    e.getInheritedInstanceCount = function () {\n      return Object.keys(zb).length;\n    };\n\n    e.getLiveInheritedInstances = function () {\n      var a = [],\n          b;\n\n      for (b in zb) {\n        zb.hasOwnProperty(b) && a.push(zb[b]);\n      }\n\n      return a;\n    };\n\n    e.flushPendingDeletes = pb;\n\n    e.setDelayFunction = function (a) {\n      nb = a;\n      ob.length && nb && nb(pb);\n    };\n\n    Db = e.UnboundTypeError = ab(\"UnboundTypeError\");\n\n    e.count_emval_handles = function () {\n      for (var a = 0, b = 5; b < Y.length; ++b) {\n        void 0 !== Y[b] && ++a;\n      }\n\n      return a;\n    };\n\n    e.get_first_emval = function () {\n      for (var a = 5; a < Y.length; ++a) {\n        if (void 0 !== Y[a]) return Y[a];\n      }\n\n      return null;\n    };\n\n    e.requestFullScreen = function (a, b, c) {\n      v(\"Module.requestFullScreen is deprecated. Please call Module.requestFullscreen instead.\");\n      e.requestFullScreen = e.requestFullscreen;\n      Fc(a, b, c);\n    };\n\n    e.requestFullscreen = function (a, b, c) {\n      Ac(a, b, c);\n    };\n\n    e.requestAnimationFrame = function (a) {\n      cc(a);\n    };\n\n    e.setCanvasSize = function (a, b, c) {\n      Cc(e.canvas, a, b);\n      c || Dc();\n    };\n\n    e.pauseMainLoop = function () {\n      Z = null;\n      fc++;\n    };\n\n    e.resumeMainLoop = function () {\n      fc++;\n      var a = Wb,\n          b = Xb,\n          c = Yb;\n      Yb = null;\n      dc(c);\n      Vb(a, b);\n      Z();\n    };\n\n    e.getUserMedia = function () {\n      window.getUserMedia || (window.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia);\n      window.getUserMedia(void 0);\n    };\n\n    e.createContext = function (a, b, c, d) {\n      return wc(a, b, c, d);\n    };\n\n    \"undefined\" !== typeof dateNow ? $b = dateNow : \"object\" === (typeof performance === \"undefined\" ? \"undefined\" : _typeof(performance)) && performance && \"function\" === typeof performance.now ? $b = function $b() {\n      return performance.now();\n    } : $b = Date.now;\n\n    function Vc(a) {\n      var b = Array(pa(a) + 1);\n      oa(a, b, 0, b.length);\n      return b;\n    }\n\n    var bd = e.asm({}, {\n      i: _y,\n      A: function A() {},\n      da: function da() {\n        v(\"missing function: _ZN5Umbra18createDirRecursiveEPKc\");\n\n        _y(-1);\n      },\n      _: Pa,\n      G: function G() {\n        return Qa.apply(null, arguments);\n      },\n      X: function X() {\n        A = !0;\n        throw \"Pure virtual function called!\";\n      },\n      w: function w() {},\n      z: function z(a) {\n        e.___errno_location && (x[e.___errno_location() >> 2] = a);\n        return a;\n      },\n      N: function N(a, b) {\n        _K = b;\n\n        try {\n          return Ua.lb(), L(), L(), L(), L(), 0;\n        } catch (c) {\n          return _y(c), -c.Xa;\n        }\n      },\n      M: function M(a, b) {\n        _K = b;\n\n        try {\n          var c = Ua.lb(),\n              d = L(),\n              f = L();\n          return Ua.Mb(c, d, f);\n        } catch (g) {\n          return _y(g), -g.Xa;\n        }\n      },\n      y: function y(a, b) {\n        _K = b;\n\n        try {\n          var c = L(),\n              d = L(),\n              f = L();\n\n          for (b = a = 0; b < f; b++) {\n            for (var g = x[d + 8 * b >> 2], k = x[d + (8 * b + 4) >> 2], h = 0; h < k; h++) {\n              Ta(c, D[g + h]);\n            }\n\n            a += k;\n          }\n\n          return a;\n        } catch (l) {\n          return _y(l), -l.Xa;\n        }\n      },\n      ca: function ca(a, b) {\n        _K = b;\n\n        try {\n          var c = E(L()),\n              d = L();\n          return Ua.Nb((void 0).stat, c, d);\n        } catch (f) {\n          return _y(f), -f.Xa;\n        }\n      },\n      v: function v(a, b) {\n        _K = b;\n        return 0;\n      },\n      ba: function ba(a, b) {\n        _K = b;\n\n        try {\n          var c = E(L()),\n              d = L(),\n              f = L();\n          return (void 0).open(c, d, f).Pb;\n        } catch (g) {\n          return _y(g), -g.Xa;\n        }\n      },\n      L: function L(a, b) {\n        _K = b;\n        return 0;\n      },\n      K: function K(a, b) {\n        _K = b;\n\n        try {\n          return Ua.lb(), 0;\n        } catch (c) {\n          return _y(c), -c.Xa;\n        }\n      },\n      x: function x() {},\n      u: function u(a) {\n        var b = Va[a];\n        delete Va[a];\n        var c = b.gb,\n            d = b.Ua,\n            f = b.kb,\n            g = f.map(function (a) {\n          return a.xb;\n        }).concat(f.map(function (a) {\n          return a.Fb;\n        }));\n        db([a], g, function (a) {\n          var g = {};\n          f.forEach(function (b, c) {\n            var d = a[c],\n                h = b.vb,\n                k = b.wb,\n                l = a[c + f.length],\n                n = b.Eb,\n                Ra = b.Gb;\n            g[b.sb] = {\n              read: function read(a) {\n                return d.fromWireType(h(k, a));\n              },\n              write: function write(a, b) {\n                var c = [];\n                n(Ra, a, l.toWireType(c, b));\n                Wa(c);\n              }\n            };\n          });\n          return [{\n            name: b.name,\n            fromWireType: function fromWireType(a) {\n              var b = {},\n                  c;\n\n              for (c in g) {\n                b[c] = g[c].read(a);\n              }\n\n              d(a);\n              return b;\n            },\n            toWireType: function toWireType(a, b) {\n              for (var f in g) {\n                if (!(f in b)) throw new TypeError(\"Missing field\");\n              }\n\n              var h = c();\n\n              for (f in g) {\n                g[f].write(h, b[f]);\n              }\n\n              null !== a && a.push(d, h);\n              return h;\n            },\n            argPackAdvance: 8,\n            readValueFromPointer: Xa,\n            Qa: d\n          }];\n        });\n      },\n      aa: function aa(a, b, c, d, f) {\n        var g = eb(c);\n        b = P(b);\n        O(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return !!a;\n          },\n          toWireType: function toWireType(a, b) {\n            return b ? d : f;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: function readValueFromPointer(a) {\n            if (1 === c) var d = C;else if (2 === c) d = ra;else if (4 === c) d = x;else throw new TypeError(\"Unknown boolean type size: \" + b);\n            return this.fromWireType(d[a >> g]);\n          },\n          Qa: null\n        });\n      },\n      J: function J(a, b, c, d, f, g, k, h, l, n, p, t, u) {\n        p = P(p);\n        g = W(f, g);\n        h && (h = W(k, h));\n        n && (n = W(l, n));\n        u = W(t, u);\n        var w = Za(p);\n        sb(w, function () {\n          Gb(\"Cannot construct \" + p + \" due to unbound types\", [d]);\n        });\n        db([a, b, c], d ? [d] : [], function (b) {\n          b = b[0];\n\n          if (d) {\n            var c = b.Na;\n            var f = c.Ya;\n          } else f = R.prototype;\n\n          b = $a(w, function () {\n            if (Object.getPrototypeOf(this) !== k) throw new gb(\"Use 'new' to construct \" + p);\n            if (void 0 === l.ib) throw new gb(p + \" has no accessible constructor\");\n            var a = l.ib[arguments.length];\n            if (void 0 === a) throw new gb(\"Tried to invoke ctor of \" + p + \" with invalid number of parameters (\" + arguments.length + \") - expected (\" + Object.keys(l.ib).toString() + \") parameters instead!\");\n            return a.apply(this, arguments);\n          });\n          var k = Object.create(f, {\n            constructor: {\n              value: b\n            }\n          });\n          b.prototype = k;\n          var l = new tb(p, b, k, u, c, g, h, n);\n          c = new U(p, l, !0, !1);\n          f = new U(p + \"*\", l, !1, !1);\n          var r = new U(p + \" const*\", l, !1, !0);\n          qb[a] = {\n            pointerType: f,\n            qb: r\n          };\n          Cb(w, b);\n          return [c, f, r];\n        });\n      },\n      $: function $(a, b) {\n        b = P(b);\n        O(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = Y[a].value;\n            Ib(a);\n            return b;\n          },\n          toWireType: function toWireType(a, b) {\n            return T(b);\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Xa,\n          Qa: null\n        });\n      },\n      t: function t(a, b, c, d) {\n        function f() {}\n\n        c = eb(c);\n        b = P(b);\n        f.values = {};\n        O(a, {\n          name: b,\n          constructor: f,\n          fromWireType: function fromWireType(a) {\n            return this.constructor.values[a];\n          },\n          toWireType: function toWireType(a, b) {\n            return b.value;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Jb(b, c, d),\n          Qa: null\n        });\n        sb(b, f);\n      },\n      h: function h(a, b, c) {\n        var d = Kb(a, \"enum\");\n        b = P(b);\n        a = d.constructor;\n        d = Object.create(d.constructor.prototype, {\n          value: {\n            value: c\n          },\n          constructor: {\n            value: $a(d.name + \"_\" + b, function () {})\n          }\n        });\n        a.values[c] = d;\n        a[b] = d;\n      },\n      I: function I(a, b, c) {\n        c = eb(c);\n        b = P(b);\n        O(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            return a;\n          },\n          toWireType: function toWireType(a, b) {\n            if (\"number\" !== typeof b && \"boolean\" !== typeof b) throw new TypeError('Cannot convert \"' + S(b) + '\" to ' + this.name);\n            return b;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Lb(b, c),\n          Qa: null\n        });\n      },\n      d: function d(a, b, c, _d, f, g) {\n        var k = Nb(b, c);\n        a = P(a);\n        f = W(_d, f);\n        sb(a, function () {\n          Gb(\"Cannot call \" + a + \" due to unbound types\", k);\n        }, b - 1);\n        db([], k, function (c) {\n          var d = a,\n              h = a;\n          c = [c[0], null].concat(c.slice(1));\n          var k = f,\n              t = c.length;\n          2 > t && Q(\"argTypes array size mismatch! Must at least get return value and 'this' types!\");\n\n          for (var u = null !== c[1] && !1, w = !1, r = 1; r < c.length; ++r) {\n            if (null !== c[r] && void 0 === c[r].Qa) {\n              w = !0;\n              break;\n            }\n          }\n\n          var Ra = \"void\" !== c[0].name,\n              V = \"\",\n              ea = \"\";\n\n          for (r = 0; r < t - 2; ++r) {\n            V += (0 !== r ? \", \" : \"\") + \"arg\" + r, ea += (0 !== r ? \", \" : \"\") + \"arg\" + r + \"Wired\";\n          }\n\n          h = \"return function \" + Za(h) + \"(\" + V + \") {\\nif (arguments.length !== \" + (t - 2) + \") {\\nthrowBindingError('function \" + h + \" called with ' + arguments.length + ' arguments, expected \" + (t - 2) + \" args!');\\n}\\n\";\n          w && (h += \"var destructors = [];\\n\");\n          var lc = w ? \"destructors\" : \"null\";\n          V = \"throwBindingError invoker fn runDestructors retType classParam\".split(\" \");\n          k = [Q, k, g, Wa, c[0], c[1]];\n          u && (h += \"var thisWired = classParam.toWireType(\" + lc + \", this);\\n\");\n\n          for (r = 0; r < t - 2; ++r) {\n            h += \"var arg\" + r + \"Wired = argType\" + r + \".toWireType(\" + lc + \", arg\" + r + \"); // \" + c[r + 2].name + \"\\n\", V.push(\"argType\" + r), k.push(c[r + 2]);\n          }\n\n          u && (ea = \"thisWired\" + (0 < ea.length ? \", \" : \"\") + ea);\n          h += (Ra ? \"var rv = \" : \"\") + \"invoker(fn\" + (0 < ea.length ? \", \" : \"\") + ea + \");\\n\";\n          if (w) h += \"runDestructors(destructors);\\n\";else for (r = u ? 1 : 2; r < c.length; ++r) {\n            t = 1 === r ? \"thisWired\" : \"arg\" + (r - 2) + \"Wired\", null !== c[r].Qa && (h += t + \"_dtor(\" + t + \"); // \" + c[r].name + \"\\n\", V.push(t + \"_dtor\"), k.push(c[r].Qa));\n          }\n          Ra && (h += \"var ret = retType.fromWireType(rv);\\nreturn ret;\\n\");\n          V.push(h + \"}\\n\");\n          c = Mb(V).apply(null, k);\n          Cb(d, c, b - 1);\n          return [];\n        });\n      },\n      o: function o(a, b, c, d, f) {\n        function g(a) {\n          return a;\n        }\n\n        b = P(b);\n        -1 === f && (f = 4294967295);\n        var k = eb(c);\n\n        if (0 === d) {\n          var h = 32 - 8 * c;\n\n          g = function g(a) {\n            return a << h >>> h;\n          };\n        }\n\n        var l = -1 != b.indexOf(\"unsigned\");\n        O(a, {\n          name: b,\n          fromWireType: g,\n          toWireType: function toWireType(a, c) {\n            if (\"number\" !== typeof c && \"boolean\" !== typeof c) throw new TypeError('Cannot convert \"' + S(c) + '\" to ' + this.name);\n            if (c < d || c > f) throw new TypeError('Passing a number \"' + S(c) + '\" from JS side to C/C++ side to an argument of type \"' + b + '\", which is outside the valid range [' + d + \", \" + f + \"]!\");\n            return l ? c >>> 0 : c | 0;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Ob(b, k, 0 !== d),\n          Qa: null\n        });\n      },\n      m: function m(a, b, c) {\n        function d(a) {\n          a >>= 2;\n          var b = G;\n          return new f(b.buffer, b[a + 1], b[a]);\n        }\n\n        var f = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array][b];\n        c = P(c);\n        O(a, {\n          name: c,\n          fromWireType: d,\n          argPackAdvance: 8,\n          readValueFromPointer: d\n        }, {\n          zb: !0\n        });\n      },\n      H: function H(a, b) {\n        b = P(b);\n        var c = \"std::string\" === b;\n        O(a, {\n          name: b,\n          fromWireType: function fromWireType(a) {\n            var b = G[a >> 2];\n\n            if (c) {\n              var d = D[a + 4 + b],\n                  k = 0;\n              0 != d && (k = d, D[a + 4 + b] = 0);\n              var h = a + 4;\n\n              for (d = 0; d <= b; ++d) {\n                var l = a + 4 + d;\n\n                if (0 == D[l]) {\n                  h = E(h);\n                  if (void 0 === n) var n = h;else n += String.fromCharCode(0), n += h;\n                  h = l + 1;\n                }\n              }\n\n              0 != k && (D[a + 4 + b] = k);\n            } else {\n              n = Array(b);\n\n              for (d = 0; d < b; ++d) {\n                n[d] = String.fromCharCode(D[a + 4 + d]);\n              }\n\n              n = n.join(\"\");\n            }\n\n            X(a);\n            return n;\n          },\n          toWireType: function toWireType(a, b) {\n            b instanceof ArrayBuffer && (b = new Uint8Array(b));\n            var d = \"string\" === typeof b;\n            d || b instanceof Uint8Array || b instanceof Uint8ClampedArray || b instanceof Int8Array || Q(\"Cannot pass non-string to std::string\");\n            var f = (c && d ? function () {\n              return pa(b);\n            } : function () {\n              return b.length;\n            })(),\n                h = B(4 + f + 1);\n            G[h >> 2] = f;\n            if (c && d) oa(b, D, h + 4, f + 1);else if (d) for (d = 0; d < f; ++d) {\n              var l = b.charCodeAt(d);\n              255 < l && (X(h), Q(\"String has UTF-16 code units that do not fit in 8 bits\"));\n              D[h + 4 + d] = l;\n            } else for (d = 0; d < f; ++d) {\n              D[h + 4 + d] = b[d];\n            }\n            null !== a && a.push(X, h);\n            return h;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Xa,\n          Qa: function Qa(a) {\n            X(a);\n          }\n        });\n      },\n      Z: function Z(a, b, c) {\n        c = P(c);\n\n        if (2 === b) {\n          var d = function d() {\n            return sa;\n          };\n\n          var f = 1;\n        } else 4 === b && (d = function d() {\n          return G;\n        }, f = 2);\n\n        O(a, {\n          name: c,\n          fromWireType: function fromWireType(a) {\n            for (var b = d(), c = G[a >> 2], g = Array(c), n = a + 4 >> f, p = 0; p < c; ++p) {\n              g[p] = String.fromCharCode(b[n + p]);\n            }\n\n            X(a);\n            return g.join(\"\");\n          },\n          toWireType: function toWireType(a, c) {\n            var g = d(),\n                k = c.length,\n                n = B(4 + k * b);\n            G[n >> 2] = k;\n\n            for (var p = n + 4 >> f, t = 0; t < k; ++t) {\n              g[p + t] = c.charCodeAt(t);\n            }\n\n            null !== a && a.push(X, n);\n            return n;\n          },\n          argPackAdvance: 8,\n          readValueFromPointer: Xa,\n          Qa: function Qa(a) {\n            X(a);\n          }\n        });\n      },\n      s: function s(a, b, c, d, f, g) {\n        Va[a] = {\n          name: P(b),\n          gb: W(c, d),\n          Ua: W(f, g),\n          kb: []\n        };\n      },\n      j: function j(a, b, c, d, f, g, k, h, l, n) {\n        Va[a].kb.push({\n          sb: P(b),\n          xb: c,\n          vb: W(d, f),\n          wb: g,\n          Fb: k,\n          Eb: W(h, l),\n          Gb: n\n        });\n      },\n      Y: function Y(a, b) {\n        b = P(b);\n        O(a, {\n          Ab: !0,\n          name: b,\n          argPackAdvance: 0,\n          fromWireType: function fromWireType() {},\n          toWireType: function toWireType() {}\n        });\n      },\n      q: function q(a, b, c, d) {\n        a = Rb[a];\n        b = Sb(b);\n        c = Qb(c);\n        a(b, c, null, d);\n      },\n      c: Ib,\n      p: function p(a, b) {\n        b = Ub(a, b);\n\n        for (var c = b[0], d = c.name + \"_$\" + b.slice(1).map(function (a) {\n          return a.name;\n        }).join(\"_\") + \"$\", f = [\"retType\"], g = [c], k = \"\", h = 0; h < a - 1; ++h) {\n          k += (0 !== h ? \", \" : \"\") + \"arg\" + h, f.push(\"argType\" + h), g.push(b[1 + h]);\n        }\n\n        d = \"return function \" + Za(\"methodCaller_\" + d) + \"(handle, name, destructors, args) {\\n\";\n        var l = 0;\n\n        for (h = 0; h < a - 1; ++h) {\n          d += \"    var arg\" + h + \" = argType\" + h + \".readValueFromPointer(args\" + (l ? \"+\" + l : \"\") + \");\\n\", l += b[h + 1].argPackAdvance;\n        }\n\n        d += \"    var rv = handle[name](\" + k + \");\\n\";\n\n        for (h = 0; h < a - 1; ++h) {\n          b[h + 1].deleteObject && (d += \"    argType\" + h + \".deleteObject(arg\" + h + \");\\n\");\n        }\n\n        c.Ab || (d += \"    return retType.toWireType(destructors, rv);\\n\");\n        f.push(d + \"};\\n\");\n        a = Mb(f).apply(null, g);\n        return Tb(a);\n      },\n      F: function F(a) {\n        4 < a && (Y[a].hb += 1);\n      },\n      r: function r() {\n        return T([]);\n      },\n      g: function g(a) {\n        return T(Qb(a));\n      },\n      n: function n() {\n        return T({});\n      },\n      e: function e(a, b, c) {\n        a = Sb(a);\n        b = Sb(b);\n        c = Sb(c);\n        a[b] = c;\n      },\n      f: function f(a, b) {\n        a = Kb(a, \"_emval_take_value\");\n        a = a.readValueFromPointer(b);\n        return T(a);\n      },\n      l: function l() {\n        e.abort();\n      },\n      E: function E(a) {\n        return Na[a]();\n      },\n      W: function W(a, b, c, d, f, g, k, h, l, n, p, t) {\n        return Na[a](b, c, d, f, g, k, h, l, n, p, t);\n      },\n      D: function D(a) {\n        (a = Ic[a]) && a.abort();\n      },\n      V: fa,\n      k: $b,\n      C: function C(a, b, c, d, f) {\n        Pc(E(a), E(b), function (a, b) {\n          a ? f && $c(f, c) : (a = B(b.length), D.set(b, a), ad(d, c, a, b.length), X(a));\n        });\n      },\n      U: function U(a, b, c, d, f, g, k) {\n        Qc(E(a), E(b), new Uint8Array(D.subarray(c, c + d)), function (a) {\n          a ? k && $c(k, f) : g && $c(g, f);\n        });\n      },\n      T: function T(a, b, c) {\n        D.set(D.subarray(b, b + c), a);\n      },\n      S: function S(a) {\n        if (2147418112 < a) return !1;\n\n        for (var b = Math.max(fa(), 16777216); b < a;) {\n          536870912 >= b ? b = qa(2 * b) : b = Math.min(qa((3 * b + 2147483648) / 4), 2147418112);\n        }\n\n        if (!Xc(b)) return !1;\n        va();\n        return !0;\n      },\n      R: function R(a) {\n        if (!e.noExitRuntime && (A = !0, xa(Ba), e.onExit)) e.onExit(a);\n        e.quit(a, new kc(a));\n      },\n      B: function B() {\n        _y(\"trap!\");\n      },\n      Q: function Q(a) {\n        Rc();\n        a = new Date(1E3 * x[a >> 2]);\n        x[4608] = a.getSeconds();\n        x[4609] = a.getMinutes();\n        x[4610] = a.getHours();\n        x[4611] = a.getDate();\n        x[4612] = a.getMonth();\n        x[4613] = a.getFullYear() - 1900;\n        x[4614] = a.getDay();\n        var b = new Date(a.getFullYear(), 0, 1);\n        x[4615] = (a.getTime() - b.getTime()) / 864E5 | 0;\n        x[4617] = -(60 * a.getTimezoneOffset());\n        var c = new Date(2E3, 6, 1).getTimezoneOffset();\n        b = b.getTimezoneOffset();\n        a = (c != b && a.getTimezoneOffset() == Math.min(b, c)) | 0;\n        x[4616] = a;\n        a = x[Wc() + (a ? 4 : 0) >> 2];\n        x[4618] = a;\n        return 18432;\n      },\n      P: function P(a) {\n        var b = Date.now() / 1E3 | 0;\n        a && (x[a >> 2] = b);\n        return b;\n      },\n      O: function O() {\n        _y(\"OOM\");\n      },\n      a: da,\n      b: 18416\n    }, F);\n    e.asm = bd;\n\n    e.___embind_register_native_and_builtin_types = function () {\n      return e.asm.ea.apply(null, arguments);\n    };\n\n    var Fb = e.___getTypeName = function () {\n      return e.asm.fa.apply(null, arguments);\n    },\n        Uc = e.__get_daylight = function () {\n      return e.asm.ga.apply(null, arguments);\n    },\n        Tc = e.__get_timezone = function () {\n      return e.asm.ha.apply(null, arguments);\n    },\n        Wc = e.__get_tzname = function () {\n      return e.asm.ia.apply(null, arguments);\n    },\n        X = e._free = function () {\n      return e.asm.ja.apply(null, arguments);\n    },\n        B = e._malloc = function () {\n      return e.asm.ka.apply(null, arguments);\n    },\n        Oa = e.globalCtors = function () {\n      return e.asm.Ja.apply(null, arguments);\n    };\n\n    e.stackAlloc = function () {\n      return e.asm.Ka.apply(null, arguments);\n    };\n\n    e.dynCall_i = function () {\n      return e.asm.la.apply(null, arguments);\n    };\n\n    e.dynCall_ii = function () {\n      return e.asm.ma.apply(null, arguments);\n    };\n\n    e.dynCall_iii = function () {\n      return e.asm.na.apply(null, arguments);\n    };\n\n    e.dynCall_iiii = function () {\n      return e.asm.oa.apply(null, arguments);\n    };\n\n    e.dynCall_iiiii = function () {\n      return e.asm.pa.apply(null, arguments);\n    };\n\n    e.dynCall_iiiiii = function () {\n      return e.asm.qa.apply(null, arguments);\n    };\n\n    e.dynCall_iiiiiifi = function () {\n      return e.asm.ra.apply(null, arguments);\n    };\n\n    e.dynCall_iiiiiiiiii = function () {\n      return e.asm.sa.apply(null, arguments);\n    };\n\n    e.dynCall_iiiji = function () {\n      return e.asm.ta.apply(null, arguments);\n    };\n\n    e.dynCall_ji = function () {\n      return e.asm.ua.apply(null, arguments);\n    };\n\n    e.dynCall_jiji = function () {\n      return e.asm.va.apply(null, arguments);\n    };\n\n    e.dynCall_v = function () {\n      return e.asm.wa.apply(null, arguments);\n    };\n\n    var $c = e.dynCall_vi = function () {\n      return e.asm.xa.apply(null, arguments);\n    };\n\n    e.dynCall_vii = function () {\n      return e.asm.ya.apply(null, arguments);\n    };\n\n    e.dynCall_viifiii = function () {\n      return e.asm.za.apply(null, arguments);\n    };\n\n    var ad = e.dynCall_viii = function () {\n      return e.asm.Aa.apply(null, arguments);\n    };\n\n    e.dynCall_viiif = function () {\n      return e.asm.Ba.apply(null, arguments);\n    };\n\n    e.dynCall_viiifi = function () {\n      return e.asm.Ca.apply(null, arguments);\n    };\n\n    e.dynCall_viiifiii = function () {\n      return e.asm.Da.apply(null, arguments);\n    };\n\n    e.dynCall_viiii = function () {\n      return e.asm.Ea.apply(null, arguments);\n    };\n\n    e.dynCall_viiiii = function () {\n      return e.asm.Fa.apply(null, arguments);\n    };\n\n    e.dynCall_viiiiii = function () {\n      return e.asm.Ga.apply(null, arguments);\n    };\n\n    e.dynCall_viiiiiiiii = function () {\n      return e.asm.Ha.apply(null, arguments);\n    };\n\n    e.dynCall_viij = function () {\n      return e.asm.Ia.apply(null, arguments);\n    };\n\n    e.asm = bd;\n\n    e.then = function (a) {\n      if (e.calledRun) a(e);else {\n        var b = e.onRuntimeInitialized;\n\n        e.onRuntimeInitialized = function () {\n          b && b();\n          a(e);\n        };\n      }\n      return e;\n    };\n\n    function kc(a) {\n      this.name = \"ExitStatus\";\n      this.message = \"Program terminated with exit(\" + a + \")\";\n      this.status = a;\n    }\n\n    kc.prototype = Error();\n    kc.prototype.constructor = kc;\n\n    Ga = function cd() {\n      e.calledRun || dd();\n      e.calledRun || (Ga = cd);\n    };\n\n    function dd() {\n      function a() {\n        if (!e.calledRun && (e.calledRun = !0, !A)) {\n          Da = !0;\n          xa(za);\n          xa(Aa);\n          if (e.onRuntimeInitialized) e.onRuntimeInitialized();\n          if (e.postRun) for (\"function\" == typeof e.postRun && (e.postRun = [e.postRun]); e.postRun.length;) {\n            var a = e.postRun.shift();\n            Ca.unshift(a);\n          }\n          xa(Ca);\n        }\n      }\n\n      if (!(0 < H)) {\n        if (e.preRun) for (\"function\" == typeof e.preRun && (e.preRun = [e.preRun]); e.preRun.length;) {\n          Ea();\n        }\n        xa(ya);\n        0 < H || e.calledRun || (e.setStatus ? (e.setStatus(\"Running...\"), setTimeout(function () {\n          setTimeout(function () {\n            e.setStatus(\"\");\n          }, 1);\n          a();\n        }, 1)) : a());\n      }\n    }\n\n    e.run = dd;\n\n    function _y(a) {\n      if (e.onAbort) e.onAbort(a);\n      ba(a);\n      v(a);\n      A = !0;\n      throw \"abort(\" + a + \"). Build with -s ASSERTIONS=1 for more info.\";\n    }\n\n    e.abort = _y;\n    if (e.preInit) for (\"function\" == typeof e.preInit && (e.preInit = [e.preInit]); 0 < e.preInit.length;) {\n      e.preInit.pop()();\n    }\n    dd();\n    e.maxBytesDownloaded = 0;\n    e.minBytesDownloaded = 0;\n    e.URLsDownloaded = new Set([]);\n    e.wgetRequests = Ic;\n\n    function Ma(a, b, c, d, f, g, k, h, l, n, p) {\n      var t = E(a);\n      b = E(b);\n      g = E(g);\n      var u = new XMLHttpRequest();\n      u.open(b, t, !0);\n      if (\"GET\" != b || 0 != g.length) u.withCredentials = !0;\n      u.responseType = \"arraybuffer\";\n      var w = Kc();\n\n      u.onload = function () {\n        if (200 == u.status) {\n          var b = new Uint8Array(u.response),\n              g = e.URLsDownloaded;\n          e.maxBytesDownloaded += u.response.byteLength;\n          g.has(a) || (g.add(a), e.minBytesDownloaded += u.response.byteLength);\n          n ? b.length != p ? e.dynCall_viii(f, w, c, 0) : (D.set(b, n), e.dynCall_viiii(d, w, c, null, 0)) : (g = B(b.length), D.set(b, g), e.dynCall_viiii(d, w, c, g, b.length), X(g));\n        } else e.dynCall_viii(f, w, c, u.status);\n\n        delete Ic[w];\n      };\n\n      u.onerror = function () {\n        e.dynCall_viii(f, w, c, u.status);\n        delete Ic[w];\n      };\n\n      u.onabort = function () {\n        delete Ic[w];\n      };\n\n      0 != g.length && u.setRequestHeader(\"Authorization\", \"Basic \" + btoa(g + \":\"));\n      l = E(l).split(\"\\n\");\n      if (2 <= l.length) for (t = 0; t < l.length; t += 2) {\n        u.setRequestHeader(l[t], l[t + 1]);\n      }\n      \"POST\" == b ? u.send(C.slice(k, k + h)) : u.send(null);\n      Ic[w] = u;\n      return w;\n    }\n    return UmbraNativeAPI;\n  };\n}();\n\nvar TextureFormat = {\n  RGBA32: 0,\n  RGB24: 1,\n  BC1: 2,\n  BC3: 3,\n  BC4: 4,\n  BC5: 5,\n  ETC1_RGB: 6,\n  RGBA_FLOAT32: 7,\n  UNC1: 8,\n  JPEG: 9,\n  PNG: 10,\n  BMP: 11,\n  PSD: 12,\n  TGA: 13,\n  GIF: 14,\n  HDR: 15,\n  PIC: 16,\n  PNM: 17,\n  ASTC_4X4: 18,\n  ASTC_5X4: 19,\n  ASTC_5X5: 20,\n  ASTC_6X5: 21,\n  ASTC_6X6: 22,\n  ASTC_8X5: 23,\n  ASTC_8X6: 24,\n  ASTC_10X5: 25,\n  ASTC_10X6: 26,\n  ASTC_8X8: 27,\n  ASTC_10X8: 28,\n  ASTC_10X10: 29,\n  ASTC_12X10: 30,\n  ASTC_12X12: 31,\n  ARGB32: 32,\n  R8: 33,\n  PVRTC1_RGB4: 34,\n  PVRTC1_RGBA4: 35,\n  UINT8: 36,\n  UINT16: 37,\n  UINT32: 38,\n  RGB565: 39,\n  RG8: 40,\n  RG16F: 41,\n  COUNT: 42\n};\nvar TextureFormatNames = ['rgba32', 'rgb24', 'bc1', // Also known as DXT1\n'bc3', // Also known as DXT5\n'bc4', 'bc5', 'etc1_rgb', 'rgba_float32', 'unc1', // Deprecated internal format, for backwards compatibility\n'jpeg', 'png', 'bmp', 'psd', 'tga', 'gif', 'hdr', 'pic', 'pnm', 'astc_4x4', // 8.00 bpp\n'astc_5x4', // 6.40 bpp\n'astc_5x5', // 5.12 bpp\n'astc_6x5', // 4.27 bpp\n'astc_6x6', // 3.56 bpp\n'astc_8x5', // 3.20 bpp\n'astc_8x6', // 2.67 bpp\n'astc_10x5', // 2.56 bpp\n'astc_10x6', // 2.13 bpp\n'astc_8x8', // 2.00 bpp\n'astc_10x8', // 1.60 bpp\n'astc_10x10', // 1.28 bpp\n'astc_12x10', // 1.07 bpp\n'astc_12x12', // 0.89 bpp\n'argb32', 'r8', 'pvrtc1_rgb4', 'pvrtc1_rgba4', 'uint8', 'uint16', 'uint32', 'rgb565', 'rg8', 'rg16f', 'count'];\nvar ColorSpace = {\n  LINEAR: 0,\n  SRGB: 1\n};\nvar ColorSpaceNames = ['linear', 'srgb'];\nvar TextureType = {\n  DIFFUSE: 0,\n  NORMAL: 1,\n  LEGACY_UNUSED: 2,\n  SPECULAR: 3,\n  META_INDEX: 4,\n  COUNT: 5\n};\nvar TextureTypeNames = ['diffuse', 'normal', 'legacy_unused', 'specular', 'meta_index'];\nvar TextureCapability = {\n  None: 0 | 0,\n  BC1: 1 << 0,\n  BC2: 1 << 1,\n  BC3: 1 << 2,\n  BC4: 1 << 3,\n  BC5: 1 << 4,\n  BC6H: 1 << 5,\n  BC7: 1 << 6,\n  ASTC: 1 << 7,\n  ETC1: 1 << 8,\n  ETC2: 1 << 9,\n  EAC_R: 1 << 10,\n  EAC_RG: 1 << 11,\n  PVRTC1: 1 << 12,\n  PVRTC2: 1 << 13,\n  ATC: 1 << 14,\n  HalfFloat: 1 << 15,\n  All: 0xffffffff | 0\n};\n\nvar formats = /*#__PURE__*/Object.freeze({\n  TextureFormat: TextureFormat,\n  TextureFormatNames: TextureFormatNames,\n  ColorSpace: ColorSpace,\n  ColorSpaceNames: ColorSpaceNames,\n  TextureType: TextureType,\n  TextureTypeNames: TextureTypeNames,\n  TextureCapability: TextureCapability\n});\n\nvar TextureCapability$1 = TextureCapability;\nvar MAX_LIGHTS = 32;\nvar arrayToHeap = new Map([[Float32Array, 'HEAPF32'], [Uint32Array, 'HEAPU32'], [Uint16Array, 'HEAPU16'], [Uint8Array, 'HEAPU8']]);\n\nfunction assertInteger(x) {\n  if (!Number.isInteger(x)) {\n    throw new Error('Value was not integer: ' + x.toString());\n  }\n}\n/**\n * We need to use a factory here since the native API classes depend on the Emscripten generated wasm code\n * that can't be loaded as a regular ES6 module. The \"Module\" object allows access to C++ functions and the\n * Emscripten heap.\n */\n\n\nvar create = function create(Module) {\n  /**\n   * A Buffer is a block of memory in the Emscripten heap. Typed arrays may get detached when Emscripten\n   * memory growth happens, so any JS code that wants to read from the heap needs to create its typed views\n   * right before they are used.\n   *\n   * The views are safe to use during synchronous execution, but for example a 'yield' in a generator may\n   * trigger memory growth before the caller gets the returned value.\n   */\n  class Buffer {\n    constructor(size) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Float32Array;\n      this.ofs = void 0;\n      this.size = void 0;\n      this.type = void 0;\n      assertInteger(size / type.BYTES_PER_ELEMENT);\n\n      if (size === 0) {\n        throw new Error('Buffer size was zero');\n      }\n\n      this.ofs = Module._malloc(size);\n\n      if (this.ofs === 0) {\n        throw new Error(\"Allocation of \".concat(size, \" bytes failed.\"));\n      }\n\n      this.size = size; // In bytes\n\n      this.type = type;\n    }\n\n    destroy() {\n      Module._free(this.ofs);\n\n      this.ofs = 0;\n      this.size = 0;\n    }\n    /**\n     * A destructive resize operation that never shrinks the buffer.\n     * NOTE: Does *not* copy the old data over.\n     */\n\n\n    ensureSize(newSize) {\n      if (this.size < newSize) {\n        this.destroy();\n        this.ofs = Module._malloc(newSize);\n\n        if (this.ofs === 0) {\n          throw new Error(\"Buffer growth to \".concat(newSize, \" bytes failed.\"));\n        }\n\n        this.size = newSize;\n      }\n    }\n\n    floats() {\n      return new Float32Array(Module.HEAPF32.buffer, this.ofs, this.size / 4);\n    }\n\n    bytes() {\n      return new Uint8Array(Module.HEAPU8.buffer, this.ofs, this.size);\n    }\n\n  }\n\n  class BufferView {\n    constructor(buffer) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : buffer.size;\n      var type = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : buffer.type;\n      this.ofs = void 0;\n      this.start = void 0;\n      this.size = void 0;\n      this.type = void 0;\n      this.heapName = void 0;\n      this.ofs = buffer.ofs;\n      this.start = start;\n      this.size = size;\n      this.type = type;\n      this.heapName = arrayToHeap.get(type);\n    }\n\n    getArray() {\n      // eslint-disable-next-line new-cap\n      return new this.type(Module[this.heapName].buffer, this.ofs + this.start, this.size / this.type.BYTES_PER_ELEMENT);\n    }\n\n  } // Struct size and field offsets are requried for zero-copy interop\n\n\n  var renderableSize = Module.getRenderableSize();\n  var renderableFields = Module.getRenderableFields(); // Used by MeshLoader to copy over mesh AABB without extra allocs\n\n  var boundsBuffer = new Buffer(2 * 3 * 4);\n\n  function copyMat4(buf, elements) {\n    for (var i = 0; i < 16; i++) {\n      buf[i] = elements[i];\n    }\n  }\n\n  function copyVec3(buf, elements) {\n    buf[0] = elements[0];\n    buf[1] = elements[1];\n    buf[2] = elements[2];\n  }\n\n  class Client {\n    constructor() {\n      this.ptr = void 0;\n      this.ptr = Module.clientCreate();\n    }\n\n    destroy() {\n      Module.clientDestroy(this.ptr);\n      this.ptr = 0;\n    }\n\n  }\n\n  class Scene {\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.creds = void 0;\n      this.matrixBuffer = void 0;\n      this.ptr = ptr;\n      this.creds = Module.sceneCredsCreate();\n      this.matrixBuffer = new Buffer(16 * 4);\n    }\n\n    destroy() {\n      Module.sceneCredsDestroy(this.creds);\n      this.matrixBuffer.destroy();\n    }\n\n    connect(token, projectID, modelID) {\n      if (typeof token !== 'string') {\n        throw new TypeError('token should be a string');\n      }\n\n      if (typeof projectID !== 'string') {\n        throw new TypeError('projectID should be a string');\n      }\n\n      if (typeof modelID !== 'string') {\n        throw new TypeError('modelID should be a string');\n      }\n\n      Module.sceneConnect(this.ptr, this.creds, token, projectID, modelID);\n    }\n\n    connectToCustomAPI(token, projectID, modelID, apiURL) {\n      if (typeof token !== 'string') {\n        throw new TypeError('token should be a string');\n      }\n\n      if (typeof projectID !== 'string') {\n        throw new TypeError('projectID should be a string');\n      }\n\n      if (typeof modelID !== 'string') {\n        throw new TypeError('modelID should be a string');\n      }\n\n      if (typeof apiURL !== 'string') {\n        throw new TypeError('apiURL should be a string');\n      }\n\n      if (token.indexOf('#') !== -1) {\n        throw new Error('Use the \"apiURL\" argument instead of a magic token.');\n      }\n\n      if (apiURL.length > 0 && apiURL[apiURL.length - 1] !== '/') {\n        apiURL = apiURL + '/';\n      }\n\n      var magicToken = \"\".concat(apiURL, \"#token\");\n      Module.sceneConnect(this.ptr, this.creds, magicToken, projectID, modelID);\n    }\n\n    connectWithURL(url) {\n      if (typeof url !== 'string') {\n        throw new TypeError('URL should be a string');\n      }\n\n      if (url.indexOf('http:') === 0 || url.indexOf('https:') === 0) {\n        Module.sceneConnectWithURL(this.ptr, this.creds, url);\n      } else {\n        throw new Error('Should be an HTTP or HTTPS URL');\n      }\n    }\n\n    connectionStatus() {\n      return Module.sceneGetConnectionStatus(this.ptr);\n    }\n\n    getInfo() {\n      return Module.sceneGetInfo(this.ptr);\n    }\n\n    isConnected() {\n      return this.connectionStatus() === Module.ConnectionStatus.Connected;\n    }\n\n    update(matrix) {\n      if (!Array.isArray(matrix)) {\n        throw new TypeError('Matrix should be an array');\n      }\n\n      if (matrix.length !== 16) {\n        throw new TypeError('Matrix should be of size 4x4');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), matrix);\n      Module.sceneUpdate(this.ptr, this.matrixBuffer.ofs);\n    }\n\n  }\n\n  class View {\n    constructor(ptr, runtimeAssets) {\n      this.ptr = void 0;\n      this.matrixBuffer = void 0;\n      this.vectorBuffer = void 0;\n      this.lightBuffer = void 0;\n      this.temp = void 0;\n      this.runtimeAssets = void 0;\n      this.ptr = ptr;\n      this.matrixBuffer = new Buffer(16 * 4);\n      this.vectorBuffer = new Buffer(4 * 4);\n      this.lightBuffer = new Buffer(MAX_LIGHTS * 3 * 4);\n      this.temp = undefined;\n      this.runtimeAssets = runtimeAssets;\n    }\n\n    destroy() {\n      this.matrixBuffer.destroy();\n      this.vectorBuffer.destroy();\n      this.lightBuffer.destroy();\n\n      if (this.temp) {\n        this.temp.destroy();\n      }\n    }\n\n    update(cameraMatrix, positionVector, quality) {\n      var lights = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n      if (!Array.isArray(cameraMatrix)) {\n        throw new TypeError('Camera matrix should be an array');\n      }\n\n      if (!Array.isArray(positionVector)) {\n        throw new TypeError('Position should be an array');\n      }\n\n      if (typeof quality !== 'number') {\n        throw new TypeError('Quality should be a number');\n      }\n\n      if (cameraMatrix.length !== 16) {\n        throw new TypeError('Camera matrix should be of size 4x4');\n      }\n\n      if (positionVector.length !== 3) {\n        throw new TypeError('Position vector should be of length 3');\n      }\n\n      copyMat4(this.matrixBuffer.floats(), cameraMatrix);\n      copyVec3(this.vectorBuffer.floats(), positionVector);\n\n      if (lights) {\n        if (lights.length > MAX_LIGHTS) {\n          throw new Error('Too many lights given');\n        }\n\n        var buffer = this.lightBuffer.floats();\n\n        for (var i = 0; i < lights.length; i++) {\n          buffer[3 * i + 0] = lights[i][0];\n          buffer[3 * i + 1] = lights[i][1];\n          buffer[3 * i + 2] = lights[i][2];\n        }\n      }\n\n      Module.viewUpdate(this.ptr, this.matrixBuffer.ofs, quality, this.vectorBuffer.ofs, this.lightBuffer.ofs, lights.length);\n    }\n\n    getVisible(batchSize) {\n      assertInteger(batchSize);\n      var bufferSize = batchSize * renderableSize; // Check if we should enlarge or allocate the temp buffer\n\n      if (!this.temp || this.temp.size < bufferSize) {\n        if (this.temp) {\n          this.temp.destroy();\n        }\n\n        this.temp = new Buffer(bufferSize);\n      }\n\n      var temp = this.temp;\n      var strideInWords = renderableSize / 4;\n      var bufferWordSize = bufferSize / 4;\n      var offsets = renderableFields;\n      assertInteger(strideInWords);\n      assertInteger(bufferWordSize);\n\n      var getView = function getView(arrayType, heap, ptr, ofs) {\n        assertInteger(ofs / 4); // eslint-disable-next-line new-cap\n\n        return new arrayType(heap.buffer, ptr + ofs, bufferWordSize - ofs / 4);\n      };\n\n      var meshIDs = getView(Uint32Array, Module.HEAPU32, temp.ofs, offsets['mesh']);\n      var lodLevels = getView(Int32Array, Module.HEAP32, temp.ofs, offsets['lodLevel']);\n      var masks = getView(Uint32Array, Module.HEAPU32, temp.ofs, offsets['visibilityMask']); // const transforms = getView(Float32Array, Module.HEAPF32, temp.ofs, offsets['transform'])\n\n      var count = Module.viewNextRenderables(this.ptr, temp.ofs, batchSize);\n      var output = [];\n\n      for (var i = 0; i < count; i++) {\n        var id = meshIDs[strideInWords * i];\n        var lod = lodLevels[strideInWords * i];\n        var mask = masks[strideInWords * i]; // TODO extract individual transforms too\n\n        output.push({\n          id: id,\n          mesh: this.runtimeAssets.get(id),\n          lod: lod,\n          mask: mask\n        });\n      }\n\n      return output;\n    }\n\n  }\n\n  var jobTypeToString = new Map([[Module.JobType.StreamIn, 'Create'], [Module.JobType.StreamOut, 'Destroy']]);\n  var assetTypeToString = new Map([[Module.AssetType.Material, 'Material'], [Module.AssetType.Texture, 'Texture'], [Module.AssetType.Mesh, 'Mesh']]);\n\n  class AssetJob {\n    // TODO: Replace with a union container data types\n    constructor(ptr) {\n      this.ptr = void 0;\n      this.jobType = void 0;\n      this.assetType = void 0;\n      this.type = void 0;\n      this.data = void 0;\n      this.ptr = ptr;\n      this.jobType = jobTypeToString.get(Module.jobGetJobType(ptr));\n      this.assetType = assetTypeToString.get(Module.jobGetAssetType(ptr));\n      this.type = this.jobType + this.assetType;\n      this.data = {}; // Type specific asset data set from the outside\n    }\n\n    finish(result, userPtr) {\n      Module.jobFinish(this.ptr, result, userPtr);\n    }\n\n    success() {\n      var userPtr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      Module.jobFinish(this.ptr, Module.JobResult.Success, userPtr);\n    }\n\n    fail() {\n      Module.jobFinish(this.ptr, Module.JobResult.Failure, 0);\n    }\n\n    get userPointer() {\n      return Module.jobGetUserPointer(this.ptr);\n    }\n\n  }\n\n  var vertexBufferMap = new Map([['position', new Buffer(4)], ['normal', new Buffer(4)], ['uv', new Buffer(4)], ['tangent', new Buffer(4)], ['index', new Buffer(4)]]);\n\n  function getBufferForAttribute(name, newSize, type) {\n    var buffer = vertexBufferMap.get(name);\n\n    if (buffer.size < newSize) {\n      if (buffer.size > 0) {\n        buffer.destroy();\n      }\n\n      buffer = new Buffer(newSize, type);\n      vertexBufferMap.set(name, buffer);\n    } else if (type) {\n      buffer.type = type;\n    }\n\n    return buffer;\n  }\n\n  class MeshLoader {\n    constructor(ptr, ownerJob) {\n      this.ownerJob = void 0;\n      this.vertexBuffers = void 0;\n      this.ptr = void 0;\n      this.ptr = ptr;\n      this.ownerJob = ownerJob;\n    } // TODO create a type for bufferDescriptors\n\n\n    setBuffers(bufferDescriptors) {\n      if (!Module.meshLoaderSetBuffers(this.ptr, bufferDescriptors)) {\n        console.log(bufferDescriptors);\n        throw new Error('setBuffers failed');\n      }\n    }\n\n    loadNext() {\n      return Module.meshLoaderLoadNext(this.ptr);\n    }\n\n    done() {\n      return Module.meshLoaderDone(this.ptr);\n    }\n\n    allocateBuffers() {\n      var attrInfo = Module.meshLoaderGetAttributes(this.ptr);\n      var vertexCount = this.uniqueVertexCount;\n      /**\n       * We support the following attributes: 'position', 'uv', 'normal', 'tangent', and 'index'.\n       */\n\n      var bufferDescs = Module.getEmptyMeshBufferDesc();\n      var heapBuffers = {};\n      var bufferSizes = {};\n      Object.keys(attrInfo).forEach(function (name) {\n        var byteSize = vertexCount * attrInfo[name].elemSize;\n        assertInteger(byteSize / Float32Array.BYTES_PER_ELEMENT);\n        bufferSizes[name] = byteSize;\n      });\n      Object.keys(attrInfo).forEach(function (name) {\n        var buffer = getBufferForAttribute(name, bufferSizes[name], Float32Array);\n        var desc = bufferDescs[name];\n        heapBuffers[name] = buffer;\n        desc.ptr = buffer.ofs; // Emscripten heap offset\n\n        desc.elemSize = attrInfo[name].elemSize; // Size of a single element\n\n        desc.size = vertexCount; // Number of elements\n\n        desc.stride = desc.elemSize; // Distance (in bytes) between consecutive elements\n\n        desc.flags = 0; // 0: cached memory, 1: uncached memory\n      });\n      var indexCount = this.indexCount;\n      var indexBytes = vertexCount < 1 << 16 ? 2 : 4;\n\n      if (indexCount === 0) {\n        throw new Error('Mesh index count was zero!');\n      }\n\n      var indexType = indexBytes === 2 ? Uint16Array : Uint32Array;\n      var indexBufferSize = indexCount * indexBytes;\n      var indexBuffer = getBufferForAttribute('index', indexBufferSize, indexType);\n      var index = {};\n      index.elemSize = indexBytes;\n      index.ptr = indexBuffer.ofs;\n      index.size = indexCount;\n      index.stride = index.elemSize;\n      index.flags = 0;\n      heapBuffers['index'] = indexBuffer;\n      bufferSizes['index'] = indexBufferSize;\n      bufferDescs['index'] = index;\n      var views = {};\n      Object.keys(heapBuffers).forEach(function (name) {\n        views[name] = new BufferView(heapBuffers[name], 0, bufferSizes[name]);\n      });\n      return {\n        buffers: views,\n        desc: bufferDescs\n      };\n    }\n\n    get uniqueVertexCount() {\n      return Module.meshLoaderUniqueVertexCount(this.ptr);\n    }\n\n    get indexCount() {\n      return Module.meshLoaderIndexCount(this.ptr);\n    }\n\n    get attributes() {\n      return Module.meshLoaderGetAttributes(this.ptr);\n    }\n\n    get material() {\n      return Module.meshLoaderGetMaterial(this.ptr);\n    }\n\n    get bounds() {\n      Module.meshLoaderGetBounds(this.ptr, boundsBuffer.ofs);\n      var aabb = boundsBuffer.floats();\n      return [[aabb[0], aabb[1], aabb[2]], [aabb[3], aabb[4], aabb[5]]];\n    }\n\n  }\n\n  class Runtime {\n    constructor(client, platformFeatures) {\n      this.assets = void 0;\n      this.client = void 0;\n      this.ptr = void 0;\n      this.platformFeatures = void 0;\n      this.nextId = void 0;\n      this.loader = void 0;\n      this.tempTextureBuffer = void 0;\n      this.tempTranscodedBuffer = void 0;\n      this.debug = void 0;\n\n      /**\n       * If no normal map formats are supported then force support for\n       * BC5 so that textures get transcoded into an uncompressed format.\n       */\n      var normalFormats = TextureCapability$1.ETC1 | TextureCapability$1.ASTC | TextureCapability$1.PVRTC1 | TextureCapability$1.BC5;\n      var capabilityMask = platformFeatures.capabilityMask;\n\n      if (!(capabilityMask & normalFormats)) {\n        capabilityMask |= TextureCapability$1.BC5 | TextureCapability$1.BC4;\n      }\n\n      this.client = client;\n      this.ptr = Module.runtimeCreate(client.ptr, capabilityMask);\n      this.platformFeatures = platformFeatures;\n      this.assets = new Map();\n      this.nextId = 1;\n      this.loader = undefined;\n      this.tempTextureBuffer = new Buffer(1024 * 1024, Uint8Array);\n      this.tempTranscodedBuffer = new Buffer(4, Uint8Array);\n      this.debug = {\n        textureFormatsInUse: new Set(),\n        platformFeatures: platformFeatures\n      };\n    }\n\n    destroy() {\n      this.tempTextureBuffer.destroy();\n      this.tempTranscodedBuffer.destroy();\n      Module.runtimeDestroy(this.ptr);\n      this.client.destroy();\n      this.ptr = 0;\n    }\n\n    createScene() {\n      var scenePtr = Module.runtimeCreateScene(this.ptr);\n      return new Scene(scenePtr);\n    }\n\n    destroyScene(scene) {\n      Module.runtimeDestroyScene(this.ptr, scene.ptr);\n    }\n\n    createView() {\n      var viewPtr = Module.runtimeCreateView(this.ptr);\n      return new View(viewPtr, this.assets);\n    }\n\n    destroyView(view) {\n      Module.runtimeDestroyView(this.ptr, view.ptr);\n    }\n\n    update() {\n      Module.runtimeUpdate(this.ptr);\n    }\n\n    *getJobs() {\n      var _this = this;\n\n      while (true) {\n        if (this.loader) {\n          if (this.loader.done()) {\n            var _job = this.loader.ownerJob; // The buffers allocated by MeshLoader are handed over to the caller.\n\n            _job.data.buffers = this.loader.vertexBuffers.buffers;\n            _job.data.desc = this.loader.vertexBuffers.desc;\n            _job.data.material = this.assets.get(this.loader.material);\n            _job.data.bounds = this.loader.bounds;\n            this.loader = undefined;\n            yield _job;\n          } else {\n            /**\n             * A mesh is still decompressing so we'll advance the decompression\n             * one step further and return the control to the caller for a timeout check.\n             */\n            if (!this.loader.loadNext()) {\n              throw new Error('loadNext failed');\n            }\n\n            yield undefined; // This processing step might have finished the decompression already, so loop back.\n\n            continue;\n          }\n        }\n\n        var jobPtr = Module.runtimeGetJob(this.ptr); // Terminate the generator when there are no more jobs to process.\n\n        if (jobPtr === 0) {\n          return undefined;\n        }\n\n        var job = new AssetJob(jobPtr);\n\n        if (job.type === 'CreateMaterial') {\n          job.data = Module.jobGetMaterialData(job.ptr);\n          job.data.textures = job.data.textures.map(function (id) {\n            return _this.assets.get(id);\n          });\n          yield job;\n        } else if (job.type === 'CreateTexture') {\n          var info = Module.jobGetTextureData(job.ptr);\n          var buffer = this.tempTextureBuffer;\n          buffer.ensureSize(info.dataByteSize); // Fill the allocated buffer with texture data\n\n          var success = Module.jobCopyTextureContents(job.ptr, buffer.ofs, buffer.size, false);\n\n          if (!success) {\n            job.fail();\n            var msg = 'Texture copying failed! Job pointer: ' + job.ptr + ', buffer ofs: ' + buffer.ofs + ', buffer size: ' + buffer.size;\n            throw new Error(msg);\n          }\n\n          var bufferView = new BufferView(buffer, 0, info.dataByteSize);\n\n          if (this.formatNeedsTranscoding(info.format)) {\n            var _formatToArrayType;\n\n            var newInfo = this.downsampleAndTranscodeTexture(info, buffer, this.tempTranscodedBuffer);\n            info = newInfo;\n            var formatToArrayType = (_formatToArrayType = {}, _defineProperty(_formatToArrayType, TextureFormat.RGBA32, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RGB565, Uint16Array), _defineProperty(_formatToArrayType, TextureFormat.RG8, Uint8Array), _defineProperty(_formatToArrayType, TextureFormat.RG16F, Uint16Array), _formatToArrayType);\n            bufferView = new BufferView(this.tempTranscodedBuffer, 0, info.dataByteSize);\n            bufferView.type = formatToArrayType[info.format];\n          } // Convert internal enums to string constants\n\n\n          info.format = TextureFormatNames[info.format];\n          info.colorSpace = ColorSpaceNames[info.colorSpace];\n          info.textureType = TextureTypeNames[info.textureType];\n          this.debug.textureFormatsInUse.add(info.format);\n          job.data = {\n            info: info,\n            buffer: bufferView\n          };\n          yield job;\n        } else if (job.type === 'CreateMesh') {\n          // Mesh jobs create decompression work that needs to be done first.\n          this.loader = new MeshLoader(Module.jobGetMeshLoader(job.ptr), job);\n          this.loader.vertexBuffers = this.loader.allocateBuffers();\n          this.loader.setBuffers(this.loader.vertexBuffers.desc);\n          yield undefined;\n        } else if (job.jobType === 'Destroy') {\n          // The handler gets a reference to the asset object in 'job.data'\n          job.data = this.assets.get(job.userPointer);\n          yield job;\n        } else {\n          throw new Error(\"Job wasn't handled correctly\");\n        }\n      }\n    }\n\n    handleJobs(handlers, timeLimit) {\n      var startTime = performance.now();\n\n      for (var job of this.getJobs()) {\n        // If job is 'undefined' it means a mesh is still decompressing\n        if (job) {\n          try {\n            handlers[job.type](job);\n          } catch (error) {\n            job.fail();\n            throw error;\n          }\n        } // We always process at least one job before checking the time\n\n\n        if (performance.now() - startTime > timeLimit) {\n          break;\n        }\n      }\n    }\n\n    addAsset(job, asset) {\n      // AssetJob IDs are just an increasing 32-bit series\n      var userPtr = this.nextId;\n      this.nextId = this.nextId + 1 | 0;\n\n      if (this.nextId === 0) {\n        this.nextId = 1;\n      }\n\n      this.assets.set(userPtr, asset);\n      job.finish(Module.JobResult.Success, userPtr);\n    }\n    /**\n     * Removes the asset reference of the stream out job.\n     * Assumes the caller has already freed their own asset resources.\n     */\n\n\n    removeAsset(job, asset) {\n      var id = job.userPointer;\n\n      if (this.assets.has(id)) {\n        this.assets[\"delete\"](id);\n      }\n\n      job.finish(Module.JobResult.Success, 0);\n    }\n\n    failJob(job) {\n      job.finish(Module.JobResult.Failure, 0);\n    }\n\n    formatNeedsTranscoding(format) {\n      var flags = this.platformFeatures.capabilityMask;\n\n      switch (format) {\n        case TextureFormat.BC1:\n          if (flags & TextureCapability.BC1) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC3:\n          if (flags & TextureCapability.BC3) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC4:\n          if (flags & TextureCapability.BC4) {\n            return false;\n          }\n\n          break;\n\n        case TextureFormat.BC5:\n          if (flags & TextureCapability.BC5) {\n            return false;\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      return true;\n    }\n\n    downsampleAndTranscodeTexture(info, buffer, outputBuffer) {\n      var newFormat = Module.getUncompressedFromBCFormat(info.format);\n\n      if (newFormat === TextureFormat.COUNT) {\n        throw new Error(\"Couldn't find a matching BC format\");\n      } // If half float is not supported on this platform we need to make do with an 8-bit texture.\n\n\n      if (newFormat === TextureFormat.RG16F && !this.platformFeatures.halfFloat) {\n        newFormat = TextureFormat.RG8;\n      }\n\n      var outputSize = Module.getTextureByteSize(info.width, info.height, newFormat);\n      outputBuffer.ensureSize(outputSize);\n      var result = Module.downsampleAndTranscodeTexture(info.format, newFormat, info.width, info.height, buffer.ofs, info.dataByteSize, outputBuffer.ofs, outputBuffer.size);\n\n      if (!result.success) {\n        throw new Error(\"Texture transcoding failed. Input: \".concat(info.format, \", output: \").concat(newFormat, \", output size: \").concat(outputSize));\n      }\n\n      if (result.texture.format !== newFormat) {\n        throw new Error(\"Transcoded texture format was \".concat(result.texture.format, \" instead of the expected \").concat(newFormat));\n      } // Create a new texture descriptor with updated properties and return it.\n\n\n      var info2 = Object.assign({}, info);\n      var desc = result.texture;\n      info2 = Object.assign(info2, {\n        format: desc.format,\n        width: desc.width,\n        height: desc.height,\n        dataByteSize: desc.dataByteSize,\n        mipByteSizes: [desc.dataByteSize]\n      });\n      return info2;\n    }\n\n    getDebugInfo() {\n      return Module.runtimeGetDebugInfo(this.ptr);\n    }\n\n  } // Expose only runtime for instantiation\n\n\n  return {\n    createRuntime: function createRuntime(features) {\n      return new Runtime(new Client(), features);\n    }\n  };\n};\n\n\n\nvar NativeTypes = /*#__PURE__*/Object.freeze({\n\n});\n\n\n\nvar _Math = /*#__PURE__*/Object.freeze({\n\n});\n\n\n\nvar AssetJob = /*#__PURE__*/Object.freeze({\n\n});\n\n/**\n * Returns a library instance that uses the Emscripten resources of \"Module\".\n */\nfunction instantiate(Module) {\n  var API_VERSION = 'api/v2';\n\n  var apicall = function apicall(endPoint, path, options) {\n    var buildURL = function buildURL(endPoint, path) {\n      var url = endPoint.url;\n\n      if (url.substr(-1) !== '/') {\n        url += '/';\n      }\n\n      url += API_VERSION;\n      url += path;\n      return url;\n    };\n\n    var url = buildURL(endPoint, path);\n    var init = Object.assign({\n      method: 'GET',\n      headers: {\n        'Umbra-Client': 'UmbraJS',\n        Authorization: 'Basic ' + btoa(endPoint.key + ':') // 'Umbra-Device' : '{}'\n\n      },\n      mode: 'cors'\n    }, options);\n    return fetch(url, init).then(function (response) {\n      if (!response.ok) {\n        // FIXME: handle http errors better\n        throw new Error('HTTP error, status = ' + response.status);\n      }\n\n      return response.json();\n    });\n  };\n\n  var lib = {};\n\n  lib.getProjects = function (token) {\n    var endPoint = Module.parseCloudCredentials(token);\n\n    if (endPoint.key === '') {\n      throw new Error(\"Couldn't parse token \" + token);\n    }\n\n    return apicall(endPoint, '/projects', {});\n  };\n  /**\n   * Queries supported texture formats and also enables the relevant WebGL extensions.\n   */\n\n\n  lib.getPlatformFeatures = function (gl) {\n    var flags = 0; // We accumulate a texture format bitmask here\n\n    var formats$1 = new Set(); // Will hold all supported format names\n\n    var supportsSRGB = false;\n    var supportsHalfFloat = false;\n    /**\n     * We fetch all extension strings and strip off possible vendor prefixes of WEBGL\n     * extensions. However, when we enable the extension we need the original full string.\n     * Here 'extStrings' holds a mapping from a shortened to a full extension string.\n     */\n\n    var extStrings = new Map([]); // Full strings\n\n    var extNames = []; // Shortened strings\n\n    var allExtensions = gl.getSupportedExtensions();\n\n    for (var full of allExtensions) {\n      var shortened = full.replace(/^(.*)_WEBGL_/, 'WEBGL_');\n      extStrings.set(shortened, full);\n      extNames.push(shortened);\n    }\n\n    var mapping = new Map([['WEBGL_compressed_texture_s3tc', {\n      mask: TextureCapability.BC1 | TextureCapability.BC2 | TextureCapability.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_s3tc_srgb', {\n      mask: TextureCapability.BC1 | TextureCapability.BC2 | TextureCapability.BC3,\n      names: ['bc1', 'bc2', 'bc3']\n    }], ['WEBGL_compressed_texture_rgtc', {\n      mask: TextureCapability.BC4 | TextureCapability.BC5,\n      names: ['bc4', 'bc5']\n    }], ['WEBGL_compressed_texture_pvrtc', {\n      mask: TextureCapability.PVRTC1,\n      names: ['pvrtc1_rgb4', 'pvrtc1_rgba4']\n    }], ['WEBGL_compressed_texture_etc1', {\n      mask: TextureCapability.ETC1,\n      names: ['etc1_rgb']\n    }], ['WEBGL_compressed_texture_astc', {\n      mask: TextureCapability.ASTC,\n      names: ['astc_4x4']\n    }]]);\n\n    for (var key of mapping.keys()) {\n      if (extNames.includes(key)) {\n        gl.getExtension(extStrings.get(key));\n        var value = mapping.get(key);\n        flags |= value.mask;\n        value.names.forEach(function (name) {\n          return formats$1.add(name);\n        });\n      }\n    }\n\n    if (extNames.includes('WEBGL_compressed_texture_s3tc_srgb')) {\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('EXT_sRGB')) {\n      gl.getExtension(extStrings.get('EXT_sRGB'));\n      supportsSRGB = true;\n    }\n\n    if (extNames.includes('OES_texture_half_float')) {\n      gl.getExtension(extStrings.get('OES_texture_half_float'));\n      supportsHalfFloat = true;\n    }\n\n    return {\n      capabilityMask: flags,\n      formats: _toConsumableArray(formats$1),\n      srgb: supportsSRGB,\n      halfFloat: supportsHalfFloat\n    };\n  };\n\n  lib.getIDs = function (args) {\n    // The application can connect with either direct IDs or names\n    if ('projectID' in args && 'modelID' in args) {\n      return Promise.resolve({\n        project: args.projectID,\n        model: args.modelID\n      });\n    } else if ('project' in args && 'model' in args) {\n      var token = args.token,\n          project = args.project,\n          model = args.model;\n      return lib.getProjects(token).then(function (projects) {\n        var proj = projects.find(function (p) {\n          return p.name === project;\n        });\n        var model = proj.models.find(function (m) {\n          return m.name === model;\n        });\n\n        if (!proj) {\n          var names = projects.map(function (p) {\n            return p.name;\n          });\n          throw new Error('Couldn\\'t find a project with name \"' + project + '\". Only found the following: ' + names);\n        }\n\n        if (!model) {\n          var _names = proj.models.map(function (m) {\n            return m.name;\n          });\n\n          throw new Error('Couldn\\'t find a model with name \"' + model + '\". Only found the following: ' + _names);\n        }\n\n        return {\n          project: proj.id,\n          model: model.id\n        };\n      });\n    } else {\n      throw new Error('Invalid project & model ID combination.\\nYou should define either both \"projectID\" and \"modelID\" or \"project\" and \"model\"');\n    }\n  }; // Access to the Emscripten module is needed for deinitialization\n\n\n  lib.nativeModule = Module; // Allow access to API classes\n\n  var classes = create(Module);\n  lib.createRuntime = classes.createRuntime;\n\n  lib.getStreamingInfo = function () {\n    return {\n      minBytesDownloaded: lib.nativeModule.minBytesDownloaded,\n      maxBytesDownloaded: lib.nativeModule.maxBytesDownloaded\n    };\n  };\n\n  return lib;\n}\n/**\n * Compiles the WebAssembly and code and initializes the Emscripten environment.\n * Returns a Promise that resolves with the library instance ready for use.\n */\n\n\nvar initUmbra = function initUmbra(config) {\n\n  var defaults = {\n    wasmURL: ''\n  };\n  config = Object.assign(defaults, config);\n  return new Promise(function (resolve, reject) {\n    try {\n      var redirectWasmURL = function redirectWasmURL(path, prefix) {\n        // If it's our wasm file, return a custom URL\n        if (path.endsWith('umbra.wasm') && config.wasmURL !== '') {\n          return config.wasmURL;\n        }\n\n        return prefix + path;\n      };\n\n      UmbraNativeAPI({\n        locateFile: redirectWasmURL\n      }).then(function (Module) {\n        // A workaround for https://github.com/emscripten-core/emscripten/issues/5820\n        delete Module['then'];\n\n        Module['onAbort'] = function (what) {\n          reject(what);\n        };\n\n        resolve(instantiate(Module));\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n/**\n * Deinitializes the Emscripten environment.\n *\n * NOTE: We assume here that async IndexedDB loads and stores have already finished.\n * This is the case if Umbra.update() was *not* called before deinitUmbra() on the\n * same frame.\n */\n\nvar deinitUmbra = function deinitUmbra(Umbra) {\n  Object.values(Umbra.nativeModule.wgetRequests).forEach(function (req) {\n    req.abort();\n  });\n\n  try {\n    Umbra.nativeModule.systemExit();\n  } catch (e) {\n    if (e.name !== 'ExitStatus') {\n      throw e;\n    }\n  }\n};\n\nexport { AssetJob, formats as Formats, _Math as Math, NativeTypes as Native, deinitUmbra, initUmbra };\n//# sourceMappingURL=umbra.esm.js.map\n","/* eslint  @typescript-eslint/camelcase: 0 */\r\n\r\nimport * as THREE from './ThreeWrapper'\r\n\r\nfunction makeFormat(format, type, compressed) {\r\n  return { format, type, compressed }\r\n}\r\n\r\nconst ThreeFormats = {\r\n  rgb24: makeFormat(THREE.RGBFormat, THREE.UnsignedByteType, false),\r\n  rgba32: makeFormat(THREE.RGBAFormat, THREE.UnsignedByteType, false),\r\n  rgb565: makeFormat(THREE.RGBFormat, THREE.UnsignedShort565Type, false),\r\n  rg8: makeFormat(THREE.LuminanceAlphaFormat, THREE.UnsignedByteType, false),\r\n  rg16f: makeFormat(THREE.LuminanceAlphaFormat, THREE.HalfFloatType, false),\r\n  bc1: makeFormat(THREE.RGBA_S3TC_DXT1_Format, THREE.UnsignedByteType, true),\r\n  bc3: makeFormat(THREE.RGBA_S3TC_DXT5_Format, THREE.UnsignedByteType, true),\r\n  etc1_rgb: makeFormat(THREE.RGB_ETC1_Format, THREE.UnsignedByteType, true),\r\n  astc_4x4: makeFormat(\r\n    THREE.RGBA_ASTC_4x4_Format,\r\n    THREE.UnsignedByteType,\r\n    true,\r\n  ),\r\n  pvrtc1_rgb4: makeFormat(\r\n    THREE.RGB_PVRTC_4BPPV1_Format,\r\n    THREE.UnsignedByteType,\r\n    true,\r\n  ),\r\n}\r\n\r\nexport { ThreeFormats }\r\n","const normalmapChunk = `\r\n#ifdef USE_NORMALMAP\r\n#ifdef USE_TANGENT\r\n\r\nvec3 tangentToWorld2 = normal;\r\nvec3 tangentToWorld0 = normalize(tangent - tangentToWorld2 * dot(tangentToWorld2, tangent));\r\n\r\n#ifdef UMBRA_FLIP_TANGENT\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld0, tangentToWorld2));\r\n#else\r\nvec3 tangentToWorld1 = normalize(cross(tangentToWorld2, tangentToWorld0));\r\n#endif\r\n\r\n#if defined(UMBRA_TEXTURE_SUPPORT_BC5) || defined(UMBRA_TEXTURE_SUPPORT_ASTC)\r\nnormal.xy = texture2D(normalMap, vUv).xy * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#elif defined(UMBRA_TEXTURE_SUPPORT_BC3)\r\nnormal.xy = texture2D(normalMap, vUv).yw * 2.0 - 1.0;\r\nnormal.z = sqrt(1.0 - clamp(dot(normal.xy, normal.xy), 0.0, 1.0));\r\n#else\r\nnormal.xyz = texture2D(normalMap, vUv).xyz;\r\nnormal.xy *= 2.0;\r\nnormal.xy -= 1.0;\r\nnormal = normalize(normal);\r\n#endif\r\n\r\nnormal = tangentToWorld0 * normal.x + tangentToWorld1 * normal.y + tangentToWorld2 * normal.z;\r\nnormal = normalize(normal);\r\n#endif\r\n#endif\r\n\r\n`\r\n\r\nconst metalnessMapChunk = `\r\nfloat metalnessFactor = metalness;\r\n#ifdef USE_METALNESSMAP\r\nvec4 texelMetalness = texture2D( metalnessMap, vUv );\r\nmetalnessFactor *= texelMetalness.r;\r\n#endif\r\n`\r\n\r\n// The BSDF function (see 'bsdfs.glsl') squares the roughness so we don't need to do it here.\r\nconst roughnessMapChunk = `\r\nfloat roughnessFactor = roughness;\r\n#ifdef USE_ROUGHNESSMAP\r\nvec4 texelRoughness = texture2D( roughnessMap, vUv );\r\nfloat roughness = 1.0 - texelRoughness.g;\r\nroughnessFactor *= roughness;\r\n#endif\r\n`\r\n\r\n/**\r\n * ShaderPatcher is a preprocessor class that replaces the default PBR texture read\r\n * shader chunks with the correct Umbra versions. Doing it this way instead of completely\r\n * custom shaders allows the application to use its own materials with Umbrafied models.\r\n */\r\nclass ShaderPatcher {\r\n  flipTangent: boolean\r\n  defines: string\r\n\r\n  constructor(formats: string[]) {\r\n    /*\r\n     * World space transform can swap handedness which isn't handled by three.js in tangent space\r\n     * normal maps so we need to be able to flip them ourselves.\r\n     */\r\n    this.flipTangent = false\r\n\r\n    // Texture format feature flags\r\n    this.defines = ''\r\n\r\n    if (formats.indexOf('bc3') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC3\\n'\r\n    }\r\n    if (formats.indexOf('bc5') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_BC5\\n'\r\n    }\r\n    if (formats.indexOf('astc_4x4') > -1) {\r\n      this.defines += '#define UMBRA_TEXTURE_SUPPORT_ASTC\\n'\r\n    }\r\n  }\r\n\r\n  process(shader: THREE.Shader, renderer: THREE.WebGLRenderer) {\r\n    let frag = shader.fragmentShader\r\n\r\n    if (this.flipTangent) {\r\n      frag = '#define UMBRA_FLIP_TANGENT\\n' + frag\r\n    }\r\n\r\n    frag = this.defines + frag\r\n    frag = frag.replace('#include <normal_fragment_maps>', normalmapChunk)\r\n    frag = frag.replace('#include <metalnessmap_fragment>', metalnessMapChunk)\r\n    frag = frag.replace('#include <roughnessmap_fragment>', roughnessMapChunk)\r\n\r\n    shader.fragmentShader = frag\r\n  }\r\n}\r\n\r\nexport { ShaderPatcher }\r\n","export class ObjectPool<T> {\r\n  usedList: Array<T>\r\n  freeList: Array<T>\r\n\r\n  constructor() {\r\n    this.usedList = []\r\n    this.freeList = []\r\n  }\r\n\r\n  allocate(makeFunc: () => T) {\r\n    let obj: T\r\n    if (this.freeList.length > 0) {\r\n      obj = this.freeList.pop()\r\n    } else {\r\n      obj = makeFunc()\r\n    }\r\n\r\n    this.usedList.push(obj)\r\n    return obj\r\n  }\r\n\r\n  freeAll(clearFunc?: (obj: T) => void) {\r\n    for (let i = 0; i < this.usedList.length; i++) {\r\n      if (clearFunc) {\r\n        clearFunc(this.usedList[i])\r\n      }\r\n      this.freeList.push(this.usedList[i])\r\n    }\r\n    this.usedList.length = 0\r\n  }\r\n\r\n  clear() {\r\n    this.usedList.length = 0\r\n    this.freeList.length = 0\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\n\r\nimport {\r\n  Formats,\r\n  PlatformFeatures,\r\n  Runtime,\r\n  Scene,\r\n  View,\r\n} from '@umbra3d/umbrajs'\r\nimport { ShaderPatcher } from './ShaderPatcher'\r\nimport { ObjectPool } from './ObjectPool'\r\n\r\ntype UmbraMesh = THREE.Mesh & { isUmbraMesh: true }\r\ntype UmbraCamera = THREE.Camera & { umbraStreamingPosition?: THREE.Vector3 }\r\n\r\n/**\r\n * A wrapper type for mesh geometry and its material. Only the ModelObject instantiates the\r\n * THREE.Mesh objects that are passed to the renderer. ModelObject also creates the final\r\n * THREE.Material instance using the textures and transparency flag in 'materialDesc'\r\n */\r\nexport interface MeshDescriptor {\r\n  geometry\r\n  materialDesc\r\n}\r\n\r\nexport class Model extends THREE.Object3D {\r\n  // User editable config\r\n  quality = 0.5 // Streaming model quality. Ranges from 0 to 1.\r\n  opaqueMaterial = new THREE.MeshBasicMaterial()\r\n  wireframe = false\r\n  freeze = false\r\n\r\n  // We need to present ourselves as a LOD object to get the update() call\r\n  readonly isLOD = true\r\n  readonly autoUpdate = true\r\n  readonly name = 'UmbraModel'\r\n\r\n  private renderer: THREE.WebGLRenderer\r\n\r\n  private materialPool = new ObjectPool<THREE.Material>()\r\n  private cameraToView = new Map<THREE.Camera, View>()\r\n  private viewLastUsed = new Map<View, number>()\r\n  private shaderPatcher: ShaderPatcher\r\n\r\n  private stats = {\r\n    numVisible: 0,\r\n    numShadowCasters: 0,\r\n    numCachedMaterials: 0,\r\n    numAssets: 0,\r\n  }\r\n\r\n  private umbra: {\r\n    runtime: Runtime\r\n    scene: Scene\r\n  }\r\n\r\n  // Temporary values we don't want to reallocate every frame\r\n  private matrixWorldInverse = new THREE.Matrix4()\r\n  private projScreenMatrix = new THREE.Matrix4()\r\n  private cameraWorldPosition = new THREE.Vector3()\r\n  private tempVector = new THREE.Vector3()\r\n  private dirVector = new THREE.Vector3()\r\n\r\n  constructor(\r\n    runtime: Runtime,\r\n    scene: Scene,\r\n    renderer: THREE.WebGLRenderer,\r\n    features: PlatformFeatures,\r\n  ) {\r\n    super()\r\n\r\n    this.renderer = renderer\r\n    this.shaderPatcher = new ShaderPatcher(features.formats)\r\n\r\n    // We need to flip the Z-axis since models are stored in \"left-handed Y is up\" coordinate system\r\n    this.scale.set(1.0, 1.0, -1.0)\r\n\r\n    // Add API objects under their own object for clarity\r\n    this.umbra = {\r\n      runtime: runtime,\r\n      scene: scene,\r\n    }\r\n  }\r\n\r\n  getInfo() {\r\n    const info = { connected: this.umbra.scene.isConnected() }\r\n    if (info.connected) {\r\n      info['sceneInfo'] = this.umbra.scene.getInfo()\r\n    }\r\n    Object.assign(info, this.stats)\r\n    return info\r\n  }\r\n\r\n  getBounds(): THREE.Box3 {\r\n    if (!this.umbra.scene.isConnected()) {\r\n      return undefined\r\n    }\r\n\r\n    const info = this.umbra.scene.getInfo()\r\n    const bounds = info.bounds\r\n    const min = bounds.min\r\n    const max = bounds.max\r\n    const box = new THREE.Box3(\r\n      new THREE.Vector3(min[0], min[1], min[2]),\r\n      new THREE.Vector3(max[0], max[1], max[2]),\r\n    )\r\n    return box\r\n  }\r\n\r\n  getCenter(): THREE.Vector3 {\r\n    const bounds = this.getBounds()\r\n    bounds.applyMatrix4(this.matrixWorld)\r\n    const center = new THREE.Vector3()\r\n    bounds.getCenter(center)\r\n    return center\r\n  }\r\n\r\n  private pruneOldViews(frame: number): void {\r\n    /**\r\n     * We get no notification when cameras are removed from the scene graph\r\n     * so we'll go and remove old views.\r\n     */\r\n    for (const [view, lastUsed] of this.viewLastUsed) {\r\n      if (frame - lastUsed > 1000) {\r\n        for (const [cam, view2] of this.cameraToView) {\r\n          if (view2 === view) {\r\n            this.cameraToView.delete(cam)\r\n            break\r\n          }\r\n        }\r\n        this.umbra.runtime.destroyView(view)\r\n        this.viewLastUsed.delete(view)\r\n      }\r\n    }\r\n  }\r\n\r\n  update = function(camera: UmbraCamera) {\r\n    let scene\r\n\r\n    if (this.freeze) {\r\n      return\r\n    }\r\n\r\n    this.traverseAncestors(obj => {\r\n      if (obj.isScene) {\r\n        scene = obj\r\n      }\r\n    })\r\n\r\n    if (!scene && !scene.isScene) {\r\n      console.log('No parent scene found')\r\n      return\r\n    }\r\n\r\n    function findLights(scene: THREE.Scene) {\r\n      const lights = []\r\n      scene.traverseVisible((obj: any) => {\r\n        if (obj.isDirectionalLight && obj.castShadow) {\r\n          lights.push(obj)\r\n        }\r\n      })\r\n\r\n      return lights\r\n    }\r\n\r\n    let lights: THREE.DirectionalLight[] = []\r\n\r\n    if (this.renderer.shadowMap.enabled) {\r\n      lights = findLights(scene)\r\n    }\r\n\r\n    let view = this.cameraToView.get(camera)\r\n\r\n    if (!view) {\r\n      view = this.umbra.runtime.createView()\r\n      this.cameraToView.set(camera, view)\r\n    }\r\n\r\n    const frame: number = this.renderer.info.render.frame\r\n\r\n    this.viewLastUsed.set(view, frame)\r\n    this.pruneOldViews(frame)\r\n\r\n    this.umbra.scene.update(this.matrixWorld.elements)\r\n\r\n    // If we are using a PBR material then we might need to flip the tangent vector\r\n    if (typeof this.opaqueMaterial.normalMapType !== 'undefined') {\r\n      // TODO(pvaananen): Would be nice to avoid recalculating the determinant every frame.\r\n      const flip = this.matrixWorld.determinant() < 0\r\n\r\n      if (flip !== this.shaderPatcher.flipTangent) {\r\n        this.shaderPatcher.flipTangent = flip\r\n        this.materialPool.clear()\r\n      }\r\n    }\r\n\r\n    this.matrixWorldInverse.getInverse(camera.matrixWorld)\r\n    this.projScreenMatrix.multiplyMatrices(\r\n      camera.projectionMatrix,\r\n      this.matrixWorldInverse,\r\n    )\r\n\r\n    const dir = this.dirVector\r\n    const vector3 = this.tempVector\r\n\r\n    const lightDirections = lights.map(light => {\r\n      dir.setFromMatrixPosition(light.target.matrixWorld)\r\n      vector3.setFromMatrixPosition(light.matrixWorld)\r\n      dir.sub(vector3)\r\n      return [dir.x, dir.y, dir.z]\r\n    }, lights)\r\n\r\n    // By default we stream in meshes around the camera, but the user can override it too.\r\n    if (camera.umbraStreamingPosition) {\r\n      this.cameraWorldPosition.copy(camera.umbraStreamingPosition)\r\n    } else {\r\n      camera.getWorldPosition(this.cameraWorldPosition)\r\n    }\r\n\r\n    const pos = this.cameraWorldPosition\r\n    view.update(\r\n      this.projScreenMatrix.elements,\r\n      [pos.x, pos.y, pos.z],\r\n      this.quality,\r\n      lightDirections,\r\n    )\r\n\r\n    this.stats.numVisible = 0\r\n    this.stats.numAssets = this.umbra.runtime.assets.size\r\n\r\n    /**\r\n     * Next we find the visible Umbra meshes and add them to the scene graph.\r\n     * This is pretty tricky, because we want more meshes to show up in the shadow map pass\r\n     * than in the main camera render pass. This is why 'mesh.castShadow' doesn't help here\r\n     * since it does the exact opposite.\r\n     *\r\n     * We use a workaround that first adds the common meshes as children of the Umbra model\r\n     * object but stashes the shadow caster meshes (visible only from lights) to an extra\r\n     * list 'shadowCasters'.\r\n     *\r\n     * The trick is that after the children, we add a 'proxy' object that presents itself\r\n     * as a 'LOD' object. As a consequence it gets its own update() call, and there we go\r\n     * and add the shadow casters also to the children list. At this point the opaque\r\n     * renderable objects were already collected to their own render list, so 'children'\r\n     * is safe to modify.\r\n     *\r\n     * In essence, the flow is the following.\r\n     *\r\n     *    three.js                           model object (this)\r\n     *    --------                           ------------------\r\n     *    Starts traversing scene graph\r\n     *    Calls model.update(cam) ---------> Updates views\r\n     *                                       Fetches a list of renderables\r\n     *                                       Adds common meshes to this.children\r\n     *    Adds model.children to\r\n     *      the render list\r\n     *    Starts rendering model.children\r\n     *    Calls proxy.update(cam) ---------> Proxy goes and adds shadow casters to this.children\r\n     *    Starts the shadow pass\r\n     *    Adds model.children to shadow\r\n     *      render list\r\n     *    Renders the shadow pass\r\n     *    Renders the opaque pass\r\n     *    Renders the transparent pass\r\n     *\r\n     * As you can see, the 'this.children' list is mutated halfway through the renderer's\r\n     * scene graph traversal so that different object list ends up to the shadow pass render code.\r\n     */\r\n\r\n    // First filter away last frame's meshes\r\n    const newChildren = []\r\n    for (let i = 0; i < this.children.length; i++) {\r\n      if (!this.children[i].isUmbraMesh) {\r\n        newChildren.push(this.children[i])\r\n      }\r\n    }\r\n\r\n    this.children = newChildren\r\n\r\n    const shadowCasters = []\r\n\r\n    const proxy = new THREE.Object3D() as any\r\n    proxy.isLOD = true\r\n    proxy.autoUpdate = true\r\n    proxy.update = cam => {\r\n      // Remove the proxy itself\r\n      this.children.pop()\r\n\r\n      // Add the shadow casters\r\n      for (let i = 0; i < shadowCasters.length; i++) {\r\n        this.children.push(shadowCasters[i])\r\n      }\r\n    }\r\n\r\n    this.materialPool.freeAll(mat => {\r\n      // Remove references to textures so GC can release the three.js objects\r\n      delete mat.map\r\n      delete mat.normalMap\r\n      delete mat.metalnessMap\r\n      delete mat.roughnessMap\r\n    })\r\n\r\n    const batchSize = 200\r\n    let visible = []\r\n\r\n    do {\r\n      visible = view.getVisible(batchSize)\r\n\r\n      for (let i = 0; i < visible.length; i++) {\r\n        const { materialDesc, geometry } = visible[i].mesh as MeshDescriptor\r\n\r\n        // Fetch a new material from the pool if we already have free ones. This avoids\r\n        // extra allocations and more importantly 'onBeforeCompile' calls.\r\n        const material = this.materialPool.allocate(() =>\r\n          this.opaqueMaterial.clone(),\r\n        )\r\n        material.wireframe = this.wireframe\r\n        material.transparent = materialDesc.transparent\r\n\r\n        material.onBeforeCompile = (shader, renderer) => {\r\n          /**\r\n           * If the original material already had a custom preprocessor callback we need to call\r\n           * that first. We need to use 'apply' in case the callback uses 'this' reference to\r\n           * access some material properties.\r\n           */\r\n          if (this.opaqueMaterial.onBeforeCompile) {\r\n            this.opaqueMaterial.onBeforeCompile.apply(material, [\r\n              shader,\r\n              renderer,\r\n            ])\r\n          }\r\n\r\n          this.shaderPatcher.process(shader, renderer)\r\n        }\r\n\r\n        const diffuseMap = materialDesc.textures[Formats.TextureType.DIFFUSE]\r\n        const normalMap = materialDesc.textures[Formats.TextureType.NORMAL]\r\n        const metalglossMap =\r\n          materialDesc.textures[Formats.TextureType.SPECULAR]\r\n\r\n        if (diffuseMap && diffuseMap.isTexture) {\r\n          material.map = diffuseMap\r\n        }\r\n\r\n        if (normalMap && normalMap.isTexture) {\r\n          material.normalMap = normalMap\r\n          material.vertexTangents = true\r\n          material.normalMapType = THREE.TangentSpaceNormalMap\r\n        }\r\n\r\n        if (metalglossMap && metalglossMap.isTexture) {\r\n          material.metalnessMap = metalglossMap\r\n          material.metalness = 1.0\r\n          material.roughnessMap = metalglossMap\r\n          material.roughness = 1.0\r\n        }\r\n\r\n        /**\r\n         * We instatiate new Mesh objects each frame but the constructor is very cheap\r\n         * and the references should live for a very short time since 'this.children'\r\n         * gets cleared every frame. However if this still causes too much allocations\r\n         * an object pool could help.\r\n         */\r\n        const mesh = new THREE.Mesh(geometry, material) as UmbraMesh\r\n        mesh.isUmbraMesh = true\r\n        mesh.matrixWorld.copy(this.matrixWorld)\r\n        mesh.castShadow = this.castShadow\r\n        mesh.receiveShadow = this.receiveShadow\r\n        mesh.visible = true\r\n        this.children.push(mesh)\r\n\r\n        if ((visible[i].mask & 0x01) === 0) {\r\n          shadowCasters.push(mesh)\r\n          mesh.frustumCulled = true\r\n        } else {\r\n          this.children.push(mesh)\r\n          mesh.frustumCulled = false\r\n        }\r\n      }\r\n\r\n      this.stats.numVisible += visible.length\r\n    } while (visible.length === batchSize)\r\n\r\n    this.stats.numShadowCasters = shadowCasters.length\r\n    this.stats.numCachedMaterials =\r\n      this.materialPool.usedList.length + this.materialPool.freeList.length\r\n\r\n    if (shadowCasters.length > 0) {\r\n      this.children.push(proxy)\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    for (const view of this.cameraToView.values()) {\r\n      this.umbra.runtime.destroyView(view)\r\n    }\r\n\r\n    // Remove all Umbra meshes from children\r\n    this.children = this.children.filter((x: UmbraMesh) => !x.isUmbraMesh)\r\n\r\n    // Dispose all cached materials\r\n    this.materialPool.freeAll(mat => mat.dispose())\r\n\r\n    // We don't dispose mesh geometries here because they are managed by the Runtime\r\n\r\n    this.umbra.runtime.destroyScene(this.umbra.scene)\r\n    // Runtime must be manually freed by the user with .dispose() of the API object\r\n  }\r\n}\r\n","import * as THREE from './ThreeWrapper'\r\nimport {\r\n  initUmbra,\r\n  deinitUmbra,\r\n  Formats,\r\n  Math,\r\n  ConnectionArgs,\r\n  AssetJob,\r\n} from '@umbra3d/umbrajs'\r\nimport { ThreeFormats } from './ThreeFormats'\r\nimport { Model, MeshDescriptor } from './Model'\r\n\r\nfunction makeBoundingSphere(aabb: Math.BoundingBox) {\r\n  const min = aabb[0]\r\n  const max = aabb[1]\r\n  const size = new THREE.Vector3(\r\n    max[0] - min[0],\r\n    max[1] - min[1],\r\n    max[2] - min[2],\r\n  )\r\n  const pos = new THREE.Vector3(\r\n    min[0] + size.x * 0.5,\r\n    min[1] + size.y * 0.5,\r\n    min[2] + size.z * 0.5,\r\n  )\r\n  return new THREE.Sphere(pos, size.length())\r\n}\r\n\r\nexport function initWithThreeJS(\r\n  renderer: THREE.WebGLRenderer,\r\n  userConfig: { wasmURL?: string },\r\n) {\r\n  if (!renderer) {\r\n    throw new TypeError('\"renderer\" should be of type THREE.WebGLRenderer')\r\n  }\r\n\r\n  return initUmbra(userConfig).then(Umbra => {\r\n    let context: WebGLRenderingContext\r\n    // three.js r106 has no 'getContext'\r\n    if ('getContext' in renderer) {\r\n      context = renderer.getContext()\r\n    } else {\r\n      context = (renderer as any).context\r\n    }\r\n    const features = Umbra.getPlatformFeatures(context)\r\n\r\n    // Three.js does not support BC5 compressed formats so we manually disable them.\r\n    features.capabilityMask &= ~Formats.TextureCapability.BC5\r\n\r\n    let runtime = Umbra.createRuntime(features)\r\n\r\n    /**\r\n     * Creating a model is an asynchronous operation because we might need to query the Project API\r\n     * to map the given string names into numeric IDs. If IDs or URL are used then the promise will\r\n     * resolve immediately.\r\n     */\r\n    const createModel = (\r\n      cloudArgs: (ConnectionArgs & { apiURL?: string }) | { url: string },\r\n    ): Promise<Model> => {\r\n      const scene = runtime.createScene()\r\n\r\n      return new Promise((resolve, reject) => {\r\n        try {\r\n          if ('url' in cloudArgs) {\r\n            scene.connectWithURL(cloudArgs.url)\r\n            resolve(new Model(runtime, scene, renderer, features))\r\n          } else if ('token' in cloudArgs) {\r\n            return Umbra.getIDs(cloudArgs).then(\r\n              // on resolve\r\n              IDs => {\r\n                if ('apiURL' in cloudArgs) {\r\n                  scene.connectToCustomAPI(\r\n                    cloudArgs.token,\r\n                    IDs.project,\r\n                    IDs.model,\r\n                    cloudArgs.apiURL,\r\n                  )\r\n                } else {\r\n                  scene.connect(cloudArgs.token, IDs.project, IDs.model)\r\n                }\r\n                resolve(new Model(runtime, scene, renderer, features))\r\n              },\r\n              // on reject\r\n              () => {\r\n                const args = cloudArgs as any\r\n                throw new Error(\r\n                  `Couldn't fetch IDs matching arguments ${args.project} and ${args.model}`,\r\n                )\r\n              },\r\n            )\r\n          } else {\r\n            throw new Error('Invalid connection arguments')\r\n          }\r\n        } catch (e) {\r\n          runtime.destroyScene(scene)\r\n          reject(e)\r\n        }\r\n      })\r\n    }\r\n\r\n    /*\r\n     * This launches new downloads and hands out generated assets to three.js.\r\n     * Should be called at the beginning of a frame.\r\n     */\r\n    const update = function(timeBudget = 10) {\r\n      const handlers = {\r\n        CreateMaterial: job => {\r\n          runtime.addAsset(job, job.data)\r\n        },\r\n        DestroyMaterial: job => {\r\n          runtime.removeAsset(job, job.data)\r\n        },\r\n        CreateTexture: job => {\r\n          const info = job.data.info\r\n          const buffer = job.data.buffer\r\n\r\n          let glformat\r\n\r\n          if (ThreeFormats.hasOwnProperty(info.format)) {\r\n            glformat = ThreeFormats[info.format]\r\n          }\r\n\r\n          if (!glformat) {\r\n            // Add a dummy object for unknown formats. They will appear as a solid black color.\r\n            console.log('Unknown texture format', info.format)\r\n            runtime.addAsset(job, { isTexture: false })\r\n            return\r\n          }\r\n\r\n          // eslint-disable-next-line new-cap\r\n          const pixelData = new buffer.type(buffer.getArray().slice())\r\n\r\n          let tex: THREE.CompressedTexture | THREE.DataTexture\r\n          if (glformat.compressed) {\r\n            const mip = {\r\n              width: info.width,\r\n              height: info.height,\r\n              data: pixelData,\r\n            }\r\n            tex = new THREE.CompressedTexture([mip], info.width, info.height)\r\n          } else {\r\n            tex = new THREE.DataTexture(pixelData, info.width, info.height)\r\n          }\r\n\r\n          tex.format = glformat.format\r\n          tex.type = glformat.type\r\n          tex.magFilter = THREE.LinearFilter\r\n          tex.minFilter = THREE.LinearFilter\r\n          tex.anisotropy = 0\r\n\r\n          /**\r\n           * A workaround for the case where we directly output colors in gamma space.\r\n           * We make diffuse textures linear to avoid gamma expansion at texture fetch time.\r\n           * This is slightly wrong because texture filtering and shading will be done\r\n           * in gamma space, but this behavior is what people usually expect.\r\n           */\r\n          if (info.textureType === 'diffuse' && !renderer.gammaOutput) {\r\n            tex.encoding = THREE.LinearEncoding\r\n          } else {\r\n            tex.encoding =\r\n              info.colorSpace === 'linear'\r\n                ? THREE.LinearEncoding\r\n                : THREE.sRGBEncoding\r\n          }\r\n\r\n          tex.needsUpdate = true\r\n\r\n          runtime.addAsset(job, tex)\r\n        },\r\n        DestroyTexture: (job: AssetJob.DestroyTexture) => {\r\n          // Free texture data only if it's not a dummy texture\r\n          if (job.data.isTexture) {\r\n            job.data.dispose()\r\n          }\r\n          runtime.removeAsset(job, job.data)\r\n        },\r\n        CreateMesh: (job: AssetJob.CreateMesh) => {\r\n          /**\r\n           * The mesh creation job gives us all the vertex data in job.data.buffers.\r\n           * The buffers are only valid during this handler, and the memory will be\r\n           * reused for other meshes later. Therefore we make copies of the arrays\r\n           * for three.js which is something we would have to do anyway.\r\n           */\r\n\r\n          const geometry = new THREE.BufferGeometry()\r\n          const indexArray = job.data.buffers['index'].getArray() as any\r\n          const indices = Array.from(indexArray)\r\n          geometry.setIndex(indices as number[])\r\n          geometry.boundingSphere = makeBoundingSphere(job.data.bounds)\r\n\r\n          const attribs = {\r\n            position: { components: 3 },\r\n            normal: { components: 3 },\r\n            uv: { components: 2 },\r\n            tangent: { components: 3 },\r\n          }\r\n\r\n          Object.keys(attribs).forEach(name => {\r\n            const buffer = job.data.buffers[name]\r\n\r\n            if (buffer) {\r\n              const array = buffer.getArray()\r\n              const attrib = new THREE.Float32BufferAttribute(\r\n                array.slice(),\r\n                attribs[name].components,\r\n              )\r\n              geometry.addAttribute(name, attrib)\r\n            }\r\n          })\r\n\r\n          const meshDescriptor: MeshDescriptor = {\r\n            geometry: geometry,\r\n            materialDesc: job.data.material,\r\n          }\r\n          runtime.addAsset(job, meshDescriptor)\r\n        },\r\n        DestroyMesh: job => {\r\n          const meshDesc = job.data\r\n          // Tell Umbra's runtime that this asset doesn't exist anymore and finish the job\r\n          runtime.removeAsset(job, meshDesc)\r\n          // Release three.js's resources\r\n          meshDesc.geometry.dispose()\r\n        },\r\n      }\r\n\r\n      runtime.handleJobs(handlers, timeBudget)\r\n      runtime.update()\r\n    }\r\n\r\n    /**\r\n     * Returns streaming information. We can't tell which files came from the browser cache\r\n     * so we report lower and upper limits of the true download size.\r\n     *\r\n     * The returned object has the following fields:\r\n     *\r\n     *  'maxBytesDownloaded' is an upper limit assuming no file was cached,\r\n     *  'minBytesDownloaded' is the corresponding lower limit assuming all duplicates came from cache.\r\n     *\r\n     */\r\n    function getStats() {\r\n      return {\r\n        maxBytesDownloaded: Umbra.nativeModule.maxBytesDownloaded,\r\n        minBytesDownloaded: Umbra.nativeModule.minBytesDownloaded,\r\n      }\r\n    }\r\n\r\n    return {\r\n      createModel,\r\n      getStats,\r\n      update: update,\r\n      dispose: () => {\r\n        runtime.assets.forEach((asset, userPtr) => {\r\n          // TODO: Use separate types for assets instead\r\n          if ('geometry' in asset) {\r\n            asset.geometry.dispose()\r\n          }\r\n          if ('dispose' in asset) {\r\n            asset.dispose()\r\n          }\r\n        })\r\n        runtime.destroy()\r\n        runtime = undefined\r\n\r\n        deinitUmbra(Umbra)\r\n      },\r\n      lib: Umbra,\r\n      runtime: runtime,\r\n    }\r\n  })\r\n}\r\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","_scriptDir","UmbraNativeAPI","document","currentScript","src","undefined","e","m","aa","hasOwnProperty","arguments","thisProgram","quit","a","b","preRun","postRun","q","indexOf","substr","lastIndexOf","ba","print","console","log","bind","v","printErr","warn","ca","x","da","fa","_y","ia","ja","f64-rem","debugger","WebAssembly","z","A","ka","la","c","d","B","Math","max","C","subarray","slice","D","set","Uint8Array","F","ra","sa","G","ta","ua","ma","TextDecoder","na","decode","f","g","String","fromCharCode","k","E","oa","charCodeAt","pa","qa","va","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","wa","TOTAL_MEMORY","xa","shift","eb","Wa","dynCall_v","dynCall_vi","wasmMemory","Memory","initial","buffer","byteLength","ya","za","Aa","Ba","Ca","Da","Ea","unshift","H","Fa","Ga","Ha","I","startsWith","preloadedImages","preloadedAudios","Ia","locateFile","Ja","wasmBinary","La","asm","exports","monitorRunDependencies","clearInterval","instance","fetch","Promise","credentials","then","ok","arrayBuffer","instantiate","env","global","NaN","Infinity","global.Math","asm2wasm","instantiateWasm","instantiateStreaming","memory","table","Table","maximum","element","__memory_base","__table_base","Na","alert","h","l","n","p","t","u","XMLHttpRequest","open","withCredentials","responseType","w","Jc","Kc","onload","status","response","URLsDownloaded","maxBytesDownloaded","has","add","minBytesDownloaded","dynCall_viii","dynCall_viiii","X","Ic","onerror","onabort","setRequestHeader","btoa","split","send","Ma","push","Oa","J","Sa","Ta","_K","L","Ua","Va","pop","Xa","this","fromWireType","M","N","Ya","Za","replace","$a","Function","ab","Error","name","message","stack","create","bb","cb","db","O","forEach","fb","P","gb","Q","zb","hb","count","Pa","Ra","ib","jb","kb","lb","mb","FinalizationGroup","next","done","unregister","register","nb","ob","pb","R","qb","sb","apply","rb","Tb","tb","ub","vb","S","wb","Hb","clone","Db","T","xb","Bb","U","toWireType","Qa","Cb","W","FUNCTION_TABLE","join","Eb","Fb","Gb","map","Y","Ib","Jb","Kb","Lb","Mb","Ob","Pb","Qb","Rb","Sb","$b","Zb","_ac","hc","Z","bc","fc","Yb","ec","Wb","Xb","jc","gc","ic","mc","nc","oc","pc","pointerLockElement","canvas","mozPointerLockElement","webkitPointerLockElement","msPointerLockElement","preloadPlugins","qc","rc","sc","MozBlobBuilder","WebKitBlobBuilder","tc","window","URL","webkitURL","canHandle","test","handle","Blob","type","uc","size","ha","append","getBlob","createObjectURL","Image","complete","createElement","width","height","getContext","drawImage","revokeObjectURL",".ogg",".wav",".mp3","Audio","addEventListener","noExitRuntime","setTimeout","vc","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","msRequestPointerLock","exitPointerLock","mozExitPointerLock","webkitExitPointerLock","msExitPointerLock","elementPointerLock","preventDefault","xc","yc","zc","Ac","parentNode","fullscreenElement","mozFullScreenElement","msFullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","exitFullscreen","Bc","SDL","screen","Cc","Dc","insertBefore","removeChild","onFullScreen","onFullscreen","appendChild","requestFullscreen","mozRequestFullScreen","msRequestFullscreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","webkitRequestFullScreen","Vb","Fc","cancelFullScreen","mozCancelFullScreen","msExitFullscreen","webkitCancelFullScreen","Gc","cc","requestAnimationFrame","Date","now","jpg","jpeg","png","bmp","ogg","wav","mp3","Hc","yb","forcedAspectRatio","round","min","style","removeProperty","setProperty","Sc","Mc","Nc","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","Lc","onupgradeneeded","target","result","transaction","objectStoreNames","contains","objectStore","createObjectStore","onsuccess","error","Oc","_fflush","InternalError","Yc","Zc","Vc","BindingError","isAliasOf","getPrototypeOf","isDeleted","deleteLater","argPackAdvance","readValueFromPointer","deleteObject","Ab","pointerType","getInheritedInstanceCount","keys","getLiveInheritedInstances","flushPendingDeletes","setDelayFunction","UnboundTypeError","count_emval_handles","get_first_emval","requestFullScreen","setCanvasSize","pauseMainLoop","resumeMainLoop","floor","setStatus","statusMessage","preMainLoop","kc","postMainLoop","audio","dc","setImmediate","data","stopPropagation","postMessage","getUserMedia","navigator","mozGetUserMedia","createContext","antialias","alpha","GL","GLctx","Ub","wc","dateNow","performance","bd","_","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","___errno_location","y","Nb","stat","K","concat","read","write","r","$","values","_d","V","ea","lc","o","ArrayBuffer","Uint8ClampedArray","s","j","abort","get","Pc","$c","ad","put","Qc","grow","Xc","onExit","toTimeString","match","Tc","getTimezoneOffset","Uc","Number","Wc","Rc","getSeconds","getMinutes","getHours","getDate","getMonth","getFullYear","getDay","getTime","___embind_register_native_and_builtin_types","___getTypeName","__get_daylight","ga","__get_timezone","__get_tzname","_free","_malloc","globalCtors","stackAlloc","Ka","dynCall_i","dynCall_ii","dynCall_iii","dynCall_iiii","dynCall_iiiii","dynCall_iiiiii","dynCall_iiiiiifi","dynCall_iiiiiiiiii","dynCall_iiiji","dynCall_ji","dynCall_jiji","dynCall_vii","dynCall_viifiii","dd","calledRun","onRuntimeInitialized","onAbort","dynCall_viiif","dynCall_viiifi","dynCall_viiifiii","dynCall_viiiii","dynCall_viiiiii","dynCall_viiiiiiiii","dynCall_viij","cd","run","preInit","Set","wgetRequests","TextureFormat","RGBA32","RGB24","BC1","BC3","BC4","BC5","ETC1_RGB","RGBA_FLOAT32","UNC1","JPEG","PNG","BMP","PSD","TGA","GIF","HDR","PIC","PNM","ASTC_4X4","ASTC_5X4","ASTC_5X5","ASTC_6X5","ASTC_6X6","ASTC_8X5","ASTC_8X6","ASTC_10X5","ASTC_10X6","ASTC_8X8","ASTC_10X8","ASTC_10X10","ASTC_12X10","ASTC_12X12","ARGB32","R8","PVRTC1_RGB4","PVRTC1_RGBA4","UINT8","UINT16","UINT32","RGB565","RG8","RG16F","COUNT","TextureFormatNames","ColorSpaceNames","TextureTypeNames","TextureCapability","None","BC2","BC6H","BC7","ASTC","ETC1","ETC2","EAC_R","EAC_RG","PVRTC1","PVRTC2","ATC","HalfFloat","All","formats","freeze","ColorSpace","LINEAR","SRGB","TextureType","DIFFUSE","NORMAL","LEGACY_UNUSED","SPECULAR","META_INDEX","TextureCapability$1","MAX_LIGHTS","arrayToHeap","Map","assertInteger","isInteger","Module","Buffer","[object Object]","ofs","BYTES_PER_ELEMENT","newSize","destroy","BufferView","start","heapName","renderableSize","getRenderableSize","renderableFields","getRenderableFields","boundsBuffer","copyMat4","buf","elements","Client","ptr","clientCreate","clientDestroy","Scene","creds","matrixBuffer","sceneCredsCreate","sceneCredsDestroy","token","projectID","modelID","sceneConnect","apiURL","magicToken","url","sceneConnectWithURL","sceneGetConnectionStatus","sceneGetInfo","connectionStatus","ConnectionStatus","Connected","matrix","floats","sceneUpdate","View","runtimeAssets","vectorBuffer","lightBuffer","temp","cameraMatrix","positionVector","quality","lights","viewUpdate","batchSize","bufferSize","strideInWords","bufferWordSize","offsets","getView","arrayType","heap","meshIDs","lodLevels","masks","viewNextRenderables","output","id","lod","mask","mesh","jobTypeToString","JobType","StreamIn","StreamOut","assetTypeToString","AssetType","Material","Texture","Mesh","AssetJob","jobType","assetType","jobGetJobType","jobGetAssetType","userPtr","jobFinish","JobResult","Success","Failure","userPointer","jobGetUserPointer","vertexBufferMap","getBufferForAttribute","MeshLoader","ownerJob","vertexBuffers","bufferDescriptors","meshLoaderSetBuffers","meshLoaderLoadNext","meshLoaderDone","attrInfo","meshLoaderGetAttributes","vertexCount","uniqueVertexCount","bufferDescs","getEmptyMeshBufferDesc","heapBuffers","bufferSizes","byteSize","elemSize","desc","stride","flags","indexCount","indexBytes","indexBufferSize","indexBuffer","index","views","buffers","meshLoaderUniqueVertexCount","meshLoaderIndexCount","attributes","material","meshLoaderGetMaterial","bounds","meshLoaderGetBounds","aabb","Runtime","client","platformFeatures","assets","nextId","loader","tempTextureBuffer","tempTranscodedBuffer","debug","normalFormats","capabilityMask","runtimeCreate","textureFormatsInUse","runtimeDestroy","scenePtr","runtimeCreateScene","scene","runtimeDestroyScene","viewPtr","runtimeCreateView","view","runtimeDestroyView","runtimeUpdate","_this","loadNext","_job","jobPtr","runtimeGetJob","job","jobGetMaterialData","textures","info","jobGetTextureData","ensureSize","dataByteSize","jobCopyTextureContents","fail","msg","bufferView","formatNeedsTranscoding","format","_formatToArrayType","downsampleAndTranscodeTexture","formatToArrayType","colorSpace","textureType","jobGetMeshLoader","allocateBuffers","setBuffers","handlers","timeLimit","startTime","getJobs","asset","finish","outputBuffer","newFormat","getUncompressedFromBCFormat","halfFloat","outputSize","getTextureByteSize","success","texture","info2","assign","mipByteSizes","runtimeGetDebugInfo","createRuntime","features","lib","getProjects","endPoint","parseCloudCredentials","path","options","buildURL","init","method","headers","Umbra-Client","Authorization","mode","json","apicall","getPlatformFeatures","gl","formats$1","supportsSRGB","supportsHalfFloat","extStrings","extNames","allExtensions","getSupportedExtensions","full","shortened","mapping","names","includes","getExtension","srgb","getIDs","args","resolve","project","model","projects","proj","find","models","_names","nativeModule","classes","getStreamingInfo","initUmbra","config","wasmURL","reject","prefix","endsWith","what","deinitUmbra","Umbra","req","systemExit","makeFormat","compressed","ThreeFormats","rgb24","THREE","rgba32","rgb565","rg8","rg16f","bc1","bc3","etc1_rgb","astc_4x4","pvrtc1_rgb4","normalmapChunk","metalnessMapChunk","roughnessMapChunk","ShaderPatcher","flipTangent","defines","process","shader","renderer","frag","fragmentShader","ObjectPool","usedList","freeList","allocate","makeFunc","freeAll","clearFunc","clear","Model","runtime","opaqueMaterial","wireframe","isLOD","autoUpdate","materialPool","cameraToView","viewLastUsed","shaderPatcher","stats","numVisible","numShadowCasters","numCachedMaterials","numAssets","umbra","matrixWorldInverse","projScreenMatrix","cameraWorldPosition","tempVector","dirVector","update","camera","traverseAncestors","isScene","shadowMap","enabled","traverseVisible","isDirectionalLight","castShadow","findLights","createView","frame","render","pruneOldViews","matrixWorld","normalMapType","flip","determinant","getInverse","multiplyMatrices","projectionMatrix","dir","vector3","lightDirections","light","setFromMatrixPosition","sub","umbraStreamingPosition","copy","getWorldPosition","pos","newChildren","children","isUmbraMesh","shadowCasters","proxy","cam","mat","normalMap","metalnessMap","roughnessMap","visible","getVisible","materialDesc","geometry","transparent","onBeforeCompile","diffuseMap","Formats","metalglossMap","isTexture","vertexTangents","metalness","roughness","receiveShadow","frustumCulled","scale","getInfo","connected","isConnected","getBounds","getCenter","applyMatrix4","center","destroyView","dispose","filter","destroyScene","initWithThreeJS","userConfig","context","createModel","cloudArgs","createScene","IDs","connectToCustomAPI","connect","connectWithURL","getStats","timeBudget","CreateMaterial","addAsset","DestroyMaterial","removeAsset","CreateTexture","glformat","tex","pixelData","getArray","mip","magFilter","minFilter","anisotropy","gammaOutput","encoding","needsUpdate","DestroyTexture","CreateMesh","indexArray","indices","setIndex","boundingSphere","attribs","position","components","normal","uv","tangent","array","attrib","addAttribute","meshDescriptor","DestroyMesh","meshDesc","handleJobs"],"mappings":"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"}